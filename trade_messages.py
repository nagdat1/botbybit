# -*- coding: utf-8 -*-
"""
رسائل التداول الموحدة
"""

TRADE_SUCCESS_MESSAGES = {
    'order_placed': """✅ تم تنفيذ أمر {side} للرمز {symbol}

💰 المبلغ: {amount} USDT
💲 السعر: {price:.6f}
🏪 السوق: {market}
🆔 رقم الأمر: {order_id}

📈 يمكنك متابعة الصفقة من قائمة "الصفقات المفتوحة"
""",
    
    'tp_executed': """✅ تم تنفيذ هدف الربح!

📊 **{symbol}**
🎯 TP: {percentage}%
💰 السعر: {price:.6f}
💵 الربح: {pnl:.2f} USDT

🔄 الصفقة لا تزال مفتوحة للجزء المتبقي
""",
    
    'sl_executed': """⚠️ تم تنفيذ وقف الخسارة!

📊 **{symbol}**
🛑 SL: {percentage}%
💰 السعر: {price:.6f}
💸 الخسارة: {pnl:.2f} USDT

🔒 تم إغلاق الصفقة بالكامل
""",
    
    'partial_close_executed': """✂️ تم تنفيذ الإغلاق الجزئي!

📊 **{symbol}**
📉 الإغلاق: {percentage}%
💰 السعر: {price:.6f}
💵 الربح/الخسارة: {pnl:.2f} USDT

🔄 الصفقة لا تزال مفتوحة للجزء المتبقي
""",
    
    'trade_closed': """🔒 تم إغلاق الصفقة بالكامل!

📊 **{symbol}**
💰 السعر النهائي: {price:.6f}
💵 الربح/الخسارة النهائي: {pnl:.2f} USDT

✅ الصفقة مكتملة
""",
    
    'settings_updated': """⚙️ تم تحديث الإعدادات بنجاح!

🎯 أهداف الربح: {tp_percentages}%
🛑 وقف الخسارة: {sl_percentages}%
✂️ الإغلاق الجزئي: {partial_percentages}%

✅ الإعدادات الجديدة ستنطبق على الصفقات الجديدة
"""
}

TRADE_ERROR_MESSAGES = {
    'api_not_available': """❌ API غير متاح للتداول الحقيقي

⚠️ يرجى التحقق من:
• إعدادات API في ملف config.py
• صحة مفاتيح API
• اتصال الإنترنت

💡 يمكنك استخدام الحساب التجريبي في الإعدادات
""",
    
    'api_error': """❌ خطأ في الاتصال بـ API

📝 تفاصيل الخطأ: {error_details}

🔍 الحلول المقترحة:
• تحقق من صحة مفاتيح API
• تأكد من صلاحيات API للتداول
• راجع إعدادات الحساب على Bybit
""",
    
    'insufficient_balance': """❌ الرصيد غير كافي

💰 الرصيد المتاح: {available:.2f} USDT
💸 المبلغ المطلوب: {required:.2f} USDT
📊 النقص: {required - available:.2f} USDT

💡 يمكنك:
• تقليل مبلغ التداول في الإعدادات
• إيداع المزيد في حسابك
• استخدام الحساب التجريبي
""",
    
    'execution_error': """❌ فشل في تنفيذ الأمر

🔢 كود الخطأ: {error_type}
📝 التفاصيل: {details}

🔍 الحلول المقترحة:
• تحقق من صحة الرمز
• تأكد من توفر السيولة
• راجع إعدادات السوق
""",
    
    'invalid_parameters': """❌ معلمات التداول غير صالحة

⚠️ المشاكل المكتشفة:
{issues}

💡 يرجى تصحيح المعلمات والمحاولة مرة أخرى
""",
    
    'trade_not_found': """❌ الصفقة غير موجودة

🔍 تحقق من:
• صحة معرف الصفقة
• أن الصفقة لا تزال مفتوحة
• أن الصفقة تنتمي لك

💡 استخدم قائمة "الصفقات المفتوحة" لعرض الصفقات الحالية
""",
    
    'trade_already_closed': """❌ الصفقة مغلقة بالفعل

📊 هذه الصفقة تم إغلاقها مسبقاً
⏰ لا يمكن تنفيذ عمليات عليها

💡 استخدم قائمة "تاريخ التداول" لعرض الصفقات المغلقة
""",
    
    'invalid_percentage': """❌ النسبة غير صالحة

⚠️ النسبة المدخلة: {percentage}%

✅ النسب المسموحة:
• أهداف الربح: 0.1% - 50%
• وقف الخسارة: 0.1% - 20%
• الإغلاق الجزئي: 1% - 99%

💡 يرجى إدخال نسبة صحيحة
""",
    
    'quantity_too_small': """❌ الكمية صغيرة جداً للإغلاق

📊 الكمية المتبقية: {remaining:.6f}
📉 الكمية المطلوبة للإغلاق: {required:.6f}

💡 الحد الأدنى للإغلاق الجزئي: 0.001
""",
    
    'settings_update_failed': """❌ فشل في تحديث الإعدادات

📝 خطأ: {error}

🔍 الحلول المقترحة:
• تأكد من صحة النسب المدخلة
• استخدم أرقام صحيحة فقط
• تأكد من أن النسب منطقية

💡 مثال على النسب الصحيحة:
• TP: 1, 2, 5
• SL: 1, 2, 3  
• Partial: 25, 50, 75
"""
}

TRADE_INFO_MESSAGES = {
    'trade_opened': """🚀 صفقة جديدة مفتوحة!

{side_emoji} **{symbol}** - {side_text}
💰 سعر الدخول: `{entry_price:.6f}`
📊 الكمية: `{quantity:.6f}`
⏰ الوقت: `{time}`

📈 يمكنك الآن إدارة الصفقة من قائمة "الصفقات المفتوحة"
""",
    
    'trade_updated': """🔄 تم تحديث معلومات الصفقة

📊 **{symbol}**
💰 السعر الحالي: `{current_price:.6f}`
📈 الربح/الخسارة: `{pnl:.2f} USDT` ({pnl_percentage:+.2f}%)
📊 الكمية المتبقية: `{remaining_quantity:.6f}`

⏰ آخر تحديث: `{time}`
""",
    
    'no_open_trades': """📭 لا توجد صفقات مفتوحة حالياً

💡 يمكنك:
• فتح صفقة جديدة من خلال الإشارات
• مراجعة تاريخ التداول
• تعديل إعدادات التداول

🚀 استعد لفتح صفقات جديدة!
""",
    
    'trade_settings_info': """⚙️ إعدادات الصفقات الحالية

🎯 أهداف الربح (TP):
{tp_percentages}

🛑 وقف الخسارة (SL):
{sl_percentages}

✂️ الإغلاق الجزئي:
{partial_percentages}

💡 يمكنك تغيير هذه النسب من زر "تعديل النسب"
""",
    
    'trade_summary': """📊 ملخص الصفقة

🆔 معرف الصفقة: `{trade_id}`
📊 الرمز: **{symbol}**
🔄 النوع: {side}
💰 سعر الدخول: `{entry_price:.6f}`
📈 السعر الحالي: `{current_price:.6f}`
💵 الربح/الخسارة: `{pnl:.2f} USDT` ({pnl_percentage:+.2f}%)
📊 الكمية الإجمالية: `{total_quantity:.6f}`
📉 الكمية المتبقية: `{remaining_quantity:.6f}`
⏰ وقت الفتح: `{created_at}`
🔄 الحالة: {status}
"""
}