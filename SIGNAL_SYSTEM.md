# ๐ก ูุธุงู ุงูุฅุดุงุฑุงุช ุงููุชูุฏู - ุฏููู ุดุงูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฅุฏุงุฑุฉ ุฅุดุงุฑุงุช ุงูุชุฏุงูู ุงููุชูุฏู ุงูุฐู ูุฏุนู ุฌููุน ุฃููุงุน ุงูุตููุงุช (Spot & Futures) ูุน ุชุชุจุน ูุงูู ููุฅุดุงุฑุงุช ูุงูุตููุงุช ุจุงุณุชุฎุฏุงู ูุนุฑูุงุช ูุฑูุฏุฉ (Signal IDs).

---

## ๐ ุฃููุงุน ุงูุฅุดุงุฑุงุช ุงููุฏุนููุฉ

### 1๏ธโฃ **BUY** - ุดุฑุงุก ูู ุงูุณูู ุงูููุฑู (Spot)

**ุงููุตู:** ูุชุญ ุตููุฉ ุดุฑุงุก ูู ุงูุณูู ุงูููุฑู (Spot Market)

**ูุซุงู ุงูุฅุดุงุฑุฉ:**
```json
{
  "signal": "buy",
  "symbol": "BTCUSDT"
}
```

**ูุซุงู ูุน TP/SL (ุงุฎุชูุงุฑู):**
```json
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "take_profit": 46000,
  "stop_loss": 44000
}
```

**ูุงุฐุง ูุญุฏุซ:**
- โ ููุชุญ ุงูุจูุช ุตููุฉ ุดุฑุงุก Spot
- ๐พ ูุญูุธ ุงูุตููุฉ ูุน `signal_id = "TV_20240115_001"`
- ๐ ูุฑุณู ุฅุดุนุงุฑ ุชูููุฌุฑุงู ุจุชูุงุตูู ุงูุตููุฉ
- ๐ ูุฑุจุท ุงูุตููุฉ ุจูุนุฑู ุงูุฅุดุงุฑุฉ ูููุชุงุจุนุฉ

**ุฅุดุนุงุฑ ุชูููุฌุฑุงู:**
```
๐ข ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_20240115_001
๐ ุงูููุน: BUY
๐ฑ ุงูุฑูุฒ: BTCUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: SPOT
๐ ุฑูู ุงูุฃูุฑ: ORD_123456789

โ ุงูุญุงูุฉ: Order placed: buy BTCUSDT
```

---

### 2๏ธโฃ **SELL** - ุจูุน/ุฅุบูุงู ูู ุงูุณูู ุงูููุฑู (Spot)

**ุงููุตู:** ุฅุบูุงู ุตููุฉ ุงูุดุฑุงุก ุงูููุชูุญุฉ ูู ุงูุณูู ุงูููุฑู

**ูุซุงู ุงูุฅุดุงุฑุฉ:**
```json
{
  "signal": "sell",
  "symbol": "BTCUSDT"
}
```

**ูุงุฐุง ูุญุฏุซ:**
- ๐ ูุจุญุซ ุงูุจูุช ุนู ุตููุฉ Spot ููุชูุญุฉ ูู BTCUSDT
- โ ูุบูู ุงูุตููุฉ ุงูููุชูุญุฉ
- ๐พ ูุญุฏุซ ุญุงูุฉ ุงูุตููุฉ ุฅูู "CLOSED"
- ๐ ูุฑุณู ุฅุดุนุงุฑ ุจุงูุฅุบูุงู

**ุฅุดุนุงุฑ ุชูููุฌุฑุงู:**
```
๐ด ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_20240115_002
๐ ุงูููุน: SELL
๐ฑ ุงูุฑูุฒ: BTCUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: SPOT
๐ ุฑูู ุงูุฃูุฑ: ORD_123456790

โ ุงูุญุงูุฉ: Position closed: BTCUSDT
```

---

### 3๏ธโฃ **LONG** - ุตููุฉ ุดุฑุงุก ูู ุงูุนููุฏ ุงููุณุชูุจููุฉ (Futures)

**ุงููุตู:** ูุชุญ ุตููุฉ ุดุฑุงุก (LONG) ูู ุณูู ุงูุนููุฏ ุงููุณุชูุจููุฉ

**ูุซุงู ุงูุฅุดุงุฑุฉ:**
```json
{
  "signal": "long",
  "symbol": "BTCUSDT"
}
```

**ูุซุงู ูุน TP/SL (ุงุฎุชูุงุฑู):**
```json
{
  "signal": "long",
  "symbol": "BTCUSDT",
  "take_profit": 47000,
  "stop_loss": 44000
}
```

**ูุงุฐุง ูุญุฏุซ:**
- โ ููุชุญ ุงูุจูุช ุตููุฉ LONG ูู Futures
- ๐ ูุณุชุฎุฏู ุงูุฑุงูุนุฉ ุงููุงููุฉ ุงููุญุฏุฏุฉ ูู ุงูุฅุนุฏุงุฏุงุช
- ๐พ ูุญูุธ ุงูุตููุฉ ูุน `signal_id = "TV_LONG_20240115_001"`
- ๐ ูุฑุณู ุฅุดุนุงุฑ ุจุชูุงุตูู ุงูุตููุฉ ูุงูุฑุงูุนุฉ

**ุฅุดุนุงุฑ ุชูููุฌุฑุงู:**
```
๐ ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_LONG_20240115_001
๐ ุงูููุน: LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: FUTURES
๐ ุฑูู ุงูุฃูุฑ: FUT_987654321

โ ุงูุญุงูุฉ: Order placed: long BTCUSDT
```

---

### 4๏ธโฃ **CLOSE_LONG** - ุฅุบูุงู ุตููุฉ LONG

**ุงููุตู:** ุฅุบูุงู ุตููุฉ LONG ุงูููุชูุญุฉ ููุฑูุฒ ุงููุญุฏุฏ

**ูุซุงู ุงูุฅุดุงุฑุฉ:**
```json
{
  "signal": "close_long",
  "symbol": "BTCUSDT"
}
```

**ูุงุฐุง ูุญุฏุซ:**
- ๐ ูุจุญุซ ุงูุจูุช ุนู ุตููุฉ LONG ููุชูุญุฉ ุจู `signal_id = "TV_LONG_20240115_001"`
- โ ูุบูู ุงูุตููุฉ ุงููุญุฏุฏุฉ ููุท
- ๐พ ูุญุฏุซ ุญุงูุฉ ุงูุตููุฉ
- ๐ ูุฑุณู ุฅุดุนุงุฑ ุจุงูุฅุบูุงู ูุน ุงูุฃุฑุจุงุญ/ุงูุฎุณุงุฆุฑ

**ุฅุฐุง ูู ุชูุฌุฏ ุตููุฉ ููุชูุญุฉ:**
```
โ ูุดู ุชูููุฐ ุงูุฅุดุงุฑุฉ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_CLOSE_20240115_001
๐ ุงูููุน: CLOSE_LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
โ๏ธ ุงูุณุจุจ: No open position found for signal: TV_LONG_20240115_001
```

**ุฅุดุนุงุฑ ูุฌุงุญ ุงูุฅุบูุงู:**
```
โ ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_CLOSE_20240115_001
๐ ุงูููุน: CLOSE_LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: FUTURES
๐ ุฑูู ุงูุฃูุฑ: FUT_987654321
๐ ุงูุฃูุฑ ุงููุบูู: FUT_987654321

โ ุงูุญุงูุฉ: Position closed: BTCUSDT
```

---

### 5๏ธโฃ **SHORT** - ุตููุฉ ุจูุน ูู ุงูุนููุฏ ุงููุณุชูุจููุฉ (Futures)

**ุงููุตู:** ูุชุญ ุตููุฉ ุจูุน (SHORT) ูู ุณูู ุงูุนููุฏ ุงููุณุชูุจููุฉ

**ูุซุงู ุงูุฅุดุงุฑุฉ:**
```json
{
  "signal": "short",
  "symbol": "ETHUSDT"
}
```

**ูุซุงู ูุน TP/SL (ุงุฎุชูุงุฑู):**
```json
{
  "signal": "short",
  "symbol": "ETHUSDT",
  "take_profit": 2400,
  "stop_loss": 2550
}
```

**ูุงุฐุง ูุญุฏุซ:**
- โ ููุชุญ ุงูุจูุช ุตููุฉ SHORT ูู Futures
- ๐ ูุณุชุฎุฏู ุงูุฑุงูุนุฉ ุงููุงููุฉ ุงููุญุฏุฏุฉ
- ๐พ ูุญูุธ ุงูุตููุฉ ูุน `signal_id = "TV_SHORT_20240115_001"`
- ๐ ูุฑุณู ุฅุดุนุงุฑ ุจุชูุงุตูู ุงูุตููุฉ

**ุฅุดุนุงุฑ ุชูููุฌุฑุงู:**
```
๐ ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_SHORT_20240115_001
๐ ุงูููุน: SHORT
๐ฑ ุงูุฑูุฒ: ETHUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: FUTURES
๐ ุฑูู ุงูุฃูุฑ: FUT_111222333

โ ุงูุญุงูุฉ: Order placed: short ETHUSDT
```

---

### 6๏ธโฃ **CLOSE_SHORT** - ุฅุบูุงู ุตููุฉ SHORT

**ุงููุตู:** ุฅุบูุงู ุตููุฉ SHORT ุงูููุชูุญุฉ ููุฑูุฒ ุงููุญุฏุฏ

**ูุซุงู ุงูุฅุดุงุฑุฉ:**
```json
{
  "signal": "close_short",
  "symbol": "ETHUSDT"
}
```

**ูุงุฐุง ูุญุฏุซ:**
- ๐ ูุจุญุซ ุงูุจูุช ุนู ุตููุฉ SHORT ููุชูุญุฉ ุจู `signal_id = "TV_SHORT_20240115_001"`
- โ ูุบูู ุงูุตููุฉ ุงููุญุฏุฏุฉ ููุท
- ๐พ ูุญุฏุซ ุญุงูุฉ ุงูุตููุฉ
- ๐ ูุฑุณู ุฅุดุนุงุฑ ุจุงูุฅุบูุงู

**ุฅุดุนุงุฑ ุชูููุฌุฑุงู:**
```
โ ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_CLOSE_20240115_002
๐ ุงูููุน: CLOSE_SHORT
๐ฑ ุงูุฑูุฒ: ETHUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: FUTURES
๐ ุฑูู ุงูุฃูุฑ: FUT_111222333
๐ ุงูุฃูุฑ ุงููุบูู: FUT_111222333

โ ุงูุญุงูุฉ: Position closed: ETHUSDT
```

---

## ๐ ุณููุงุฑูููุงุช ุนูููุฉ ูุงููุฉ

### ุณููุงุฑูู 1: ุชุฏุงูู Spot ูุงูู

```json
// ุงูุฎุทูุฉ 1: ูุชุญ ุตููุฉ ุดุฑุงุก Spot
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "price": 45000,
  "id": "SPOT_BTC_001"
}

// โ ููุชุญ ุงูุจูุช ุตููุฉ ุดุฑุงุก ููุญูุธูุง ุจู signal_id = "SPOT_BTC_001"
// ๐ Order ID: ORD_SPOT_123

// ุงูุฎุทูุฉ 2: ุฅุบูุงู ุงูุตููุฉ
{
  "signal": "sell",
  "symbol": "BTCUSDT",
  "price": 46500,
  "id": "SPOT_BTC_002"
}

// โ ูุบูู ุงูุจูุช ุตููุฉ BTCUSDT ุงูููุชูุญุฉ
// ๐ฐ ุงูุฑุจุญ: +1500 USDT (3.33%)
```

---

### ุณููุงุฑูู 2: ุชุฏุงูู Futures LONG ูุงูู

```json
// ุงูุฎุทูุฉ 1: ูุชุญ ุตููุฉ LONG
{
  "signal": "long",
  "symbol": "ETHUSDT",
  "take_profit": 2600,
  "stop_loss": 2450
}

// โ ููุชุญ ุงูุจูุช ุตููุฉ LONG ุจุณุนุฑ ุงูุณูู ูุน ุฑุงูุนุฉ x10
// ๐ Order ID: FUT_LONG_456
// ๐ฐ ุชู ุงูุชูููุฐ ุจุณุนุฑ: 2500 USDT

// ุงูุฎุทูุฉ 2: ุฅุบูุงู ุตููุฉ LONG
{
  "signal": "close_long",
  "symbol": "ETHUSDT"
}

// โ ูุบูู ุงูุจูุช ุตููุฉ ETHUSDT LONG ุงูููุชูุญุฉ ุจุณุนุฑ ุงูุณูู
// ๐ฐ ุชู ุงูุชูููุฐ ุจุณุนุฑ: 2580 USDT
// ๐ฐ ุงูุฑุจุญ: +80 USDT ร 10 = +800 USDT (3.2% ร 10 = 32%)
```

---

### ุณููุงุฑูู 3: ุชุฏุงูู Futures SHORT ูุงูู

```json
// ุงูุฎุทูุฉ 1: ูุชุญ ุตููุฉ SHORT
{
  "signal": "short",
  "symbol": "BTCUSDT",
  "price": 46000,
  "id": "FUT_BTC_SHORT_001",
  "take_profit": 45000,
  "stop_loss": 46500
}

// โ ููุชุญ ุงูุจูุช ุตููุฉ SHORT ูุน ุฑุงูุนุฉ x10
// ๐ Order ID: FUT_SHORT_789

// ุงูุฎุทูุฉ 2: ุฅุบูุงู ุตููุฉ SHORT
{
  "signal": "close_short",
  "symbol": "BTCUSDT",
  "price": 45200,
  "id": "FUT_BTC_CLOSE_001",
  "original_id": "FUT_BTC_SHORT_001"
}

// โ ูุบูู ุงูุจูุช ุงูุตููุฉ ุงููุญุฏุฏุฉ
// ๐ฐ ุงูุฑุจุญ: +800 USDT ร 10 = +8000 USDT (1.74% ร 10 = 17.4%)
```

---

### ุณููุงุฑูู 4: ุตููุงุช ูุชุนุฏุฏุฉ ูู ููุณ ุงูููุช

```json
// ูููู ูุชุญ ุนุฏุฉ ุตููุงุช ุจูุนุฑูุงุช ูุฎุชููุฉ
{
  "signal": "long",
  "symbol": "BTCUSDT",
  "price": 45000,
  "id": "MULTI_BTC_001"
}

{
  "signal": "long",
  "symbol": "ETHUSDT",
  "price": 2500,
  "id": "MULTI_ETH_001"
}

{
  "signal": "short",
  "symbol": "BNBUSDT",
  "price": 300,
  "id": "MULTI_BNB_001"
}

// โ ุฌููุน ุงูุตููุงุช ููุชูุญุฉ ููุชุชุจุนุฉ ุจูุนุฑูุงุช ูุฑูุฏุฉ

// ุฅุบูุงู ุตููุฉ ูุงุญุฏุฉ ููุท
{
  "signal": "close_long",
  "symbol": "ETHUSDT",
  "price": 2580,
  "id": "MULTI_ETH_CLOSE",
  "original_id": "MULTI_ETH_001"
}

// โ ูุบูู ุตููุฉ ETH ููุทุ ูุชุจูู ุตููุงุช BTC ู BNB ููุชูุญุฉ
```

---

## โ๏ธ ุญุงูุงุช ุฎุงุตุฉ ูุณููู ุงููุธุงู

### โ ุฅุดุงุฑุฉ ููุฑุฑุฉ

```json
// ุฅุดุงุฑุฉ 1
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "price": 45000,
  "id": "DUP_001"
}
// โ ุชู ุงูุชูููุฐ

// ุฅุดุงุฑุฉ 2 - ููุณ ุงูู ID
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "price": 45100,
  "id": "DUP_001"
}
// โ ุชู ุงูุชุฌุงูู - ุฅุดุงุฑุฉ ููุฑุฑุฉ
```

**ุฅุดุนุงุฑ ุงูุชุฌุงูู:**
```
โ๏ธ ุชู ุชุฌุงูู ุงูุฅุดุงุฑุฉ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: DUP_001
ุงูุณุจุจ: ุฅุดุงุฑุฉ ููุฑุฑุฉ (ุชู ุงุณุชูุงููุง ูุณุจูุงู)
```

---

### โ ุฅุบูุงู ุจุฏูู ุตููุฉ ููุชูุญุฉ

```json
{
  "signal": "close_long",
  "symbol": "BTCUSDT",
  "price": 46000,
  "id": "CLOSE_NO_OPEN",
  "original_id": "NONEXISTENT_ID"
}
// โ ูุดู - ูุง ุชูุฌุฏ ุตููุฉ ุจูุฐุง ุงููุนุฑู
```

**ุฅุดุนุงุฑ ุงููุดู:**
```
โ ูุดู ุชูููุฐ ุงูุฅุดุงุฑุฉ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: CLOSE_NO_OPEN
๐ ุงูููุน: CLOSE_LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
โ๏ธ ุงูุณุจุจ: No open position found for signal: NONEXISTENT_ID
```

---

### โ๏ธ ุฅุดุงุฑุฉ ุจุฏูู ID

```json
// ุฅุฐุง ูู ูุชู ุฅุฑุณุงู ID
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "price": 45000
}

// โ ูููู ุงููุธุงู ุจุชูููุฏ ID ุชููุงุฆู
// ูุซุงู: "20240115123045_buy_BTCUSDT_a1b2c3d4"
```

---

## ๐ง ุฅุนุฏุงุฏ TradingView

### ูุซุงู ููุฏ Pine Script ูุฅุฑุณุงู ุงูุฅุดุงุฑุงุช

```pine
//@version=5
strategy("Signal System Example", overlay=true)

// ุงุณุชุฑุงุชูุฌูุฉ ุจุณูุทุฉ
sma20 = ta.sma(close, 20)
sma50 = ta.sma(close, 50)

// ุดุฑูุท ุงูุฏุฎูู ูุงูุฎุฑูุฌ
longCondition = ta.crossover(sma20, sma50)
shortCondition = ta.crossunder(sma20, sma50)

// ูุชุบูุฑ ูุชุชุจุน ID ุงูุฅุดุงุฑุฉ
var string currentSignalId = ""

// ุฅุดุงุฑุฉ LONG
if (longCondition)
    currentSignalId := str.tostring(timestamp)
    alert_message = '{"signal": "long", "symbol": "{{ticker}}", "price": ' + str.tostring(close) + ', "id": "' + currentSignalId + '"}'
    strategy.entry("Long", strategy.long, alert_message=alert_message)

// ุฅุดุงุฑุฉ CLOSE_LONG
if (shortCondition and strategy.position_size > 0)
    alert_message = '{"signal": "close_long", "symbol": "{{ticker}}", "price": ' + str.tostring(close) + ', "id": "CLOSE_' + currentSignalId + '", "original_id": "' + currentSignalId + '"}'
    strategy.close("Long", alert_message=alert_message)

plot(sma20, "SMA 20", color=color.blue)
plot(sma50, "SMA 50", color=color.red)
```

---

## ๐ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู ุงูุฅุดุงุฑุงุช (signals)

```sql
CREATE TABLE signals (
    id INTEGER PRIMARY KEY,
    signal_id TEXT NOT NULL,           -- ูุนุฑู ุงูุฅุดุงุฑุฉ ุงููุฑูุฏ
    user_id INTEGER NOT NULL,          -- ูุนุฑู ุงููุณุชุฎุฏู
    signal_type TEXT NOT NULL,         -- buy, sell, long, short, etc.
    symbol TEXT NOT NULL,              -- ุงูุฑูุฒ (BTCUSDT)
    price REAL,                        -- ุงูุณุนุฑ
    market_type TEXT DEFAULT 'spot',   -- spot ุฃู futures
    status TEXT DEFAULT 'received',    -- received, executed, closed, failed
    received_at TIMESTAMP,             -- ููุช ุงูุงุณุชูุงู
    processed_at TIMESTAMP,            -- ููุช ุงููุนุงูุฌุฉ
    order_id TEXT,                     -- ูุนุฑู ุงูุฃูุฑ ุงููููุฐ
    UNIQUE(signal_id, user_id)         -- ููุน ุงูุชูุฑุงุฑ
)
```

### ุฌุฏูู ุงูุตููุงุช (orders)

```sql
CREATE TABLE orders (
    order_id TEXT PRIMARY KEY,
    user_id INTEGER NOT NULL,
    symbol TEXT NOT NULL,
    side TEXT NOT NULL,
    entry_price REAL NOT NULL,
    quantity REAL NOT NULL,
    status TEXT DEFAULT 'OPEN',
    signal_id TEXT,                    -- ุฑุจุท ูุน ุงูุฅุดุงุฑุฉ
    signal_type TEXT,                  -- ููุน ุงูุฅุดุงุฑุฉ
    market_type TEXT DEFAULT 'spot',   -- ููุน ุงูุณูู
    open_time TIMESTAMP,
    close_time TIMESTAMP
)
```

---

## ๐ API Endpoints

### ุงุณุชูุจุงู ุงูุฅุดุงุฑุงุช

```
POST /personal/{user_id}/webhook
```

**ูุซุงู Request:**
```bash
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "signal": "long",
    "symbol": "BTCUSDT",
    "price": 45000,
    "id": "TV_001",
    "take_profit": 46000,
    "stop_loss": 44000
  }'
```

**ูุซุงู Response (ูุฌุงุญ):**
```json
{
  "status": "success",
  "message": "Signal processed for user 123456789",
  "user_id": 123456789
}
```

**ูุซุงู Response (ุฅุดุงุฑุฉ ููุฑุฑุฉ):**
```json
{
  "status": "error",
  "message": "Duplicate signal ignored: TV_001"
}
```

---

## ๐ฑ ุฃูุซูุฉ ุงูุฅุดุนุงุฑุงุช ุงููุงููุฉ

### ุฅุดุนุงุฑ ูุชุญ ุตููุฉ ูุงุฌุญ

```
๐ ุชู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_LONG_20240115_001
๐ ุงูููุน: LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: FUTURES
๐ ุฑูู ุงูุฃูุฑ: 1234567890
๐ข ุงููููุฉ: 0.05 BTC
๐ต ุงูุณุนุฑ: 45000 USDT
โ๏ธ ุงูุฑุงูุนุฉ: 10x
๐ฐ ุญุฌู ุงูุตููุฉ: 2250 USDT

โ ุงูุญุงูุฉ: Order placed: long BTCUSDT
```

### ุฅุดุนุงุฑ ุฅุบูุงู ุตููุฉ ูุงุฌุญ

```
โ ุชู ุฅุบูุงู ุงูุตููุฉ ุจูุฌุงุญ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_CLOSE_20240115_001
๐ ุงูููุน: CLOSE_LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
๐ฆ ุงูููุตุฉ: BYBIT
๐ฐ ุงูุณูู: FUTURES
๐ ุฑูู ุงูุฃูุฑ ุงูุฃุตูู: 1234567890
๐ ุฑูู ุฃูุฑ ุงูุฅุบูุงู: 1234567891

๐ต ุณุนุฑ ุงูุฏุฎูู: 45000 USDT
๐ต ุณุนุฑ ุงูุฎุฑูุฌ: 46500 USDT
๐ ุงูุฑุจุญ: +1500 USDT (+3.33%)
โ๏ธ ูุน ุงูุฑุงูุนุฉ x10: +15000 USDT (+33.3%)

โ ุงูุญุงูุฉ: Position closed successfully
```

### ุฅุดุนุงุฑ ูุดู

```
โ ูุดู ุชูููุฐ ุงูุฅุดุงุฑุฉ

๐ ูุนุฑู ุงูุฅุดุงุฑุฉ: TV_ERROR_001
๐ ุงูููุน: CLOSE_LONG
๐ฑ ุงูุฑูุฒ: BTCUSDT
โ๏ธ ุงูุณุจุจ: No open position found for signal: TV_NONEXIST

โน๏ธ ุชุฃูุฏ ูู:
- ูุฌูุฏ ุตููุฉ ููุชูุญุฉ ุจููุณ ุงููุนุฑู
- ุตุญุฉ original_id ุงููุฑุณู
- ุฃู ุงูุตููุฉ ูู ูุชู ุฅุบูุงููุง ูุณุจูุงู
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ 1: ุตููุฉ Spot ูุงููุฉ

```bash
# 1. ูุชุญ ุตููุฉ
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{"signal":"buy","symbol":"BTCUSDT","price":45000,"id":"TEST_SPOT_001"}'

# ุงูุชุธุฑ ุงูุฅุดุนุงุฑ...

# 2. ุฅุบูุงู ุตููุฉ
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{"signal":"sell","symbol":"BTCUSDT","price":46000,"id":"TEST_SPOT_002"}'
```

### ุงุฎุชุจุงุฑ 2: ุตููุฉ Futures ูุงููุฉ

```bash
# 1. ูุชุญ LONG
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{"signal":"long","symbol":"ETHUSDT","price":2500,"id":"TEST_LONG_001"}'

# 2. ุฅุบูุงู LONG
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{"signal":"close_long","symbol":"ETHUSDT","price":2600,"id":"TEST_CLOSE_001","original_id":"TEST_LONG_001"}'
```

### ุงุฎุชุจุงุฑ 3: ุฅุดุงุฑุฉ ููุฑุฑุฉ

```bash
# 1. ุฅุดุงุฑุฉ ุฃููู
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{"signal":"buy","symbol":"BTCUSDT","price":45000,"id":"DUP_TEST_001"}'

# 2. ุฅุดุงุฑุฉ ููุฑุฑุฉ (ุณูุชู ุชุฌุงูููุง)
curl -X POST https://your-bot.com/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{"signal":"buy","symbol":"BTCUSDT","price":45100,"id":"DUP_TEST_001"}'

# ุณุชุชููู ุฅุดุนุงุฑ ุจุงูุชุฌุงูู
```

---

## ๐ ุงูุฃูุงู ูุงูููุซูููุฉ

### โ ููุฒุงุช ุงูุฃูุงู

1. **ููุน ุงูุชูุฑุงุฑ**: ูู `signal_id` ูุชู ูุนุงูุฌุชู ูุฑุฉ ูุงุญุฏุฉ ููุท
2. **ุฑุจุท ุงูุตููุงุช**: ูู ุตููุฉ ูุฑุจูุทุฉ ุจุฅุดุงุฑุฉ ูุญุฏุฏุฉ
3. **ุชุชุจุน ูุงูู**: ุณุฌู ูุงูู ูุฌููุน ุงูุฅุดุงุฑุงุช ูุงูุตููุงุช
4. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฅุดุนุงุฑุงุช ููุฑูุฉ ุจุฃู ูุดุงูู
5. **ุชูููุฏ ID ุชููุงุฆู**: ูู ุญุงู ุนุฏู ุฅุฑุณุงู ูุนุฑู

### โก ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

- โ ุฅุดุงุฑุฉ ุบูุฑ ุตุงูุญุฉ โ ุชุฌุงูู + ุฅุดุนุงุฑ
- โ ุฅุดุงุฑุฉ ููุฑุฑุฉ โ ุชุฌุงูู + ุชุณุฌูู
- โ ุตููุฉ ุบูุฑ ููุฌูุฏุฉ โ ุชุฌุงูู + ุฅุดุนุงุฑ
- โ ูุดู ุงูุชูููุฐ โ ุฅุนุงุฏุฉ ูุญุงููุฉ + ุฅุดุนุงุฑ

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

#### 1. "No open position found"
**ุงูุญู:** ุชุฃูุฏ ูู:
- ูุฌูุฏ ุตููุฉ ููุชูุญุฉ ุจููุณ `original_id`
- ุฃู ุงูุฑูุฒ (symbol) ุตุญูุญ
- ุฃู ุงูุตููุฉ ูู ูุชู ุฅุบูุงููุง ูุณุจูุงู

#### 2. "Duplicate signal ignored"
**ุงูุญู:** ุงุณุชุฎุฏู ูุนุฑู ูุฑูุฏ ููู ุฅุดุงุฑุฉ ุฌุฏูุฏุฉ

#### 3. "Invalid signal type"
**ุงูุญู:** ุงุณุชุฎุฏู ุฃุญุฏ ุงูุฃููุงุน ุงููุฏุนููุฉ:
- buy, sell, long, short, close_long, close_short

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ

ููููู ุงูุงุณุชุนูุงู ุนู ุฅุญุตุงุฆูุงุช ุงูุฅุดุงุฑุงุช ูู ุฎูุงู:

```python
from database import db_manager

# ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู
stats = db_manager.get_signal_stats(user_id=123456789)
print(stats)
# {
#   'total': 150,
#   'by_type': {
#     'buy': 30,
#     'sell': 28,
#     'long': 45,
#     'close_long': 42,
#     'short': 3,
#     'close_short': 2
#   },
#   'by_status': {
#     'executed': 145,
#     'failed': 3,
#     'ignored': 2
#   }
# }
```

---

## ๐ ุฎูุงุตุฉ

### โ ูุง ุชู ุชูููุฐู:

1. โ ูุธุงู ุฅุดุงุฑุงุช ูุชูุฏู ูุฏุนู 6 ุฃููุงุน ูู ุงูุฅุดุงุฑุงุช
2. โ ุชุชุจุน ูุงูู ุจูุนุฑูุงุช ูุฑูุฏุฉ (Signal IDs)
3. โ ููุน ุงูุฅุดุงุฑุงุช ุงูููุฑุฑุฉ ุชููุงุฆูุงู
4. โ ุฑุจุท ุงูุตููุงุช ุจุงูุฅุดุงุฑุงุช
5. โ ุฅุดุนุงุฑุงุช ุชูููุฌุฑุงู ููุตูุฉ ููู ุนูููุฉ
6. โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
7. โ ุฏุนู Spot ู Futures
8. โ ูุงุนุฏุฉ ุจูุงูุงุช ูุชูุฏูุฉ ููุชุชุจุน

### ๐ ุงูุจุฏุก ุงูุณุฑูุน:

1. ุฃุฑุณู ุฅุดุงุฑุฉ `buy` ููุชุญ ุตููุฉ Spot
2. ุฃุฑุณู ุฅุดุงุฑุฉ `sell` ูุฅุบูุงููุง
3. ุฃุฑุณู ุฅุดุงุฑุฉ `long` ููุชุญ ุตููุฉ Futures
4. ุฃุฑุณู ุฅุดุงุฑุฉ `close_long` ูุน `original_id` ูุฅุบูุงููุง

**ุฌููุน ุงูุฅุดุงุฑุงุช ุชุนูู ุจููุณ ุงูููุทู ุงูุจุณูุท ูุงููุงุถุญ! ๐**

---

**ุชู ุฅูุดุงุก ูุฐุง ุงููุธุงู ุจูุงุณุทุฉ:** Bybit Trading Bot v2.0  
**ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ:** ููุงูุฑ 2024  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ

