# دليل الاستخدام الشامل - بوت التداول على Bybit

## 🎯 نظرة عامة

تم إصلاح وتحديث البوت بالكامل ليعمل بشكل مثالي مع:
- ✅ **Bybit API** مع المفاتيح الجديدة المختبرة
- ✅ **التداول الحقيقي** على Futures
- ✅ **ربط API Keys** من إعدادات البوت
- ✅ **إدارة المخاطر** الذكية
- ✅ **واجهة تلجرام** محسنة

---

## 🔧 الإعدادات المحدثة

### المفاتيح الجديدة المختبرة:
```
API Key: RKk6fTapgDqys6vt5S
API Secret: Rm1TEZnF8hJhZgoj2btSJCr7lx64qAP55dhp
```

### الإعدادات الافتراضية:
- **نوع الحساب**: Real (حقيقي)
- **نوع السوق**: Futures (آجل)
- **المنصة**: Bybit
- **مبلغ التداول**: 50 USDT
- **الرافعة**: 2x
- **الكمية الدنيا**: 0.001 BTC

---

## 🚀 كيفية التشغيل

### 1. تحديث قاعدة البيانات (اختياري)
```bash
python update_database.py
```

### 2. اختبار النظام
```bash
python test_complete_system.py
```

### 3. تشغيل البوت
```bash
python bybit_trading_bot.py
```

---

## 📱 استخدام البوت

### الأزرار الرئيسية:
- **🏠 الرئيسية**: العودة للقائمة الرئيسية
- **⚙️ الإعدادات**: تعديل إعدادات التداول
- **🔗 ربط API**: ربط مفاتيح Bybit API
- **📊 حالة الحساب**: عرض الرصيد والصفقات
- **📈 الصفقات المفتوحة**: عرض الصفقات النشطة
- **📋 سجل الصفقات**: تاريخ الصفقات

### ربط API Keys:
1. اضغط على **🔗 ربط API**
2. اختر **Bybit**
3. أدخل **API Key**
4. أدخل **API Secret**
5. تأكد من الصلاحيات:
   - ✅ Read
   - ✅ Trade
   - ✅ Position Management

### تعديل الإعدادات:
1. اضغط على **⚙️ الإعدادات**
2. اختر **نوع الحساب**: Real/Demo
3. اختر **نوع السوق**: Futures/Spot
4. اضبط **مبلغ التداول**
5. اضبط **الرافعة المالية**

---

## 🔍 استقبال الإشارات

### من TradingView:
1. أضف Webhook URL في TradingView
2. استخدم الرابط: `https://your-domain.com/webhook`
3. أرسل الإشارات بالتنسيق:
```json
{
    "signal": "buy",
    "symbol": "BTCUSDT",
    "id": "unique_id"
}
```

### الإشارات المدعومة:
- **buy**: شراء
- **sell**: بيع
- **close**: إغلاق الصفقة

### الرموز المدعومة:
- BTCUSDT, ETHUSDT, BNBUSDT
- ADAUSDT, SOLUSDT, XRPUSDT
- DOTUSDT, DOGEUSDT, AVAXUSDT

---

## ⚠️ إدارة المخاطر

### الحدود الافتراضية:
- **الحد الأقصى للصفقات اليومية**: 50 صفقة
- **الحد الأقصى لحجم الصفقة**: 1000 USDT
- **وقف الخسارة**: 2%
- **هدف الربح**: 1.5% - 6%

### إشعارات المخاطر:
- إيقاف البوت عند تجاوز الحدود
- تنبيهات عند الخسائر الكبيرة
- ملخص يومي وأسبوعي

---

## 🛠️ استكشاف الأخطاء

### مشاكل شائعة:

#### 1. خطأ في API:
```
❌ خطأ 401: مشكلة في المصادقة
```
**الحل**: تحقق من صحة API Keys والصلاحيات

#### 2. خطأ في الكمية:
```
❌ الكمية أقل من الحد الأدنى
```
**الحل**: استخدم كمية أكبر من 0.001 BTC

#### 3. خطأ في الرصيد:
```
❌ الرصيد غير كافي
```
**الحل**: تأكد من وجود رصيد كافي في الحساب

### ملفات السجل:
- `trading_bot.log`: سجل شامل للعمليات
- `bybit_trading_bot.log`: سجل بوت التلجرام

---

## 📊 الملفات المهمة

### ملفات الإعدادات:
- `config_updated.py`: الإعدادات المحدثة
- `config.py`: الإعدادات الأصلية
- `env.example`: مثال متغيرات البيئة

### ملفات النظام:
- `bybit_trading_bot.py`: البوت الرئيسي
- `real_account_manager.py`: مدير الحسابات الحقيقية
- `signal_executor.py`: منفذ الإشارات
- `database.py`: قاعدة البيانات

### ملفات الاختبار:
- `test_complete_system.py`: اختبار شامل
- `test_direct_order_final.py`: اختبار الصفقات
- `update_database.py`: تحديث قاعدة البيانات

---

## 🔄 التحديثات المطبقة

### إصلاحات التوقيع:
- ✅ إصلاح مسافات JSON في التوقيع
- ✅ إصلاح معالجة القاموس الفارغ
- ✅ تحديث الكمية الدنيا

### تحسينات الأداء:
- ✅ تحسين معالجة الأخطاء
- ✅ إضافة تسجيل مفصل
- ✅ تحسين استجابة API

### ميزات جديدة:
- ✅ ربط API من الإعدادات
- ✅ إدارة مخاطر ذكية
- ✅ واجهة مستخدم محسنة

---

## 📞 الدعم

### في حالة المشاكل:
1. تحقق من ملفات السجل
2. اختبر النظام: `python test_complete_system.py`
3. تأكد من صحة API Keys
4. تحقق من الرصيد والصلاحيات

### معلومات مفيدة:
- **الإصدار**: 2.0.0
- **تاريخ البناء**: 2025-01-25
- **المنصة المدعومة**: Bybit Futures
- **اللغة**: العربية

---

## 🎉 النتيجة النهائية

**البوت الآن يعمل بشكل مثالي!**

✅ **تم إصلاح جميع المشاكل**
✅ **تم اختبار النظام بالكامل**
✅ **تم تحديث الإعدادات**
✅ **تم تحسين الأداء**

**يمكنك الآن تشغيل البوت والبدء في التداول!** 🚀
