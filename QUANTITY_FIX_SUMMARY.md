# ุฅุตูุงุญ ูุดููุฉ ุงููููุฉ - ููุฎุต ุงูุชุญุณููุงุช

## ุงููุดููุฉ ุงูุฃุตููุฉ
```
โ ูุดู ูู ุชูููุฐ ุตููุฉ ุงููููุชุดุฑ: The number of contracts exceeds minimum limit allowed
```

ูุงูุช ุงููุดููุฉ ุฃู ุงููููุฉ ุชุตุจุญ 0.0 ุจุนุฏ ุงูุชูุฑูุจุ ููุง ูุณุจุจ ุฑูุถ ุงูููุตุฉ ููุทูุจ.

## ุงูุญู ุงููุทุจู

### 1. ุงุณุชุฎุฏุงู ููุทู ุงููุณุฎุฉ ุงููุฏููุฉ ุงูุฐู ูุงู ูุนูู

ุชู ูุญุต ุงููุณุฎุฉ ุงููุฏููุฉ ูู ุงููุดุฑูุน ูุงุณุชุฎุฑุงุฌ ุงูููุทู ุงูุฐู ูุงู ูุนูู ุจูุฌุงุญ:

```python
# ุญุณุงุจ ุงููููุฉ
if market_type == 'futures':
    qty = (trade_amount * leverage) / price
else:
    qty = trade_amount / price

# ุถูุงู ุงูุญุฏ ุงูุฃุฏูู
min_quantity = 0.001
if qty < min_quantity:
    # ูุญุต ุงูุฑุตูุฏ ุงููุชุงุญ
    # ุฅุฐุง ูุงู ุงูุฑุตูุฏ ูุงููุ ุงุณุชุฎุฏู ุงูุญุฏ ุงูุฃุฏูู
    qty = min_quantity

# ุชูุฑูุจ ุงููููุฉ
qty = round(qty, 6)
```

### 2. ุชุญุณููุงุช ูู `signal_executor.py`

- **ุฅุฒุงูุฉ ุงูุชุนุฏูู ุงูุฐูู ุงููุนูุฏ**: ุชู ุงุณุชุจุฏุงูู ุจุงูููุทู ุงูุจุณูุท ุงูุฐู ูุงู ูุนูู
- **ูุญุต ุงูุฑุตูุฏ**: ุงูุชุฃูุฏ ูู ุฃู ุงูุฑุตูุฏ ูุงูู ูุจู ุงุณุชุฎุฏุงู ุงูุญุฏ ุงูุฃุฏูู
- **ุฑุณุงุฆู ุชุณุฌูู ูุงุถุญุฉ**: ูุซู ุงููุณุฎุฉ ุงููุฏููุฉ ูุณูููุฉ ุงูุชุชุจุน

### 3. ุชุญุณููุงุช ูู `bybit_exchange.py`

- **ุฅุถุงูุฉ ุฏุงูุฉ `set_leverage`**: ูุชุนููู ุงูุฑุงูุนุฉ ุงููุงููุฉ ูุจู ุชูููุฐ ุงูุทูุจ
- **ุชุญุณูู `place_order`**: ุฅุถุงูุฉ ูุนุงูุฌุฉ ุงูุฑุงูุนุฉ ุงููุงููุฉ ูุงููุนุงููุงุช ุงูุฅุถุงููุฉ
- **ุฑุณุงุฆู ุชุณุฌูู ููุตูุฉ**: ูุชุชุจุน ุนูููุฉ ุชูููุฐ ุงูุทูุจุงุช

### 4. ุฃุฏุงุฉ ุงูุชุนุฏูู ุงูุฐููุฉ ุงููุญุณูุฉ

ุชู ุชุญุณูู `QuantityAdjuster` ูุชููู ุฃูุซุฑ ุฏูุฉ:

```python
# ุงูุชุฃูุฏ ูู ุนุฏู ุงููุตูู ููุตูุฑ
if qty <= 0:
    qty = rules['min_qty']

# ุชูุฑูุจ ุฐูู ูุถูู ุนุฏู ููุฏุงู ุงููููุฉ
if qty < step_size:
    qty = step_size
```

## ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุจู ุงูุฅุตูุงุญ:
```
INFO:api.bybit_api:โ ุงููููุฉ ุจุนุฏ ุงูุชูุฑูุจ: 0.0
ERROR:api.bybit_api:โ ูุดู ุทูุจ Bybit API: The number of contracts exceeds minimum limit allowed
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```
INFO:signals.signal_executor:๐ง ุชุญููู ุฎูู Bybit: $10 โ 0.002 BTC (ุงูุณุนุฑ: $50000, ุงูุฑุงูุนุฉ: 10)
INFO:api.exchanges.bybit_exchange:Bybit place_order called: linear, BTCUSDT, Buy, Market, qty=0.002
INFO:api.exchanges.bybit_exchange:Bybit order placed successfully
```

## ุงููููุงุช ุงููุญุฏุซุฉ

1. **`signals/signal_executor.py`**:
   - ุชุทุจูู ููุทู ุญุณุงุจ ุงููููุฉ ูู ุงููุณุฎุฉ ุงููุฏููุฉ
   - ุฅุฒุงูุฉ ุงูุชุนููุฏุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ
   - ุฅุถุงูุฉ ูุญุต ุงูุฑุตูุฏ ููุญุฏ ุงูุฃุฏูู

2. **`api/exchanges/bybit_exchange.py`**:
   - ุฅุถุงูุฉ ุฏุงูุฉ `set_leverage`
   - ุชุญุณูู `place_order` ูุน ูุนุงูุฌุฉ ุงูุฑุงูุนุฉ ุงููุงููุฉ
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

3. **`api/quantity_adjuster.py`**:
   - ุชุญุณูู ููุทู ุงูุชูุฑูุจ ูุชุฌูุจ ุงููุตูู ููุตูุฑ
   - ุฅุถุงูุฉ ูุญูุตุงุช ุฅุถุงููุฉ ููุชุฃูุฏ ูู ุตุญุฉ ุงููููุฉ

4. **`api/exchange_base.py`**:
   - ุฅุถุงูุฉ ุฎุงุตูุฉ `exchange_name` ููุชูุงูู

## ููููุฉ ุงูุงุฎุชุจุงุฑ

```bash
python test_quantity_fix_final.py
```

## ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ูุดููุฉ ุงููููุฉ ุนุจุฑ:
- ุงูุนูุฏุฉ ููููุทู ุงูุจุณูุท ุงูุฐู ูุงู ูุนูู ูู ุงููุณุฎุฉ ุงููุฏููุฉ
- ุฅุฒุงูุฉ ุงูุชุนููุฏุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ
- ุถูุงู ุนุฏู ูุตูู ุงููููุฉ ููุตูุฑ
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุฑุณุงุฆู

ุงููุดุฑูุน ุงูุขู ูุฌุจ ุฃู ูุนูู ุจุฏูู ูุดุงูู ูู ุชูููุฐ ุงูุตููุงุช.
