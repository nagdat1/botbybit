# ุดุฑุญ ูุธุงู ุฑูุงุจุท ุงูุฅุดุงุฑุฉ ุงูุดุฎุตูุฉ 

## โ ุงููุดููุฉ ุงูุชู ุชู ุญููุง

ูุงู ุงููุธุงู ุงูุณุงุจู ูุณุชุฎุฏู ุฑุงุจุท webhook ูุงุญุฏ ูุฌููุน ุงููุณุชุฎุฏูููุ ููุง ูุนูู:
- โ ุนุฏู ุงูุชูููุฒ ุจูู ุงููุณุชุฎุฏููู
- โ ุตุนูุจุฉ ูู ุฅุฏุงุฑุฉ ุงูุฅุดุงุฑุงุช ุงูุดุฎุตูุฉ
- โ ุนุฏู ูุฌูุฏ ุนุฒู ุจูู ุงูุญุณุงุจุงุช

## โ ุงูุญู ุงููุทุจู

ุชู ุฅูุดุงุก ูุธุงู ูุงูู ุญูุซ:
- โ ูู ูุณุชุฎุฏู ูู ุฑุงุจุท webhook ูุฑูุฏ
- โ ุฌููุน ุงูุฑูุงุจุท ุนูู ููุณ ุงูุณูุฑูุฑ (Railway/Render)
- โ ุนุฒู ูุงูู ุจูู ุงููุณุชุฎุฏููู
- โ ูุนุงูุฌุฉ ูุณุชููุฉ ููู ุฅุดุงุฑุฉ

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### 1. ุงููููุงุช ุงููุญุฏุซุฉ

#### `config.py`
```python
# ุฅุถุงูุฉ BASE_URL
if RAILWAY_URL:
    BASE_URL = RAILWAY_URL  # ูุซุงู: https://botbybit.railway.app
    WEBHOOK_URL = f"{RAILWAY_URL}/webhook"
elif RENDER_URL:
    BASE_URL = RENDER_URL
    WEBHOOK_URL = f"{RENDER_URL}/webhook"
else:
    BASE_URL = f"http://localhost:{PORT}"
    WEBHOOK_URL = f"{BASE_URL}/webhook"
```

#### `bybit_trading_bot.py`
```python
# ุงุณุชูุฑุงุฏ BASE_URL
from config import BASE_URL

# ุฅูุดุงุก ุฑุงุจุท ุดุฎุตู ููู ูุณุชุฎุฏู
personal_webhook_url = f"{BASE_URL}/personal/{user_id}/webhook"
```

#### `app.py`
```python
# Endpoint ุนุงู (ููุฌููุน)
@app.route('/webhook', methods=['POST'])
def webhook():
    # ูุนุงูุฌุฉ ุฅุดุงุฑุฉ ุนุงูุฉ
    await trading_bot.process_signal(data)

# Endpoint ุดุฎุตู (ููุณุชุฎุฏู ูุญุฏุฏ)
@app.route('/personal/<int:user_id>/webhook', methods=['POST'])
def personal_webhook(user_id):
    # ุฅุถุงูุฉ user_id ููุจูุงูุงุช
    data['user_id'] = user_id
    data['source'] = 'personal_webhook'
    
    # ูุนุงูุฌุฉ ุฅุดุงุฑุฉ ุดุฎุตูุฉ
    await trading_bot.process_personal_signal(data)
```

### 2. ูุณุงุฑ ุงูุฅุดุงุฑุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TradingView / ูุตุฏุฑ ุงูุฅุดุงุฑุฉ                           โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โ POST Request
                 โ {"symbol": "BTCUSDT", "action": "BUY"}
                 โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Railway/Render Server                                  โ
โ  https://botbybit.railway.app                          โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โโโบ /webhook (ุนุงู ููุฌููุน)
                 โ   โโโบ process_signal()
                 โ
                 โโโบ /personal/USER_ID/webhook (ุฎุงุต)
                     โโโบ process_personal_signal(user_id)
                            โ
                            โผ
                     โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ 1. ุงูุชุญูู ูู user_id     โ
                     โ 2. ุชุญููู ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏูโ
                     โ 3. ุงูุชุญูู ูู ุงููุดุงุท      โ
                     โ 4. ุชูููุฐ ุงูุตููุฉ          โ
                     โ 5. ุฅุฑุณุงู ุฅุดุนุงุฑ           โ
                     โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุงููุณุชุฎุฏู ุฃุญูุฏ (ID: 123456789)

**ุฑุงุจุท ุงูุฅุดุงุฑุฉ ุงูุฎุงุต ุจู:**
```
https://botbybit.railway.app/personal/123456789/webhook
```

**ุฅุฑุณุงู ุฅุดุงุฑุฉ:**
```bash
curl -X POST https://botbybit.railway.app/personal/123456789/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "BTCUSDT",
    "action": "BUY",
    "price": 50000
  }'
```

**ุงููุชูุฌุฉ:**
- โ ุงูุฅุดุงุฑุฉ ุชูุฑุณู ููุท ูููุณุชุฎุฏู ุฃุญูุฏ (123456789)
- โ ุชูููุฐ ุญุณุจ ุฅุนุฏุงุฏุงุช ุฃุญูุฏ ุงูุดุฎุตูุฉ
- โ ุงูุฅุดุนุงุฑ ููุฑุณู ููุท ูุฃุญูุฏ

### ูุซุงู 2: ุงููุณุชุฎุฏู ุณุงุฑุฉ (ID: 987654321)

**ุฑุงุจุท ุงูุฅุดุงุฑุฉ ุงูุฎุงุต ุจูุง:**
```
https://botbybit.railway.app/personal/987654321/webhook
```

**ุฅุฑุณุงู ุฅุดุงุฑุฉ:**
```bash
curl -X POST https://botbybit.railway.app/personal/987654321/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "ETHUSDT",
    "action": "SELL",
    "price": 3000
  }'
```

**ุงููุชูุฌุฉ:**
- โ ุงูุฅุดุงุฑุฉ ุชูุฑุณู ููุท ูุณุงุฑุฉ (987654321)
- โ ุชูููุฐ ุญุณุจ ุฅุนุฏุงุฏุงุช ุณุงุฑุฉ ุงูุดุฎุตูุฉ
- โ ุงูุฅุดุนุงุฑ ููุฑุณู ููุท ูุณุงุฑุฉ

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### ุงูุนุฒู ุงููุงูู
```python
# ูู ูุณุชุฎุฏู ูุนุฒูู ุชูุงูุงู
User 123 โ /personal/123/webhook โ process_personal_signal(123)
User 456 โ /personal/456/webhook โ process_personal_signal(456)
User 789 โ /personal/789/webhook โ process_personal_signal(789)
```

### ุงูุชุญูู ูู ุงููููุฉ
```python
async def process_personal_signal(self, signal_data: dict):
    user_id = signal_data.get('user_id')
    
    # 1. ุงูุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู
    user_data = user_manager.get_user(user_id)
    if not user_data:
        return  # ุฑูุถ ุงูุฅุดุงุฑุฉ
    
    # 2. ุงูุชุญูู ูู ุญุงูุฉ ุงููุดุงุท
    if not user_manager.is_user_active(user_id):
        return  # ุฑูุถ ุงูุฅุดุงุฑุฉ
    
    # 3. ุชุญููู ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู
    self.user_settings = {...}
    
    # 4. ุชูููุฐ ุงูุตููุฉ
    await self.process_signal(signal_data)
```

## ๐ฏ ููุงุฑูุฉ ุจูู ุงูุฃูุธูุฉ

### ุงููุธุงู ุงููุฏูู โ
```
TradingView โ https://domain.com/webhook โ ุฌููุน ุงููุณุชุฎุฏููู
```
- โ ุฑุงุจุท ูุงุญุฏ ููุฌููุน
- โ ูุง ููุฌุฏ ุชูููุฒ
- โ ุตุนูุจุฉ ูู ุงูุฅุฏุงุฑุฉ

### ุงููุธุงู ุงูุฌุฏูุฏ โ
```
TradingView โ https://domain.com/personal/123/webhook โ ุงููุณุชุฎุฏู 123 ููุท
TradingView โ https://domain.com/personal/456/webhook โ ุงููุณุชุฎุฏู 456 ููุท
TradingView โ https://domain.com/personal/789/webhook โ ุงููุณุชุฎุฏู 789 ููุท
```
- โ ุฑุงุจุท ูุฑูุฏ ููู ูุณุชุฎุฏู
- โ ุชูููุฒ ูุงูู
- โ ุณูููุฉ ูู ุงูุฅุฏุงุฑุฉ

## ๐ ุฌุฏูู ุงููุณุชุฎุฏููู ูุงูุฑูุงุจุท

| ุงููุณุชุฎุฏู | Telegram ID | ุฑุงุจุท ุงูุฅุดุงุฑุฉ ุงูุดุฎุตู |
|----------|-------------|---------------------|
| ุฃุญูุฏ | 123456789 | `https://domain.com/personal/123456789/webhook` |
| ุณุงุฑุฉ | 987654321 | `https://domain.com/personal/987654321/webhook` |
| ุนูู | 555666777 | `https://domain.com/personal/555666777/webhook` |
| ูุงุทูุฉ | 111222333 | `https://domain.com/personal/111222333/webhook` |

## ๐ง ููููุฉ ุงูุญุตูู ุนูู ุงูุฑุงุจุท

### ูู ุงูุจูุช
```
1. /start
2. โ๏ธ ุงูุฅุนุฏุงุฏุงุช
3. ๐ก ุฑุงุจุท ุงูุฅุดุงุฑุฉ ุงูุดุฎุตู
4. ูุณุฎ ุงูุฑุงุจุท
```

### ุงูุฑุฏ ูู ุงูุจูุช
```
๐ก ุฑุงุจุท ุงูุฅุดุงุฑุฉ ุงูุดุฎุตู ุงูุฎุงุต ุจู:

๐ https://botbybit.railway.app/personal/123456789/webhook

๐ ููููุฉ ุงูุงุณุชุฎุฏุงู:
1. ุงูุณุฎ ุงูุฑุงุจุท ุฃุนูุงู
2. ุถุนู ูู TradingView ุฃู ุฃู ููุตุฉ ุฅุดุงุฑุงุช
3. ุฃุฑุณู ุงูุฅุดุงุฑุงุช ุจุงูุตูุบุฉ:
   {"symbol": "BTCUSDT", "action": "BUY", "price": 50000}
```

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ ุฑุงุจุท ุดุฎุตู
```bash
# ุงุณุชุจุฏู USER_ID ุจุฑููู ุงูุญูููู
curl -X POST https://botbybit.railway.app/personal/USER_ID/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "BTCUSDT",
    "action": "BUY"
  }'
```

### ุงูุฑุฏ ุงููุชููุน
```json
{
  "status": "success",
  "message": "Personal signal received for user USER_ID",
  "user_id": USER_ID
}
```

## โ ุงูุฎูุงุตุฉ

### ูุง ุชู ุฅูุฌุงุฒู
1. โ ุฅุถุงูุฉ `BASE_URL` ูู `config.py`
2. โ ุชุญุฏูุซ `bybit_trading_bot.py` ูุงุณุชุฎุฏุงู `BASE_URL`
3. โ ุฅุถุงูุฉ endpoint `/personal/<user_id>/webhook` ูู `app.py`
4. โ ูุนุงูุฌุฉ ูุณุชููุฉ ููู ูุณุชุฎุฏู
5. โ ุนุฒู ูุงูู ุจูู ุงูุญุณุงุจุงุช
6. โ ุฃูุงู ูุญุณูู

### ุงููุชูุฌุฉ ุงูููุงุฆูุฉ
- ๐ฏ ูู ูุณุชุฎุฏู ูู ุฑุงุจุท ูุฑูุฏ
- ๐ฏ ุฌููุน ุงูุฑูุงุจุท ุนูู ููุณ ุงูุณูุฑูุฑ
- ๐ฏ ูุนุงูุฌุฉ ูุณุชููุฉ ููู ุฅุดุงุฑุฉ
- ๐ฏ ุนุฒู ุชุงู ุจูู ุงููุณุชุฎุฏููู
- ๐ฏ ุณูููุฉ ูู ุงูุฅุฏุงุฑุฉ ูุงูุตูุงูุฉ

---

**ุงูุญุงูุฉ**: โ **ุฌุงูุฒ ููุฅูุชุงุฌ**  
**ุงูุชุงุฑูุฎ**: 2024  
**ุงููุทูุฑ**: Nagdat

