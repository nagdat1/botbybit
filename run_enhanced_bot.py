#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ุชุดุบูู ุงูุจูุช ุงููุญุณู ูุน ุฅุธูุงุฑ ุงููุฑู
"""

import os
import sys
import time
from datetime import datetime

# ุฅุถุงูุฉ ุงููุณุงุฑ ุงูุญุงูู ุฅูู ูุณุงุฑุงุช Python
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

def show_system_comparison():
    """ุนุฑุถ ููุงุฑูุฉ ุจูู ุงููุธุงู ุงูุนุงุฏู ูุงููุญุณู"""
    print("\n" + "="*80)
    print(" ููุงุฑูุฉ ุจูู ุงููุธุงู ุงูุนุงุฏู ูุงููุธุงู ุงููุญุณู")
    print("="*80)
    
    print("\n ุงููุธุงู ุงูุนุงุฏู:")
    print("   โข ุฅุฏุงุฑุฉ ูุฎุงุทุฑ ุฃุณุงุณูุฉ")
    print("   โข ูุนุงูุฌุฉ ุฅุดุงุฑุงุช ุจุณูุทุฉ")
    print("   โข ุชูููุฐ ุตููุงุช ูุจุงุดุฑ")
    print("   โข ูุง ููุฌุฏ ุชุญุณูู ุชููุงุฆู")
    print("   โข ูุง ููุฌุฏ ุฅุฏุงุฑุฉ ูุญูุธุฉ ูุชูุฏูุฉ")
    
    print("\n ุงููุธุงู ุงููุญุณู:")
    print("   โข ุฅุฏุงุฑุฉ ูุฎุงุทุฑ ูุชูุฏูุฉ ูุน ููุงุฐุฌ ุฅุญุตุงุฆูุฉ")
    print("   โข ูุนุงูุฌุฉ ุฅุดุงุฑุงุช ุฐููุฉ ูุน ุชุญููู ุงูุฌูุฏุฉ")
    print("   โข ุชูููุฐ ุตููุงุช ูุญุณู (TWAP, VWAP, Iceberg)")
    print("   โข ุชุญุณูู ุชููุงุฆู ูููุนุงููุงุช")
    print("   โข ุฅุฏุงุฑุฉ ูุญูุธุฉ ูุชูุฏูุฉ ูุน ุฅุนุงุฏุฉ ุชูุงุฒู ุชููุงุฆูุฉ")
    print("   โข ูุฑุงูุจุฉ ุงูุฃุฏุงุก ุงููุณุชูุฑุฉ")
    print("   โข ุชุญููู VaR ู CVaR")
    print("   โข ุชุญุณูู Sharpe Ratio")
    
    print("\n ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ:")
    print("   โข ุฏูุฉ ุฃุนูู ูู ุงูุชูุจุค")
    print("   โข ุชูููู ุงููุฎุงุทุฑ")
    print("   โข ุชุญุณูู ุงูุฃุฏุงุก")
    print("   โข ุงุณุชูุฑุงุฑ ุฃูุจุฑ")
    print("   โข ูุฑุงูุจุฉ ูุณุชูุฑุฉ")

def test_enhanced_system():
    """ุงุฎุชุจุงุฑ ุงููุธุงู ุงููุญุณู"""
    print("\n" + "="*60)
    print("๐งช ุงุฎุชุจุงุฑ ุงููุธุงู ุงููุญุณู")
    print("="*60)
    
    try:
        # ุงุฎุชุจุงุฑ ุงุณุชูุฑุงุฏ ุงููุธุงู ุงููุญุณู
        print("1. ุงุฎุชุจุงุฑ ุงุณุชูุฑุงุฏ ุงููุธุงู ุงููุญุณู...")
        from integrated_trading_system import IntegratedTradingSystem
        print("    ุชู ุงุณุชูุฑุงุฏ ุงููุธุงู ุงููุญุณู ุจูุฌุงุญ")
        
        # ุงุฎุชุจุงุฑ ุชููุฆุฉ ุงููุธุงู
        print("2. ุงุฎุชุจุงุฑ ุชููุฆุฉ ุงููุธุงู...")
        system = IntegratedTradingSystem()
        print("    ุชู ุชููุฆุฉ ุงููุธุงู ุจูุฌุงุญ")
        
        # ุงุฎุชุจุงุฑ ุงูููููุงุช
        print("3. ุงุฎุชุจุงุฑ ุงูููููุงุช...")
        components = [
            ("ูุฏูุฑ ุงููุฎุงุทุฑ ุงููุชูุฏู", system.risk_manager),
            ("ูุนุงูุฌ ุงูุฅุดุงุฑุงุช ุงููุชูุฏู", system.signal_processor),
            ("ูููุฐ ุงูุตููุงุช ุงููุชูุฏู", system.trade_executor),
            ("ูุฏูุฑ ุงููุญูุธุฉ ุงููุชูุฏู", system.portfolio_manager),
            ("ูุญุณู ุงูุจูุช", system.bot_optimizer)
        ]
        
        for name, component in components:
            if component:
                print(f"    {name}: ูุชุงุญ")
            else:
                print(f"    {name}: ุบูุฑ ูุชุงุญ")
        
        # ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุฅุดุงุฑุฉ ุชุฌุฑูุจูุฉ
        print("4. ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุฅุดุงุฑุฉ ุชุฌุฑูุจูุฉ...")
        test_signal = {
            "action": "buy",
            "symbol": "BTCUSDT",
            "price": 50000,
            "quantity": 0.001
        }
        
        result = system.process_signal(12345, test_signal)
        print(f"    ุชู ูุนุงูุฌุฉ ุงูุฅุดุงุฑุฉ ุงูุชุฌุฑูุจูุฉ: {result}")
        
        print("\n ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช!")
        return True
        
    except Exception as e:
        print(f"    ุฎุทุฃ ูู ุงูุงุฎุชุจุงุฑ: {e}")
        return False

def show_usage_instructions():
    """ุนุฑุถ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู"""
    print("\n" + "="*60)
    print("๐ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู")
    print("="*60)
    
    print("\n ูุชุดุบูู ุงููุธุงู ุงููุญุณู:")
    print("   1. ุชุดุบูู app.py (ุณูุณุชุฎุฏู ุงููุธุงู ุงููุญุณู ุชููุงุฆูุงู)")
    print("   2. ุฃู ุชุดุบูู integrated_trading_system.py ูุจุงุดุฑุฉ")
    
    print("\n๐ ูููุตูู ุฅูู ุงููุธุงู:")
    print("   โข ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: http://localhost:5000/")
    print("   โข ูุญุต ุงูุตุญุฉ: http://localhost:5000/health")
    print("   โข Webhook: http://localhost:5000/webhook")
    
    print("\n ูุฑุคูุฉ ุงููุฑู:")
    print("   1. ุชุดุบูู ุงููุธุงู ุงููุญุณู")
    print("   2. ูุฑุงูุจุฉ ุงูุฑุณุงุฆู ูู ุงููููุณูู")
    print("   3. ูุญุต ุงูุงุณุชุฌุงุจุงุช ูู API")
    print("   4. ููุงุฑูุฉ ุงูุฃุฏุงุก")

def main():
    """ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ"""
    print(" ุชุดุบูู ุงูุจูุช ุงููุญุณู")
    print(f"โฐ ุงูููุช: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    
    # ุนุฑุถ ููุงุฑูุฉ ุงูุฃูุธูุฉ
    show_system_comparison()
    
    # ุงุฎุชุจุงุฑ ุงููุธุงู ุงููุญุณู
    test_success = test_enhanced_system()
    
    if test_success:
        print("\n ุงููุธุงู ุงููุญุณู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!")
    else:
        print("\n ุงููุธุงู ุงููุญุณู ุบูุฑ ูุชุงุญุ ุณูุชู ุงุณุชุฎุฏุงู ุงููุธุงู ุงูุนุงุฏู")
    
    # ุนุฑุถ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู
    show_usage_instructions()
    
    print("\n" + "="*60)
    print(" ุงูุฎุทูุงุช ุงูุชุงููุฉ:")
    print("   1. ุชุดุบูู app.py")
    print("   2. ูุฑุงูุจุฉ ุงูุฑุณุงุฆู ูู ุงููููุณูู")
    print("   3. ูุญุต ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ")
    print("   4. ุงุฎุชุจุงุฑ Webhook")
    print("="*60)

if __name__ == "__main__":
    main()
