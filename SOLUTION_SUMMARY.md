# ููุฎุต ุญู ูุดููุฉ ูุดู ุชูููุฐ ุงูุฅุดุงุฑุฉ ุนูู Bybit - ุงูุญู ุงูููุงุฆู โ

## ุงููุดููุฉ ุงูุฃุตููุฉ
```
ูุดู ุชูููุฐ ุงูุฅุดุงุฑุฉ
Failed to place order on Bybit
symbol: BTCUSDT
signal_type: buy
action: buy
amount: 50.0
leverage: 1
exchange: bybit
account_type: real
```

## ุงูุชุดุฎูุต ุงูููุงุฆู
ุชู ุงูุชุดุงู ุงููุดุงูู ุงูุชุงููุฉ ูุญููุง:

### 1. ูุดููุฉ ุญุณุงุจ ุงููููุฉ ูููููุชุดุฑ โ
**ุงููุดููุฉ**: ุงูููุฏ ูุงู ูุญุณุจ ุงููููุฉ ุจุทุฑููุฉ ุฎุงุทุฆุฉ ูููููุชุดุฑ:
```python
# ุฎุทุฃ - ูุงู ูุถุฑุจ ูู ุงูุฑุงูุนุฉ
qty = (trade_amount * leverage) / price
```

**ุงูุญู**: ุชุตุญูุญ ุญุณุงุจ ุงููููุฉ:
```python
# ุตุญูุญ - ุงูุฑุงูุนุฉ ุชุคุซุฑ ุนูู ุงููุงูุด ูููุณ ุงููููุฉ
qty = trade_amount / price
```

### 2. ูุดููุฉ ูุญุต ุงูุฑุตูุฏ โ
**ุงููุดููุฉ**: ุงุณุชุฎุฏุงู `CONTRACT` ุจุฏูุงู ูู `UNIFIED` ูู Bybit V5:
```python
# ุฎุทุฃ
account_type = 'CONTRACT'
```

**ุงูุญู**: ุงุณุชุฎุฏุงู `UNIFIED` ูุฌููุน ุฃููุงุน ุงูุญุณุงุจุงุช:
```python
# ุตุญูุญ
account_type = 'UNIFIED'
```

### 3. ูุดููุฉ ุงุณุชุฎุฑุงุฌ ุงูุณุนุฑ โ
**ุงููุดููุฉ**: ุงูุณุนุฑ ูุงู ูููุฑุฃ ูู 1.0 ุจุฏูุงู ูู ุงูุณุนุฑ ุงูุญูููู ูู API:
```python
# ุฎุทุฃ - ูููุฉ ุงูุชุฑุงุถูุฉ ุฎุงุทุฆุฉ
price = float(signal_data.get('price', 1))
```

**ุงูุญู**: ุฅุตูุงุญ ุงุณุชุฎุฑุงุฌ ุงูุณุนุฑ ูุญูุธู ูู ุงูุจูุงูุงุช:
```python
# ุตุญูุญ - ุญูุธ ุงูุณุนุฑ ูู API ูู ุงูุจูุงูุงุช
if ticker and 'lastPrice' in ticker:
    price = float(ticker['lastPrice'])
    signal_data['price'] = price  # ุญูุธ ุงูุณุนุฑ ูู ุงูุจูุงูุงุช
```

### 4. ุงููุดููุฉ ุงูุญููููุฉ: ุงูุฑุตูุฏ ุบูุฑ ูุงูู โ
**ุงูุชุญููู ุงูููุงุฆู**:
- ุงูุฑุตูุฏ ุงูุญุงูู: 64.75 USDT
- ุงูุญุฏ ุงูุฃุฏูู ูููููุฉ: 0.001 BTC
- ุงูุณุนุฑ ุงูุญุงูู: 111,004.90 USDT
- ุงููุงูุด ุงููุทููุจ ููุญุฏ ุงูุฃุฏูู: 111.00 USDT
- ุงูููุต: 46.25 USDT

## ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ุญุณุงุจ ุงููููุฉ ูู `signal_executor.py`
```python
# ุญุณุงุจ ุงููููุฉ ูุน ุถูุงู ุนุฏู ูุฌูุฏ ููู ุตุบูุฑุฉ ุฌุฏุงู
if market_type == 'futures':
    # ูููููุชุดุฑ: ุงููููุฉ = ูุจูุบ ุงูุชุฏุงูู / ุงูุณุนุฑ (ุจุฏูู ุถุฑุจ ูู ุงูุฑุงูุนุฉ)
    # ุงูุฑุงูุนุฉ ุชุคุซุฑ ุนูู ุงููุงูุด ุงููุทููุจุ ูููุณ ุนูู ุงููููุฉ
    qty = trade_amount / price
else:
    # ููุณุจูุช ุจุฏูู ุฑุงูุนุฉ
    qty = trade_amount / price
```

### 2. ุฅุตูุงุญ ูุญุต ุงูุฑุตูุฏ ูู `real_account_manager.py`
```python
# ุชุญุฏูุฏ ููุน ุงูุญุณุงุจ ุญุณุจ ููุน ุงูุณูู
# ููุงุญุธุฉ: Bybit V5 ูุฏุนู ููุท UNIFIED ููุญุณุงุจุงุช ุงูููุญุฏุฉ
if market_type == 'spot':
    account_type = 'UNIFIED'  # ุงุณุชุฎุฏุงู UNIFIED ููุณุจูุช ุฃูุถุงู
elif market_type == 'futures':
    account_type = 'UNIFIED'  # ุงุณุชุฎุฏุงู UNIFIED ูููููุชุดุฑ ุฃูุถุงู
else:
    account_type = 'UNIFIED'
```

### 3. ุฅุตูุงุญ ุงุณุชุฎุฑุงุฌ ุงูุณุนุฑ ูุญูุธู
```python
# ูู ุฌูุจ ุงูุณุนุฑ ูู Bybit
if ticker and 'lastPrice' in ticker:
    price = float(ticker['lastPrice'])
    signal_data['price'] = price  # ุญูุธ ุงูุณุนุฑ ูู ุงูุจูุงูุงุช
    logger.info(f" ุงูุณุนุฑ ุงูุญุงูู: {price}")

# ูู ุงุณุชุฎุฏุงู ุงูุณุนุฑ
price = float(signal_data.get('price', 0)) if signal_data.get('price') else 0.0
```

### 4. ุฅุถุงูุฉ ูุญุต ุฐูู ููุฑุตูุฏ ูุงูุญุฏ ุงูุฃุฏูู
```python
# ูุญุต ุฅุฐุง ูุงูุช ุงููููุฉ ุงููุญุณูุจุฉ ุฃูู ูู ุงูุญุฏ ุงูุฃุฏูู
if qty < min_quantity:
    # ุญุณุงุจ ุงููุงูุด ุงููุทููุจ ููุญุฏ ุงูุฃุฏูู
    min_margin_required = (min_quantity * price) / leverage
    
    # ูุญุต ุงูุฑุตูุฏ ุงููุชุงุญ
    try:
        balance_info = account.get_wallet_balance('futures' if market_type == 'futures' else 'spot')
        if balance_info and 'coins' in balance_info and 'USDT' in balance_info['coins']:
            available_balance = float(balance_info['coins']['USDT']['equity'])
            
            if available_balance >= min_margin_required:
                # ุงูุฑุตูุฏ ูุงูู ููุญุฏ ุงูุฃุฏูู
                qty = min_quantity
            else:
                # ุงูุฑุตูุฏ ุบูุฑ ูุงูู ุญุชู ููุญุฏ ุงูุฃุฏูู
                return {
                    'success': False,
                    'message': f'Insufficient balance for minimum order. Available: {available_balance} USDT, Required: {min_margin_required:.2f} USDT',
                    'error': 'INSUFFICIENT_BALANCE_MINIMUM',
                    'is_real': True,
                    'available_balance': available_balance,
                    'required_balance': min_margin_required
                }
    except Exception as e:
        logger.warning(f"ุฎุทุฃ ูู ูุญุต ุงูุฑุตูุฏ ููุญุฏ ุงูุฃุฏูู: {e}")
        qty = min_quantity
```

## ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### โ ุงููุดุงูู ุงููุญูููุฉ:
1. **ุญุณุงุจ ุงููููุฉ ุตุญูุญ ุงูุขู**: ุงููููุฉ ุชุญุณุจ ุจุดูู ุตุญูุญ ูููููุชุดุฑ
2. **ูุญุต ุงูุฑุตูุฏ ูุนูู**: ูุชู ูุญุต ุงูุฑุตูุฏ ุจุงุณุชุฎุฏุงู `UNIFIED` ุจุดูู ุตุญูุญ
3. **ุงุณุชุฎุฑุงุฌ ุงูุณุนุฑ ุตุญูุญ**: ุงูุณุนุฑ ูููุฑุฃ ูู API ูููุญูุธ ูู ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ
4. **ุงูุชุดุงู ุงููุดููุฉ ุงูุญููููุฉ**: ุงููุธุงู ููุชุดู ุฃู ุงูุฑุตูุฏ ุบูุฑ ูุงูู ููุญุฏ ุงูุฃุฏูู

### ๐ ุงูุชุญููู ุงูููุงุฆู:
- **ุงูุฑุตูุฏ ุงููุชุงุญ**: 64.75 USDT
- **ุงููุงูุด ุงููุทููุจ ููุญุฏ ุงูุฃุฏูู**: 111.00 USDT
- **ุงูููุต**: 46.25 USDT

### ๐ก ุงูุญููู ุงูููุชุฑุญุฉ ูููุณุชุฎุฏู:
1. **ุฅุถุงูุฉ ุฑุตูุฏ**: ุฅุถุงูุฉ 46.25 USDT ุนูู ุงูุฃูู ููุญุณุงุจ
2. **ุชูููู ูุจูุบ ุงูุชุฏุงูู**: ุงุณุชุฎุฏุงู ูุจูุบ ุฃุตุบุฑ ูุชูุงุณุจ ูุน ุงูุฑุตูุฏ ุงููุชุงุญ
3. **ุงุณุชุฎุฏุงู ุฑุงูุนุฉ ุฃุนูู**: ุฒูุงุฏุฉ ุงูุฑุงูุนุฉ ูุชูููู ุงููุงูุด ุงููุทููุจ (ูุน ุงูุญุฐุฑ ูู ุงููุฎุงุทุฑ)

## ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุฌุฏูุฏุฉ ุงููุงุถุญุฉ
```
Insufficient balance for minimum order. Available: 64.74575264 USDT, Required: 111.00 USDT
```

ูุฐู ุงูุฑุณุงูุฉ ูุงุถุญุฉ ูุชูุถุญ ูููุณุชุฎุฏู ุจุงูุถุจุท ูุง ูุญุชุงุฌู ูุญู ุงููุดููุฉ.

## ุงููููุงุช ุงููุนุฏูุฉ:
1. `signal_executor.py` - ุฅุตูุงุญ ุญุณุงุจ ุงููููุฉุ ุงุณุชุฎุฑุงุฌ ุงูุณุนุฑุ ููุญุต ุงูุฑุตูุฏ
2. `real_account_manager.py` - ุฅุตูุงุญ ููุน ุงูุญุณุงุจ ูู Bybit V5

## ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌุฒุฉ:
1. โ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู Bybit API
2. โ ุงุฎุชุจุงุฑ ุฌูุจ ูุนูููุงุช ุงูุฑูุฒ
3. โ ุงุฎุชุจุงุฑ ุชุนููู ุงูุฑุงูุนุฉ ุงููุงููุฉ
4. โ ุงุฎุชุจุงุฑ ูุญุต ุงูุฑุตูุฏ
5. โ ุงุฎุชุจุงุฑ ุงุณุชุฎุฑุงุฌ ุงูุณุนุฑ
6. โ ุงุฎุชุจุงุฑ ุชูููุฐ ุงูุฅุดุงุฑุฉ ูุน ูุญุต ุงูุฑุตูุฏ

## ุงูุฎูุงุตุฉ
ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ูุซุงูู ูููุชุดู ุงููุดุงูู ุงูุญููููุฉ ุจุฏูุงู ูู ุฅุนุทุงุก ุฃุฎุทุงุก ุบุงูุถุฉ. ุงููุดููุฉ ุงููุญูุฏุฉ ุงููุชุจููุฉ ูู ุฃู ุงููุณุชุฎุฏู ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฑุตูุฏ ูุงูู ููุญุณุงุจ ูุชูููุฐ ุงูุฅุดุงุฑุงุช.

**ุงูุญู ุงูููุงุฆู**: ุฅุถุงูุฉ 46.25 USDT ุนูู ุงูุฃูู ุฅูู ุญุณุงุจ Bybit ููููู ูุฏูู ุฑุตูุฏ ูุงูู ููุญุฏ ุงูุฃุฏูู ุงููุทููุจ (0.001 BTC).
