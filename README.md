# 🤖 بوت التداول الذكي على Bybit

بوت تداول متقدم لمنصة Bybit يدعم التداول الحقيقي والتجريبي مع واجهة ويب تفاعلية وإشعارات تلجرام.

## ✨ الميزات الجديدة

### 🌐 السيرفر المحلي والواجهة التفاعلية
- **لوحة تحكم ويب حديثة** مع رسوم بيانية تفاعلية
- **تحديثات مباشرة** عبر WebSocket
- **رسوم بيانية لتتبع الرصيد** والصفقات المفتوحة
- **إشعارات فورية** للإشارات الجديدة

### 🔗 تكامل ngrok التلقائي
- **إعداد تلقائي لـ ngrok** بدون تدخل يدوي
- **تحديث تلقائي للرابط** في ملف الإعدادات
- **إشعارات تلجرام** عند تغيير الرابط
- **رابط عام** لاستقبال إشارات TradingView

## 🚀 التشغيل السريع

### الطريقة الأولى: التشغيل التلقائي
```bash
python start_bot.py
```

### الطريقة الثانية: التشغيل مع السيرفر
```bash
python run_with_server.py
```

### الطريقة التقليدية: البوت فقط
```bash
python run_bot.py
```

## 📊 الواجهة الويب

بعد تشغيل البوت، ستحصل على:
- **رابط محلي**: `http://localhost:5000`
- **رابط عام (ngrok)**: سيظهر في التلجرام تلقائياً

### المميزات في الواجهة:
- 📈 **رسم بياني للرصيد** مع التحديثات المباشرة
- 🔄 **الصفقات المفتوحة** مع الأرباح/الخسائر الحالية
- 📡 **آخر الإشارات** المستقبلة من TradingView
- 📊 **إحصائيات البوت** (معدل النجاح، عدد الصفقات)
- 🎯 **رسم بياني للإشارات** والصفقات

## ⚙️ الإعدادات

قم بتحديث ملف `config.py`:

```python
# إعدادات تلغرام
TELEGRAM_TOKEN = "YOUR_TELEGRAM_BOT_TOKEN"
ADMIN_USER_ID = YOUR_TELEGRAM_USER_ID

# إعدادات Bybit API
BYBIT_API_KEY = "YOUR_API_KEY"
BYBIT_API_SECRET = "YOUR_API_SECRET"

# إعدادات السيرفر (سيتم تحديثها تلقائياً)
WEBHOOK_URL = "https://your-ngrok-url.ngrok-free.app"
WEBHOOK_PORT = 5000
```

## 📱 أوامر البوت في تلجرام

- **⚙️ الإعدادات**: تخصيص إعدادات التداول
- **📊 حالة الحساب**: عرض الرصيد والإحصائيات
- **🔄 الصفقات المفتوحة**: متابعة الصفقات الحالية
- **▶️ تشغيل البوت**: بدء استقبال الإشارات
- **⏹️ إيقاف البوت**: إيقاف التداول مؤقتاً
- **📊 إحصائيات الإشارات**: عرض إحصائيات الأداء

## 🔔 الإشعارات التلقائية

البوت يرسل إشعارات تلجرام عند:
- 📡 استقبال إشارة جديدة
- 💼 فتح صفقة جديدة
- ✅ إغلاق صفقة
- 🔄 تغيير رابط ngrok
- ⚠️ حدوث أخطاء

## 📈 إعداد TradingView

استخدم الرابط الذي يرسله البوت في تلجرام لإعداد webhook في TradingView:

```json
{
    "symbol": "{{ticker}}",
    "action": "{{strategy.order.action}}",
    "price": {{close}},
    "time": "{{time}}"
}
```

## 🔧 المتطلبات

تم تحديث `requirements.txt` ليشمل:
```
python-telegram-bot==20.7
requests==2.31.0
flask==2.3.3
flask-socketio==5.3.6
plotly==5.17.0
dash==2.14.2
dash-bootstrap-components==1.5.0
pandas==2.1.3
pyngrok==7.0.0
```

## 🛡️ الأمان

- جميع المفاتيح محفوظة في ملف `config.py`
- التحقق من هوية المستخدم لأوامر تلجرام
- حماية endpoints الحساسة
- تشفير البيانات المرسلة

## 📞 الدعم

إذا واجهت مشاكل:
1. تأكد من صحة إعدادات API
2. تحقق من اتصال الإنترنت
3. راجع ملف `trading_bot.log` للأخطاء
4. تأكد من تثبيت جميع المكتبات المطلوبة

---

**ملاحظة**: البوت يدعم التداول التجريبي الداخلي والتداول الحقيقي. ابدأ دائماً بالوضع التجريبي لاختبار الإعدادات. 