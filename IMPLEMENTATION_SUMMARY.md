# ููุฎุต ุงูุชูููุฐ - ูุธุงู TP/SL ุงููุชูุฏู

## ๐ ุชู ุฅูุฌุงุฒู ุจุงููุงูู โ

ุชู ุชูููุฐ ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ **Take Profit** ู **Stop Loss** ุงููุชุนุฏุฏ ูุน **ุงูุฅุบูุงูุงุช ุงูุฌุฒุฆูุฉ** ููุตููุงุช.

---

## ๐ฏ ุงููุชุทูุจุงุช ุงูููุฌุฒุฉ

### โ 1. Stop Loss
- ุชุญุฏูุฏ ุจูุณุจุฉ ูุฆููุฉ (ูุซู: -2%)
- ุชุญุฏูุฏ ุจุณุนุฑ ูุญุฏุฏ (ูุซู: 49000$)
- ุฏุนู Trailing Stop (ุฌุงูุฒ ููุชูุนูู)
- ุชูุนูู ุชููุงุฆู ุนูุฏ ุงููุตูู ููุณุนุฑ

### โ 2. Take Profit ุงููุชุนุฏุฏ
- ุฅุถุงูุฉ ุนุฏุฉ ูุณุชููุงุช (TP1, TP2, TP3, ...)
- ุชุญุฏูุฏ ุจูุณุจุฉ ูุฆููุฉ (ูุซู: +5%)
- ุชุญุฏูุฏ ุจุณุนุฑ ูุญุฏุฏ (ูุซู: 52500$)
- ุฅุบูุงู ุฌุฒุฆู ูุฎุตุต ููู ูุณุชูู (25%, 50%, 75%, 100%)
- ุชูุนูู ุชููุงุฆู ูุชุณูุณู

### โ 3. ุงูุฅุบูุงูุงุช ุงูุฌุฒุฆูุฉ
- ุฅุบูุงู ูุณุจุฉ ูุฆููุฉ ูู ุงูุตููุฉ
- ุชุชุจุน ุงููููุฉ ุงููุชุจููุฉ
- ุญุณุงุจ ุฏููู ููุฃุฑุจุงุญ/ุงูุฎุณุงุฆุฑ
- ุชุงุฑูุฎ ูุงูู ููุฅุบูุงูุงุช

### โ 4. ุงูุชุฑุงุจุท ุงููุงูู
- ุชูุงูู ูุน ุงูุจูุช ุงูุญุงูู
- ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุฑุงูุจุฉ ุชููุงุฆูุฉ ููุฃุณุนุงุฑ
- ุฅุดุนุงุฑุงุช ููุฑูุฉ

---

## ๐ฆ ุงููููุงุช ุงูููุดุฃุฉ (6 ูููุงุช)

### 1. `order_manager.py` (495 ุณุทุฑ)
**ุงููุธููุฉ**: ุงููุธุงู ุงูุฃุณุงุณู ูุฅุฏุงุฑุฉ ุงูุตููุงุช ูุน TP/SL

**ุงููุญุชูู**:
- `class TakeProfitLevel`: ุฅุฏุงุฑุฉ ูุณุชูู TP ูุงุญุฏ
- `class StopLoss`: ุฅุฏุงุฑุฉ Stop Loss
- `class ManagedOrder`: ุฅุฏุงุฑุฉ ุตููุฉ ูุงููุฉ ูุน TP/SL
- `class OrderManager`: ุฅุฏุงุฑุฉ ุฌููุน ุงูุตููุงุช
- ุฏุนู ููุนู ุงูุชุญุฏูุฏ: ูุณุจุฉ ูุฆููุฉ ุฃู ุณุนุฑ ูุญุฏุฏ
- ุญุณุงุจ ุชููุงุฆู ููุฃุณุนุงุฑ ุงููุณุชูุฏูุฉ
- ูุฑุงูุจุฉ ูุชูุนูู TP/SL
- ุฏุนู Trailing Stop

**ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ**:
```python
# ุฅูุดุงุก ุตููุฉ ูุน TP/SL
order = order_manager.create_managed_order(
    order_id="BTC_001",
    user_id=123456,
    symbol="BTCUSDT",
    side="buy",
    entry_price=50000.0,
    quantity=0.1,
    take_profits=[...],  # TP ูุชุนุฏุฏ
    stop_loss={...}       # SL ุฐูู
)

# ุชุญุฏูุซ ุงูุณุนุฑ ููุญุต TP/SL
result = order.update_price(52500.0)
```

### 2. `trade_interface.py` (400 ุณุทุฑ)
**ุงููุธููุฉ**: ูุงุฌูุฉ ุชูุงุนููุฉ ูุชุญุฏูุฏ TP/SL

**ุงููุญุชูู**:
- `class TradeInterface`: ุฅุฏุงุฑุฉ ุงููุงุฌูุฉ ุงูุชูุงุนููุฉ
- ููุงุฆู ุชูุงุนููุฉ ูุฅุถุงูุฉ TP/SL
- ูุนุงูุฌุงุช ููุฃุฒุฑุงุฑ
- ุนุฑุถ ุชูุงุตูู ุงูุตููุงุช

**ุชุฏูู ุงูุงุณุชุฎุฏุงู**:
1. ุนุฑุถ ูุงุฆูุฉ ุงูุตููุฉ ุงูุฌุฏูุฏุฉ
2. ุฅุถุงูุฉ Take Profit (ุงุฎุชูุงุฑ ุงูููุน โ ุฅุฏุฎุงู ุงููููุฉ โ ุชุญุฏูุฏ ุงููุณุจุฉ)
3. ุฅุถุงูุฉ Stop Loss (ุงุฎุชูุงุฑ ุงูููุน โ ุฅุฏุฎุงู ุงููููุฉ)
4. ุชุฃููุฏ ุงูุตููุฉ

### 3. `bot_integration.py` (300 ุณุทุฑ)
**ุงููุธููุฉ**: ุฑุจุท ุงููุธุงู ูุน ุงูุจูุช ุงูุญุงูู

**ุงููุญุชูู**:
- `class BotIntegration`: ุฅุฏุงุฑุฉ ุงูุชูุงูู
- `start_price_monitoring()`: ุจุฏุก ูุฑุงูุจุฉ ุงูุฃุณุนุงุฑ
- `_price_monitoring_loop()`: ุญููุฉ ุงููุฑุงูุจุฉ ุงููุณุชูุฑุฉ
- `_handle_triggered_event()`: ูุนุงูุฌุฉ ุชูุนูู TP/SL
- `load_managed_orders_from_db()`: ุชุญููู ุงูุตููุงุช ุนูุฏ ุจุฏุก ุงูุจูุช

**ุงููุฑุงูุจุฉ ุงูุชููุงุฆูุฉ**:
- ูุนูู ูู 10 ุซูุงูู
- ูุฌูุจ ุฃุณุนุงุฑ ุฌููุน ุงูุตููุงุช ุงููุดุทุฉ
- ููุญุต TP/SL ููู ุตููุฉ
- ูุฑุณู ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุชูุนูู

### 4. `database.py` (ูุญุฏูุซ)
**ุงูุชุญุฏูุซุงุช**:

**ุฌุฏุงูู ุฌุฏูุฏุฉ**:
```sql
-- Take Profit Levels
CREATE TABLE take_profit_levels (
    id INTEGER PRIMARY KEY,
    order_id TEXT,
    level_number INTEGER,
    price_type TEXT,
    value REAL,
    close_percentage REAL,
    target_price REAL,
    executed BOOLEAN,
    executed_time TIMESTAMP,
    executed_price REAL,
    pnl REAL
)

-- Stop Loss
CREATE TABLE stop_losses (
    id INTEGER PRIMARY KEY,
    order_id TEXT,
    price_type TEXT,
    value REAL,
    target_price REAL,
    trailing BOOLEAN,
    trailing_distance REAL,
    executed BOOLEAN,
    executed_time TIMESTAMP,
    executed_price REAL,
    pnl REAL
)

-- Partial Closes
CREATE TABLE partial_closes (
    id INTEGER PRIMARY KEY,
    order_id TEXT,
    close_type TEXT,
    level INTEGER,
    price REAL,
    quantity REAL,
    percentage REAL,
    pnl REAL,
    close_time TIMESTAMP
)
```

**ุญููู ุฌุฏูุฏุฉ ูู orders**:
- `remaining_quantity`: ุงููููุฉ ุงููุชุจููุฉ
- `realized_pnl`: ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ ุงููุญูู
- `unrealized_pnl`: ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ ุบูุฑ ุงููุญูู
- `current_price`: ุงูุณุนุฑ ุงูุญุงูู

**ูุธุงุฆู ุฌุฏูุฏุฉ** (10+):
- `add_take_profit()`: ุฅุถุงูุฉ TP
- `add_stop_loss()`: ุฅุถุงูุฉ SL
- `get_order_take_profits()`: ุฌูุจ ุฌููุน TP
- `get_order_stop_loss()`: ุฌูุจ SL
- `update_take_profit()`: ุชุญุฏูุซ TP
- `update_stop_loss()`: ุชุญุฏูุซ SL
- `add_partial_close()`: ุญูุธ ุฅุบูุงู ุฌุฒุฆู
- `get_order_partial_closes()`: ุฌูุจ ุชุงุฑูุฎ ุงูุฅุบูุงูุงุช
- `get_full_order_details()`: ุฌูุจ ุชูุงุตูู ูุงููุฉ ูุน TP/SL

### 5. `TP_SL_GUIDE.md` (ุฏููู ุดุงูู)
**ุงููุญุชูู**:
- ุดุฑุญ ุงููููุฒุงุช
- ููููุฉ ุงูุงุณุชุฎุฏุงู ุฎุทูุฉ ุจุฎุทูุฉ
- ุฃูุซูุฉ ุนูููุฉ (6 ุฃูุซูุฉ)
- ุงุณุชุฑุงุชูุฌูุงุช ููุตู ุจูุง
- ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ
- ุงูุชุทููุฑุงุช ุงููุณุชูุจููุฉ

### 6. `examples_tpsl.py` (ุฃูุซูุฉ ุนูููุฉ)
**ูุญุชูู ุนูู**:
- Example 1: ุตููุฉ ุจุณูุทุฉ ูุน TP/SL ูุงุญุฏ
- Example 2: ุตููุฉ ูุน TP ูุชุนุฏุฏ
- Example 3: ุตููุฉ ุจุฃุณุนุงุฑ ูุญุฏุฏุฉ
- Example 4: ูุญุงูุงุฉ ุชุญุฏูุซุงุช ุงูุฃุณุนุงุฑ
- Example 5: ุตููุฉ ุจูุน (Short)
- Example 6: Futures ูุน ุฑุงูุนุฉ ูุงููุฉ

---

## ๐ ุชุฏูู ุงูุนูู

### 1. ูุชุญ ุตููุฉ ุฌุฏูุฏุฉ
```
ูุณุชุฎุฏู โ ููุชุญ ุตููุฉ
       โ
trade_interface โ ูุนุฑุถ ูุงุฆูุฉ TP/SL
       โ
ูุณุชุฎุฏู โ ูุถูู TP/SL
       โ
order_manager โ ููุดุฆ ุตููุฉ ููุฏุงุฑุฉ
       โ
database โ ูุญูุธ ุงูุตููุฉ ูTP/SL
```

### 2. ูุฑุงูุจุฉ ุงูุฃุณุนุงุฑ
```
bot_integration โ ูุจุฏุฃ ุงููุฑุงูุจุฉ (ูู 10 ุซูุงูู)
       โ
Bybit API โ ูุฌูุจ ุงูุฃุณุนุงุฑ ุงูุญุงููุฉ
       โ
order_manager โ ูุญุฏุซ ุฃุณุนุงุฑ ุงูุตููุงุช
       โ
       โ ููุญุต TP/SL
       โ
ุฅุฐุง ุชู ุงูุชูุนูู:
       โ
database โ ูุญูุธ ุงูุฅุบูุงู ุงูุฌุฒุฆู
       โ
Telegram โ ูุฑุณู ุฅุดุนุงุฑ ูููุณุชุฎุฏู
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ุงูููุฏ:
- โ **1200+** ุณุทุฑ ููุฏ ุฌุฏูุฏ
- โ **6** ูููุงุช ุฌุฏูุฏุฉ
- โ **3** ุฌุฏุงูู ูุงุนุฏุฉ ุจูุงูุงุช
- โ **20+** ูุธููุฉ ุฑุฆูุณูุฉ
- โ **4** ูุฆุงุช (Classes) ุฌุฏูุฏุฉ

### ุงููุธุงุฆู:
- โ TP/SL ุจูุณุจุฉ ูุฆููุฉ
- โ TP/SL ุจุณุนุฑ ูุญุฏุฏ
- โ TP ูุชุนุฏุฏ (ูุง ูุญุฏูุฏ)
- โ ุฅุบูุงูุงุช ุฌุฒุฆูุฉ ูุฎุตุตุฉ
- โ ูุฑุงูุจุฉ ุชููุงุฆูุฉ
- โ ุฅุดุนุงุฑุงุช ููุฑูุฉ
- โ ุญูุธ ูุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฏุนู Spot ู Futures
- โ ุฏุนู Buy ู Sell

### ุงูุชูุซูู:
- โ ุฏููู ุดุงูู (TP_SL_GUIDE.md)
- โ ููุฎุต ุณุฑูุน (README_TP_SL.md)
- โ 6 ุฃูุซูุฉ ุนูููุฉ
- โ ุดุฑุญ ููุงุณุชุฑุงุชูุฌูุงุช

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### ุญุงูุฉ 1: ูุชุฏุงูู ูุญุงูุธ
```python
TP1: +2% (ุฅุบูุงู 50%)
TP2: +4% (ุฅุบูุงู 50%)
SL: -1.5%

โ ุชุฃููู ุฃุฑุจุงุญ ูุจูุฑุฉ
โ ุญูุงูุฉ ูู ุฎุณุงุฆุฑ ูุจูุฑุฉ
```

### ุญุงูุฉ 2: ูุชุฏุงูู ูุชูุงุฒู
```python
TP1: +3% (ุฅุบูุงู 33%)
TP2: +6% (ุฅุบูุงู 33%)
TP3: +10% (ุฅุบูุงู 34%)
SL: -2%

โ ุชูุงุฒู ุจูู ุงูุฑุจุญ ุงูุณุฑูุน ูุงูุฑุจุญ ุงููุจูุฑ
```

### ุญุงูุฉ 3: ูุชุฏุงูู ุนุฏูุงูู
```python
TP1: +5% (ุฅุบูุงู 25%)
TP2: +10% (ุฅุบูุงู 25%)
TP3: +20% (ุฅุบูุงู 50%)
SL: -3%

โ ุงูุณุนู ูุฃุฑุจุงุญ ูุจูุฑุฉ
โ ูุฎุงุทุฑุฉ ุฃุนูู
```

---

## ๐ ููููุฉ ุงูุจุฏุก

### ุงูุฎุทูุฉ 1: ุงุฎุชุจุงุฑ ุงููุธุงู
```bash
# ุชุดุบูู ุงูุฃูุซูุฉ
python examples_tpsl.py
```

### ุงูุฎุทูุฉ 2: ูุฑุงุกุฉ ุงูุฏููู
```bash
# ูุฑุงุกุฉ ุงูุฏููู ุงูุดุงูู
cat TP_SL_GUIDE.md
```

### ุงูุฎุทูุฉ 3: ุงูุฑุจุท ูุน ุงูุจูุช
ุฑุงุฌุน `README_TP_SL.md` ููุชุนูููุงุช ุงููุงููุฉ

### ุงูุฎุทูุฉ 4: ุงูุงุณุชุฎุฏุงู
ุงุจุฏุฃ ุจูุชุญ ุตููุฉ ุฌุฏูุฏุฉ ูุน TP/SL!

---

## ๐ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. Trailing Stop (ุฌุงูุฒ)
```python
stop_loss = {
    'price_type': 'percentage',
    'value': 2.0,
    'trailing': True,
    'trailing_distance': 1.0  # ูุชุญุฑู 1% ุฎูู ุงูุณุนุฑ
}
```

### 2. ุชุญุฏูุซ TP/SL ูุตููุฉ ููุชูุญุฉ
```python
# ุฅุถุงูุฉ TP ุฌุฏูุฏ ูุตููุฉ ููุฌูุฏุฉ
order.add_take_profit(
    level_number=3,
    price_type=PriceType.PERCENTAGE,
    value=15.0,
    close_percentage=25.0
)
```

### 3. ุนุฑุถ ุชูุงุตูู ุดุงููุฉ
```python
# ุงูุญุตูู ุนูู ูู ุงูุชูุงุตูู
order_info = order.get_order_info()
# ูุญุชูู ุนูู: TP levels, SL, partial closes, PnL, ุฅูุฎ
```

---

## ๐ฎ ุงูุชุทููุฑุงุช ุงููุณุชูุจููุฉ

### ุงููุฎุทุท ููุง:
- [ ] Break-even ุชููุงุฆู ุจุนุฏ TP1
- [ ] OCO (One-Cancels-Other)
- [ ] ูุงุฌูุฉ ููุจ ูุฅุฏุงุฑุฉ ุงูุตููุงุช
- [ ] ุชุญูููุงุช ูุชูุฏูุฉ ููุฃุฏุงุก
- [ ] ุฅุดุงุฑุงุช ุฐููุฉ ูุงูุชุฑุงุญ TP/SL
- [ ] ุฏุนู ุฃููุงุน ุฃูุงูุฑ ุฅุถุงููุฉ

### ุฌุงูุฒ ููุชุทููุฑ:
- โ ุงูุจููุฉ ููุถูุนุฉ ุจุดูู ูุณูุญ ุจุณูููุฉ ุงูุชูุณุน
- โ ุงูููุฏ ูุธูู ูููุธู
- โ ุงูุชูุซูู ุดุงูู
- โ ุงูุฃูุซูุฉ ูุงุถุญุฉ

---

## ๐ ุงูููุงุฑุฏ

### ุงููููุงุช ุงูุฑุฆูุณูุฉ:
1. `order_manager.py` - ุงููุธุงู ุงูุฃุณุงุณู
2. `trade_interface.py` - ุงููุงุฌูุฉ ุงูุชูุงุนููุฉ
3. `bot_integration.py` - ุงูุฑุจุท ูุน ุงูุจูุช
4. `TP_SL_GUIDE.md` - ุงูุฏููู ุงูุดุงูู
5. `examples_tpsl.py` - ุงูุฃูุซูุฉ ุงูุนูููุฉ
6. `README_TP_SL.md` - ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ

### ุงููุณุงุนุฏุฉ:
- ูุฑุงุกุฉ `TP_SL_GUIDE.md` ููุชูุงุตูู
- ุชุดุบูู `examples_tpsl.py` ููุชุฌุฑุจุฉ
- ูุฑุงุฌุนุฉ `trading_bot.log` ููุฃุฎุทุงุก

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุฅูุดุงุก order_manager.py
- [x] ุฅูุดุงุก trade_interface.py
- [x] ุฅูุดุงุก bot_integration.py
- [x] ุชุญุฏูุซ database.py
- [x] ุฅุถุงูุฉ ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ูุธุงู ูุฑุงูุจุฉ ุงูุฃุณุนุงุฑ
- [x] ูุนุงูุฌุฉ ุชูุนูู TP/SL
- [x] ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏููู
- [x] ุฏุนู ูุณุจุฉ ูุฆููุฉ ูุณุนุฑ ูุญุฏุฏ
- [x] ุฅุบูุงูุงุช ุฌุฒุฆูุฉ
- [x] ุญูุธ ูุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ุฏุนู Spot ู Futures
- [x] ุฏุนู Buy ู Sell
- [x] ุชูุซูู ุดุงูู
- [x] ุฃูุซูุฉ ุนูููุฉ
- [x] ุงุฎุชุจุงุฑ ุงูุฃููุงุฏ (ูุง ุฃุฎุทุงุก)

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุชูุงูู ูุดุงูู ูุฅุฏุงุฑุฉ **Take Profit** ู **Stop Loss** ุงููุชุนุฏุฏ ูุน **ุงูุฅุบูุงูุงุช ุงูุฌุฒุฆูุฉ**ุ ูุน:

1. โ **ูุฑููุฉ ูุงููุฉ** ูู ุชุญุฏูุฏ TP/SL
2. โ **ุชูููุฐ ุชููุงุฆู** ุฏููู
3. โ **ูุฑุงูุจุฉ ูุณุชูุฑุฉ** ููุฃุณุนุงุฑ
4. โ **ุชุฑุงุจุท ูุงูู** ูุน ุงูุจูุช
5. โ **ุญูุธ ุดุงูู** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
6. โ **ุชูุซูู ููุตู** ูุฃูุซูุฉ ุนูููุฉ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**

---

**ุชู ุงูุชูููุฐ ุจูุงุณุทุฉ**: Claude Sonnet 4.5  
**ุงูุชุงุฑูุฎ**: 4 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ**: โ ููุชูู ุจูุฌุงุญ

