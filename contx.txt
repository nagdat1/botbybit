### ุณูุงู ุงูุฅุดุงุฑุงุช ูุชุดุบูู ุงูุจูุช

- ูุจู ุชูููุฐ ุฃู ุฅุดุงุฑุฉุ ูุญุฏุฏ ุงููุธุงู ููุน ุงูุญุณุงุจ ุงููุดุท: ุชุฌุฑูุจู ุฃู ุญูููู.
- ุงูุญุณุงุจ ุงูุญูููู ูุฑุณู ุงูุฃูุงูุฑ ููููุตุฉ ุนุจุฑ API. ุงูุญุณุงุจ ุงูุชุฌุฑูุจู ููููุฐ ุฏุงุฎูููุง ููุท ููุชุฌุงุฑุจ ูุชุชุจุน ุงูุตููุงุช.

---

### 1) ุงุฎุชูุงุฑ ููุน ุงูุญุณุงุจ

- account_type: "real" ููุญููููุ "demo" ููุชุฌุฑูุจู
- ูุง ูุชู ุฅุธูุงุฑ ููุน ุงูุญุณุงุจ ูู ุฃู ุชูุจูู ูููุณุชุฎุฏู

```python
account_type = "real"   # ุญูููู
# ุฃู
account_type = "demo"   # ุชุฌุฑูุจู
```

---

### 2) ุฃูุซูุฉ ุงูุฅุดุงุฑุงุช (ุซุงุจุชุฉ ูููุณุชุฎุฏู)

ูุฐู ุงูุจููุฉ ูุง ุชุชุบูุฑ ูู ุชูุจููุงุช ุงููุณุชุฎุฏู.

- ุดุฑุงุก

```json
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "id": "TV_B01"
}
```

- ุจูุน

```json
{
  "signal": "sell",
  "symbol": "BTCUSDT",
  "id": "TV_S01"
}
```

- ุฅุบูุงู ูุงูู

```json
{
  "signal": "close",
  "symbol": "BTCUSDT",
  "id": "TV_C01"
}
```

- ุฅุบูุงู ุฌุฒุฆู (ูุซุงู 50%)

```json
{
  "signal": "partial_close",
  "symbol": "BTCUSDT",
  "percentage": 50,
  "id": "TV_PC01"
}
```

---

### 3) ุงูุฑุจุท ุงูุงุฎุชูุงุฑู ุนุจุฑ ุงูู ID

- ูู ุฅุดุงุฑุฉ ุชุญุชูู ุนูู id ูุฑูุฏ.
- ุงููุชุบูุฑ link_by_id ูุญุฏุฏ ููุทู ุงูุฑุจุท:

```python
link_by_id = True   # ุฅุดุงุฑุงุช ุจููุณ ุงูู ID ุชูุฏุงุฑ ูุตููุฉ ูุงุญุฏุฉ (ุชุนุฒูุฒ/ุชูููู)
link_by_id = False  # ูู ุฅุดุงุฑุฉ ุชูุชุญ ุตููุฉ ูุณุชููุฉ
```

- ุงูููุทู ุงููุฎุชุตุฑ:
    - ุนูุฏ True: ููุณ ID โ ููุณ ุงูุตููุฉ. ูุนุฒุฒ ุฃู ููุบูู ุฌุฒุฆููุง/ููููุง ุชูู ุงูุตููุฉ.
    - ุนูุฏ False: ูู ุฅุดุงุฑุฉ ุชุนุงูู ูุตููุฉ ุฌุฏูุฏุฉ ูุณุชููุฉ.

---

### 4) ููุงุนุฏ ุชูููุฐ ุงูุฅุดุงุฑุงุช

- ุดุฑุงุก buy
    - ููุชุญ ุตููุฉ ุฌุฏูุฏุฉ ุฃู ูุนุฒุฒ ุตููุฉ ููุฌูุฏุฉ ุฅุฐุง link_by_id=True.
    - ุชุฌุงูู ุงูุฅุดุงุฑุฉ ุฅุฐุง ูุงูุช ุจููุณ ID ูููู ุจุนูุณ ุงูุงุชุฌุงู ุงูููุชูุญ.
- ุจูุน sell
    - ุงูุนููุฏ ุงูุขุฌูุฉ Futures: ูุชุญ/ุชุนุฒูุฒ Short.
    - ุงูุณุจูุช Spot: ุจูุน ูู ุงูุฑุตูุฏ ุงููุชุงุญ ููุท. ูุง ููุฌุฏ Short.
- ุฅุบูุงู ูุงูู close
    - ูุบูู ุงูุตููุฉ ุงููุฑุชุจุทุฉ ุจููุณ ID ุนูุฏูุง link_by_id=True.
- ุฅุบูุงู ุฌุฒุฆู partial_close
    - ูุบูู ูุณุจุฉ ูุญุฏุฏุฉ ูู ุงูุตููุฉ ุงููุฑุชุจุทุฉ ุจููุณ ID ุนูุฏูุง link_by_id=True.

---

### 5) ุงููุฑู ุจูู Spot ู Futures

| ุงูุจูุฏ | Spot | Futures |
| --- | --- | --- |
| ุงูุดุฑุงุก | ุดุฑุงุก ุงูุฃุตู ูุนูููุง | ูุชุญ/ุชุนุฒูุฒ Long |
| ุงูุจูุน | ุจูุน ุงูุฑุตูุฏ ุงูููุฌูุฏ ููุท | ูุชุญ/ุชุนุฒูุฒ Short |
| ุงูุฅุบูุงู ุงููุงูู | ุจูุน ูุงูู ุงูุฑุตูุฏ | ุฅุบูุงู ูุงูู ุงูุตููุฉ |
| ุงูุฅุบูุงู ุงูุฌุฒุฆู | ุจูุน ูุณุจุฉ ูุญุฏุฏุฉ ูู ุงูุฑุตูุฏ | ุชูููู ุฌุฒุก ูู ุญุฌู ุงูุตููุฉ |
- ููุงุญุธุฉ: ููุน ุงูุญุณุงุจ ูุณุชุฎุฏู ุฏุงุฎูููุง ููุท ููุง ูุธูุฑ ูู ุงูุชูุจููุงุช.

---

### 6) ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ูุฎูุงุต ุงูุนุฒู

- ููู ูู Spot ู Futures ุญุณุงุจ ูุณุชูู ููุญุงูุฉ ูุงูุตููุงุช.
- ุชุจุฏูู ุงูุญุณุงุจ ูุง ูุคุซุฑ ุนูู ุตููุงุช ุงูุญุณุงุจ ุงูุขุฎุฑ ููุง ูุบูููุง.
- ุงูุฅุดุงุฑุงุช ุงูุฌุฏูุฏุฉ ุชูููุฐ ููุท ุนูู ุงูุญุณุงุจ ุงููุดุท ุญุงูููุง.

---

### 7) ุฎุทูุงุช ุงูุชูููุฐ ุงูุขูู

1. ุญุฏูุฏ ุงูุญุณุงุจ ุงููุดุท: ุชุฌุฑูุจู/ุญูููู ูSpot/Futures.
2. ุงุณุชุฎุฏู ุงูู ID ููุฑุจุท ููุท ุฅุฐุง link_by_id=True.
3. ูู Spotุ ูุง ุชููุฐ ุจูุนูุง ุฏูู ุฑุตูุฏ ูุงูู.
4. ูุง ุชูุธูุฑ ููุน ุงูุญุณุงุจ ูู ุฃู ุชูุจูู.
5. ุงุญุชูุธ ุจุณุฌู ููู ุตููุฉ ูููุน ุงูุชูุฑุงุฑ ูุงูุชุถุงุฑุจ.
6. ุงูุชุฌุฑูุจู = ุชูููุฐ ุฏุงุฎูู. ุงูุญูููู = ุชูููุฐ ุนุจุฑ API.

---

### 8) ููุงุท ุชูุงูู ูุงุนุชุจุงุฑุงุช ุฅุถุงููุฉ

- ุงูููุทุงุช Snapshots ููุญูููู ุงุฎุชูุงุฑูุฉ ุญุณุจ ุงูุฅุนุฏุงุฏุงุช.
- ุงูุชุฎุฒูู ุงูุชุฌุฑูุจู ูุซุงู: trades_demo.jsonุ ุฅุถุงูุฉู ุฅูู ุชุชุจุน ุงูุฃุฑุตุฏุฉ.
- ุฏุนู ุงูุฑุจุท ุนุจุฑ Telegram ูุงูููุจ ููู ูุชุญุฏูุซ ุงูุฑุณุงุฆู.

---

### 9) ูููุฐุฌ System Prompt ุฌุงูุฒ

### ุชุนูููุงุช ุงูุฅูุฌูุช ูุชุดุบูู ุฅุดุงุฑุงุช ุงูุชุฏุงูู

- ูููุฐ ุงูุฅุดุงุฑุงุช ููู ุงูููุนูู Spot/Futures ูุน ุงุญุชุฑุงู link_by_id.
- ุงูุญุณุงุจ ุงูุญูููู ูุฑุณู ุฃูุงูุฑ API. ุงูุชุฌุฑูุจู ุฏุงุฎูู ุจุงููุงูู.
- ูุง ุชุนุฑุถ ููุน ุงูุญุณุงุจ ูููุณุชุฎุฏู. ุงููุน ุจูุน Spot ุฏูู ุฑุตูุฏ.
- ุงุณุชุฎุฏู ููุณ ID ูุฑุจุท ุงูุฅุดุงุฑุงุช ูุตููุฉ ูุงุญุฏุฉ ุนูุฏ ุชูุนูู ุงูุฑุจุท.
- ุณุฌูู ูู ุงูุนูููุงุช ูุชูุงุฏู ุงูุชูุฑุงุฑ ูุงูุชุถุงุฑุจ.

> ุฅุฐุง ุฑุบุจุชุ ูููู ุชุฎุตูุต ูุณุฎุฉ ููุณุนุฉ ูุณููุงุฑูููุงุช ุฅุถุงููุฉ ูุซู ุฅุฏุงุฑุฉ ุงูุฑุงูุนุฉุ TP/SL ุงูุงูุชุฑุงุถูุฉุ ุฃู ุณูุงุณุงุช ุงูุชุจุฑูุฏ ูุงูุชุนุฒูุฒ.
> 

---

### 10) ุขููุฉ ุนูู ุฃุฏูุงุช ุงูููุตูุฉ ุจุงูุชูุตูู

- ุฃูุงูุฑ ุงูุณูู Market
    - ุชูููุฐ ุจุงูุณุนุฑ ุงูุญุงูู. ููุงุณุจุฉ ููุฏุฎูู ุฃู ุงูุฎุฑูุฌ ุงูุณุฑูุน. ูุฏ ูุญุฏุซ ุงูุฒูุงู ุณุนุฑู.
- ุงูุฃูุงูุฑ ุงููุญุฏุฏุฉ Limit
    - ุชุญุฏุฏ ุณุนุฑูุง ููุชูููุฐ. ุชุถูู ุงูุณุนุฑ ูููุณ ุงูุชูููุฐ. ุงุณุชุฎุฏู "Post-Only" ูุชุฌููุจ ุงูุชุญููู ุฅูู Market.
- ุงูุฅููุงู Stop ู Trigger
    - ุดุฑุท ุชุดุบูู ุงูุฃูุฑ ุนูุฏ ุงููุตูู ูุณุนุฑ ูุนููู. ุฃููุงุน ุดุงุฆุนุฉ: Stop Market ู Stop Limit.
- ุฌูู ุงูุฃุฑุจุงุญ TP ูุฅููุงู ุงูุฎุณุงุฑุฉ SL
    - ูููู ุถุจุทููุง ูุดุฑุทูู ูุณุชููููู ุฃู ูุฃูุงูุฑ ูุฑููุฉ (OCO). ูููุถููู ุญูุธ ุงูููู ุงูุงูุชุฑุงุถูุฉ ูู ุงูุฅุนุฏุงุฏุงุช.
- ููุช ุงูุชูููุฐ Time in Force
    - GTC: ูุธู ุงูุฃูุฑ ูุนุงููุง ุญุชู ูููููุฐ ุฃู ูููุบู.
    - IOC: ููููุฐ ุงูุฌุฒุก ุงููุชุงุญ ููุฑูุง ูููุบู ุงูุจุงูู.
    - FOK: ููููุฐ ูุงูู ุงููููุฉ ููุฑูุง ุฃู ูููุบู ุจุงููุงูู.
- ุฎุตุงุฆุต ูุชูุฏูุฉ
    - Reduce-Only: ูุง ูุฒูุฏ ุญุฌู ุงูุตููุฉุ ูุณุชุฎุฏู ููุท ููุชูููุต ุฃู ุงูุฅุบูุงู.
    - Close-On-Trigger: ูุถูู ุฃู ุฃูุฑ ุงูุฅุบูุงู ูู ูุฒูุฏ ุงููุฎุงุทุฑ ุญุชู ูุน ูููุฏ ุงููุงูุด.
    - Hedge vs One-Way: ูุถุน ุงูุชุญููุท ูุณูุญ ุจุตููุชู Long ูShort ุนูู ููุณ ุงูุฑูุฒ. ูุถุน ุงูุงุชุฌุงู ุงููุงุญุฏ ูุฏูุฌูุง ูู ุตููุฉ ุตุงููุฉ.
- ุฅุนุฏุงุฏุงุช ุงููุงูุด ูุงูุฑุงูุนุฉ (Futures)
    - Cross: ูุดุงุฑู ุฑุตูุฏ ุงูุญุณุงุจ ูู ุชุบุทูุฉ ุงููุงูุด.
    - Isolated: ูุนุฒู ุงููุงูุด ุนูู ุงูุตููุฉ ููุท.
    - ุงูุฑุงูุนุฉ: ุชุถุงุนู ุงูุชุนุฑุถ ูุงููุฎุงุทุฑ. ุญุณูุงุณ ููุฑู ุงูุชุตููุฉ.

### 11) ุงููุฑู ุงูููุตูู ุจูู Spot ู Futures

### 11.1) ุงูุชูุงูู ุนุจุฑ API ููุญุณุงุจ ุงูุญูููู (Bybit ู MEXC)

- ุงููุฏู: ุฌุนู ุณููู ุงูุชูููุฐ ูู ุงูุญุณุงุจ ุงูุญูููู ูุทุงุจู ูุง ูุญุฏุซ ูุนูููุง ุนูู ููุตุงุช Bybit ูMEXC.

### ุฃ) ุงููุตุงุฏูุฉ ูุงูุจูุฆุฉ

- ุจูุฆุงุช
    - Mainnet: ุชูููุฐ ุญูููู ุนูู ุญุณุงุจู.
    - Testnet (ุฅู ุชููุฑุช): ููุงุฎุชุจุงุฑ ุจุฏูู ุฃููุงู ุญููููุฉ.
- ููุงุชูุญ API
    - key, secretุ ูุตูุงุญูุงุช: ุงูุชุฏุงูู ููุทุ ุจุฏูู ุณุญุจ.
- ุงูุชูููุน
    - Bybit: HMAC SHA256 ุนูู ุงูุณูุณูุฉ ุงููุฑุชุจุฉ ููุจุงุฑุงูุชุฑุงุช + timestampุ ูู Header.
    - MEXC: HMAC SHA256 ุนูู Query String ุฃู Body ูุน timestamp ูrecvWindow.

### ุจ) ุฃููุงุน ุงูุฃูุงูุฑ ูุงูุญููู ุงูุฃุณุงุณูุฉ

- ุฃููุงุน ูุฏุนููุฉ
    - Marketุ Limitุ Stop Marketุ Stop Limitุ OCO ููู TP/SL
- ุญููู ุนุงูุฉ
    - symbolุ sideุ typeุ qty/sizeุ price (ููู Limit)ุ triggerPrice (ููุฃูุงูุฑ ุงูุดุฑุทูุฉ)ุ tif
- ุฃุนูุงู ูููุฉ (Futures)
    - reduce_onlyุ close_on_triggerุ positionMode: one-way | hedge
- ุงุฎุชูุงุฑ ูุญุฑูู ุงููุญููุฒ Trigger
    - last | index | mark ุฅู ูุงู ูุชุงุญูุง. ุงูุฅุนุฏุงุฏ ุงูุงูุชุฑุงุถู: mark.

### ุฌ) ูุทุงุจูุฉ ุงูุณูุงุณุงุช ุจูู ุงูุจูุช ูุงูููุตูุงุช

- Spot
    - buy: ุฃูุฑ Market ุฃู Limit ุญุณุจ ุงูุณูุงุณุฉ.
    - sell: ุจูุน ูู ุงูุฑุตูุฏ ููุท. ุฑูุถ ุฅุฐุง ูุง ููุฌุฏ ุฑุตูุฏ ูุงูู.
- Futures
    - buy โ Longุ sell โ Short. ููุงููุง ูููู Market/Limit.
    - ุงูุฅุบูุงูุงุช: ุฏุงุฆููุง reduce_only. ูุง ุชุญููู ุฅุบูุงู ุฅูู ุชุนุฒูุฒ.
    - Close-On-Trigger ูุฃูุงูุฑ ุงูุฅุบูุงู ุงูุดุฑุทูุฉ.
- OCO ููู TP/SL
    - ุฑุจุท ุงููุฏู ูุงูููู ุจุญูุซ ุชูููุฐ ูุงุญุฏ ููุบู ุงูุขุฎุฑ.
- TIF
    - GTC ุงูุชุฑุงุถู. ุฏุนู IOC/FOK ุนูุฏ ุงูุญุงุฌุฉ.
- Post-Only (ููู Limit)
    - ููุน ุงูุชุญููู ุฅูู Taker. ุฑูุถ ุฅุฐุง ูุงู ุณูุชูููุฐ ููุฑูุง.

### ุฏ) ุฎุฑุงุฆุท ุงูุญููู ููู ููุตุฉ

| ุงูููููู | Bybit | MEXC |
| --- | --- | --- |
| ุงููููุฉ | qty ุฃู size (ุญุณุจ ุณูู spot/futures) | quantity |
| ุงูุณุนุฑ | price | price |
| ุงูููุน | type: Market|Limit | type: MARKET|LIMIT |
| ุงูุฒูู TIF | timeInForce: GTC|IOC|FOK | timeInForce: GTC|IOC|FOK |
| ุงููุญููุฒ ุงูุดุฑุทู | triggerPrice (+ triggerDirection) | stopPrice |
| Reduce-Only | reduceOnly: true|false | reduceOnly: true|false |
| Close-On-Trigger | closeOnTrigger: true|false | ูุฏุนูู ุจุณููู ุงูุฅุบูุงู ุงูุดุฑุทู |
| ูุถุน ุงูุตููุฉ | positionIdx/positionMode | positionMode |

### ู) ุฃูุซูุฉ ุทูุจุงุช ุชูููุฐ ูุงูุนูุฉ

- Bybit Futures: ูุชุญ Long Market ูุน id ูุฑุจุท TP/SL

```json
{
  "action": "place_order",
  "exchange": "bybit",
  "market": "futures",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "type": "Market",
  "size": 0.01,
  "tif": "GTC",
  "link_id": "LONG_A",
  "tp": 70500,
  "sl": 69000,
  "reduce_only": false,
  "close_on_trigger": false
}
```

- Bybit Futures: ุฅุบูุงู ุฌุฒุฆู 30% ูุน reduce_only

```json
{
  "action": "close_partial",
  "exchange": "bybit",
  "market": "futures",
  "symbol": "BTCUSDT",
  "link_id": "LONG_A",
  "percentage": 30,
  "reduce_only": true,
  "close_on_trigger": true
}
```

- MEXC Spot: ุดุฑุงุก Limit ูุน Post-Only

```json
{
  "action": "place_order",
  "exchange": "mexc",
  "market": "spot",
  "symbol": "ETHUSDT",
  "side": "BUY",
  "type": "LIMIT",
  "quantity": 0.5,
  "price": 2700.0,
  "timeInForce": "GTC",
  "post_only": true
}
```

- MEXC Futures: ุฃูุฑ Stop Market ูุฅุบูุงู ุงูุตููุฉ

```json
{
  "action": "place_order",
  "exchange": "mexc",
  "market": "futures",
  "symbol": "BTCUSDT",
  "side": "SELL",
  "type": "MARKET",
  "stopPrice": 69000,
  "reduce_only": true
}
```

### ู) ุงููููุฏ ูุงูุฏูุฉ

- ุงุญุชุฑุงู tick_size ูqty_step ูmin_notional ููู ุฑูุฒ.
- ุชุญููู ุงููููุงุช ุฅูู ุงูุฏููุฉ ุงูุตุญูุญุฉ ูุจู ุงูุฅุฑุณุงู.

### ุฒ) ุญุฏูุฏ ุงููุนุฏูู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ

- Queue ุฏุงุฎูู ูุงุญุชุฑุงู Rate Limits ูููุง ุงูููุตุชูู.
- Retry ูุน backoff ููุดุงูู ุงูุดุจูุฉ.
- ุฅูุบุงุก ุชููุงุฆู ููุฃูุงูุฑ ุงููุนูููุฉ ุนูุฏ ุชุจุฏูู ุงูุญุงูุฉ.

### ุญ) ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก ุงููููุฐุฌูุฉ

- ุฑููุฒ ุฃุฎุทุงุก ุดุงุฆุนุฉ
    - ูุตุงุฏูุฉ ุบูุฑ ุตุญูุญุฉุ ุฑุตูุฏ ุบูุฑ ูุงููุ ูููุฉ ุฃูู ูู ุงูุญุฏ ุงูุฃุฏููุ ุชุฌุงูุฒ ุงููุนุฏูู.
- ุณูุงุณุงุช ุงูุชุนุงูู
    - ุชูุญูุฏ ุฑุณุงุฆู ุงูุฎุทุฃ ูุดุฑุญ ุณุจุจ ุงูุฑูุถ.
    - ุงูุชุฑุงุญ ุชุนุฏูู ุงููููุฉ ุฃู ุงูุณุนุฑ ุนูุฏ ุงูุญุงุฌุฉ.

### ุท) ุฅุดุนุงุฑุงุช Telegram (ุญุณุงุจ ุญูููู)

- ุนูุฏ ุงููุชุญ: ุนุฑุถ ุงูุฑูุฒ ูุงูุญุฌู ูุงูุณุนุฑ ุงูุชูุฑูุจู ูid ุฅู ูุฌุฏ ุฃู ุงููููููุฏ.
- ุนูุฏ ุงูุฅุบูุงู ุงูุฌุฒุฆู/ุงููุงูู: ูุณุจุฉ ุฃู ุญุฌู ุงูุฅุบูุงูุ ูุจูุงุก reduce_only ููุนูู.
- ุฅุฎูุงุก ููุน ุงูุญุณุงุจ ุฏุงุฆููุง ูู ุงูุฑุณุงุฆู.

| ุงูุฌุงูุจ | Spot | Futures |
| --- | --- | --- |
| ุทุจูุนุฉ ุงูุฃุตูู | ุชููู ุงูุฃุตู ูุนูููุง | ุนูุฏ ูุดุชู ูุฑุชุจุท ุจุงูุณุนุฑ (ูุง ุชููู ุงูุฃุตู) |
| ุงูุงุชุฌุงูุงุช ุงูููููุฉ | Long ููุท. ูุง ููุฌุฏ Short ุจุฏูู ุงูุชุฑุงุถ | Long ู Short ุจุณูููุฉ |
| ุงููุฎุงุทุฑ ูุงูุชุตููุฉ | ูุง ุชูุฌุฏ ุชุตููุฉ. ุงูุฎุณุงุฑุฉ ูุญุฏูุฏุฉ ุจุฑุตูุฏ ุงูุฃุตู | ุชูุฌุฏ ุชุตููุฉ ุญุณุจ ุงููุงูุด ูุงูุฑุงูุนุฉ |
| ุงููุงูุด ูุงูุฑุงูุนุฉ | ุบูุฑ ูุชุงุญูู ุนุงุฏุฉู | Cross ุฃู Isolated + ุฑุงูุนุฉ ูุงุจูุฉ ููุถุจุท |
| ุงูุฑุณูู ูุงููุฑููุงุช | ุฑุณูู ุชุฏุงูู ููุท | ุฑุณูู + ุชูููู (Funding) ุฏูุฑู ูููุฑุงูุฒ ุงูููุชูุญุฉ |
| ุฃูุงูุฑ ุงูุฅุบูุงู | ุจูุน ูุงูู ุฃู ุฌุฒุฆู ูู ุงูุฑุตูุฏ | Reduce-Only ู Close-On-Trigger ูุฅุฏุงุฑุฉ ุงูุฅุบูุงู ุงูุขูู |
| ุงูููุงุกูุฉ | ุงุณุชุซูุงุฑ ูุชุญููุท ุจุณูุท | ุชุฏุงูู ูุดุท ูุฅุณุชุฑุงุชูุฌูุงุช ูุนูุฏุฉ ุจุงุณุชุฎุฏุงู ุงูุฑุงูุนุฉ |

---

### 12) ุฑุจุท ุงูุตููุงุช ุจุงูููุตูุฉ ููู ูููุฌูุฉ ID

### 12.4) ุฌุนู id ุงุฎุชูุงุฑููุง + ุชูููุฏ ุชููุงุฆู ุนูุฏ ุนุฏู ุงูุฅุฑุณุงู

- ุงููุฏู: id ููุณุชุฎุฏู ููุท ูุฅุฏุงุฑุฉ ุงูุตููุฉ ูุงุญููุง ุนุจุฑ ุงูุฅุดุนุงุฑุงุช ูุซู TP/SL ูclose ูpartial_close.
- ุฅู ูู ุชูุฑุณู id ูู ุฅุดุงุฑุงุช ุงููุชุญุ ูููู ุงูุจูุช ุจุชูููุฏ id ุชููุงุฆู ูุฑุจุทู ุจุงูุตููุฉ.
- ููููุฉ ุงูุชูููุฏ:
    - ุงูุตูุบุฉ ุงูููุชุฑุญุฉ: <SYMBOL>-<YYYYMMDD>-<HHMMSS>-<RAND4>
    - ูุซุงู: BTCUSDT-20251019-031540-7KQ2
    - ูุฌุจ ุฃู ูููู ูุฑูุฏูุง ุฏุงุฎู ุงูุญุณุงุจ ูุงูุณูู (Spot/Futures).
- ุงูุชุนุฑูุถ ูููุณุชุฎุฏู:
    - ุจุนุฏ ูู ูุชุญ ุตููุฉ ุจูุง idุ ูุฑุณู ุงูุจูุช ุฑุณุงูุฉ ุชุชุถูู id ุงูุฐู ุชู ุชูููุฏู ูู ุชุณุชุฎุฏูู ูุงุญููุง ูู ุงูุฅุบูุงูุงุช ูุงูุฃูุฏุงู.
    - ูู ุงูุชููุบุฑุงู: "ุชู ูุชุญ ุตููุฉ BTCUSDT. id: BTCUSDT-20251019-031540-7KQ2".
- ุงูููุงุนุฏ:
    
    1) partial_close ุฃู close ุฃู TP/SL ูุฌุจ ุฃู ุชุชุถูู id ูุงุณุชูุฏุงู ุงูุตููุฉ ุงูุตุญูุญุฉ ุนูุฏูุง ุชูุฌุฏ ุนุฏุฉ ุตููุงุช ุนูู ููุณ ุงูุฑูุฒ.
    
    2) ุฅุฐุง ูู ููุฐูุฑ id ููุงู ููุงู ุตููุฉ ูุงุญุฏุฉ ููุท ููุฑูุฒ ูู ููุณ ุงูุณููุ ูููู ุชุทุจูู ุงูุฅุฏุงุฑุฉ ุนูููุง ูุงูุชุฑุงุถูุ ูุฅูุง ุชูุฑูุถ ุงูุนูููุฉ ุจุฑุณุงูุฉ ุชูุถูุญ.
    
    3) ูุตู ุงูุงุชุฌุงูุงุช ุซุงุจุช: Long ูShort ูุง ููุฏูุฌุงู ุญุชู ูู ูุงู id ููุณู. ูููุถูู ุฅุฑุณุงู "side" ุนูุฏ ุงูุบููุถ.
    
- ูุซุงู ุชุฏูู ุนููู
    
    1) ูุชุญ ุจุฏูู id:
    

```json
{"signal":"buy","symbol":"BTCUSDT"}
```

โ ุงูุจูุช ููููุฏ: BTCUSDT-20251019-031540-7KQ2 ููุจูุบู ุจู.

2) ูุงุญููุง ุฅุบูุงู ุฌุฒุฆู ูููุณ ุงูุตููุฉ:

```json
{"signal":"partial_close","symbol":"BTCUSDT","percentage":30,"id":"BTCUSDT-20251019-031540-7KQ2"}
```

3) ูุถุน ูุฏู ุฑุจุญ (ูุซุงู ููุนูููุฉ ุณูุงุณุงุช):

```json
{"signal":"tp","symbol":"BTCUSDT","price":70000,"id":"BTCUSDT-20251019-031540-7KQ2"}
```

### 12.3) ุงุณุชุฎุฏุงู id ูู ุงูุฅุบูุงู ุงูุฌุฒุฆู (Partial Close)

- ุงููุจุฏุฃ:
    - ูุชู ุชุทุจูู partial_close ููุท ุนูู ุงูุตููุฉ ุงูุชู ูุญุฏุฏูุง id.
    - ุฅู ูู ููุฐูุฑ idุ ููุทุจูู ุงูุฅุบูุงู ุงูุฌุฒุฆู ุนูู ุตููุฉ ุงูุฑูุฒ ุงููุฌููุนุฉ ุงูุงูุชุฑุงุถูุฉุ ุฅู ููุฌุฏุช.
- ููุงุนุฏ ุฏูููุฉ:
    
    1) ุฅุฐุง ููุฌุฏุช ุนุฏุฉ ุตููุงุช ุนูู ููุณ ุงูุฑูุฒ ูููู ููุง id ูุฎุชููุ ููุฌุจ ุฐูุฑ id ูู partial_close ูุชุญุฏูุฏ ุฃู ุตููุฉ ุชูุบูู ุฌุฒุฆููุง.
    
    2) ุฅู ูู ููุฌุฏ id ูู partial_close ูุงูุฑูุฒ ูุฏูู ุตููุฉ ูุงุญุฏุฉ ููุท ูุฌููุนุฉุ ุชูุทุจู ุนูู ูุฐู ุงูุตููุฉ.
    
    3) ูู Futuresุ partial_close ูุนูู ูุน Reduce-Only ููุง ูุบููุฑ ุงูุงุชุฌุงู. Long ูุจูู Long ุจุนุฏ ุงูุชูููุต. Short ูุจูู Short.
    
    4) ูู Spotุ partial_close ูุจูุน ูุณุจุฉ ูู ุงูุฑุตูุฏ ุงููุชุงุญ ููุฑูุฒ.
    
- ุฃูุซูุฉ Spot:

```json
{"signal":"buy","symbol":"ETHUSDT"}
{"signal":"buy","symbol":"ETHUSDT"}
{"signal":"partial_close","symbol":"ETHUSDT","percentage":40}
```

ููุบูู 40% ูู ุตููุฉ ETHUSDT ุงููุฌููุนุฉ ูุฃู ูุง ููุฌุฏ idุ ูุงูุฑูุฒ ุตููุฉ ูุงุญุฏุฉ.

- ุฃูุซูุฉ Futures ูุน ุชุนุฏุฏ ุงูููููุงุช:

```json
{"signal":"buy","symbol":"BTCUSDT","id":"LONG_A"}
{"signal":"buy","symbol":"BTCUSDT","id":"LONG_B"}
{"signal":"partial_close","symbol":"BTCUSDT","percentage":25,"id":"LONG_B"}
```

ูููููุต ููุท ูุฑูุฒ LONG_B ุจูุณุจุฉ 25% ููุง ููุณ LONG_A.

- ูุซุงู Futures ูุงุชุฌุงููู ูุฎุชูููู ุนูู ููุณ id:

```json
{"signal":"buy","symbol":"BTCUSDT","id":"X"}      // ููุชุญ Long X
{"signal":"sell","symbol":"BTCUSDT","id":"X"}     // ููุชุญ Short ูุณุชูู X
{"signal":"partial_close","symbol":"BTCUSDT","percentage":50,"id":"X"}
```

ูุฌุจ ุฃู ูุญุฏุฏ ุงููุธุงู ุฃู ุงุชุฌุงู ููุฏุงุฑ ุจุงูู id ุนูุฏ ุงูุฅุบูุงู ุงูุฌุฒุฆู. ุงูุชูููุฐ ุงููุนุชูุฏ ูุฏููุง:

- ุฅุฐุง ููุฌุฏ Long ูShort ุจููุณ idุ ูุทูุจ ุชุทุงุจู ุงูุงุชุฌุงู ุณูุงูููุง.
- ุงูุญู ุงูุขูู: ูุณุชุฎุฏู ุณูุงุณุฉ ุงูุชุญุฏูุฏ ุจุงูุณูุงู ุงูุญุงูู ุฃู ูุฑูุถ ูุน ุฑุณุงูุฉ ุชูุถูุญ ุฅู ูุงู ุบุงูุถูุง. ูููุถููู ุฃู ุชูุฑุณู partial_close ูุน ุญูู "side" ุงุฎุชูุงุฑููุง ูุชุญุฏูุฏ Long ุฃู Short:

```json
{"signal":"partial_close","symbol":"BTCUSDT","percentage":50,"id":"X","side":"Long"}
```

- ุชูููุญุงุช ุชูููุฐูุฉ:
    - always reduce_only ูู Futures.
    - ุงูุชุญูู ูู ุงูุฑุตูุฏ ูู Spot ูุจู ุงูุชูููุฐ.
    - ุญุฏ ุฃุฏูู ูููููุฉ ุจุนุฏ ุงูุชูููุต ุญุณุจ tick_size ูqty_step.

### ุฎูุงุตุฉ ููุทู id (ูุฎุชุตุฑ ููุงุถุญ)

- ุงููุฏู ูู id: ุชุญุฏูุฏ ุงูุตููุฉ ุงููุณุชูุฏูุฉ ูุฃูุงูุฑ ุงูุฅุฏุงุฑุฉ ููุท.
- ุชูุฑุงุฑ id ูุง ูุนูู ุฅุบูุงููุง ุชููุงุฆููุง ุฃุจุฏูุง.
- ุงูุฅุฏุงุฑุฉ ุชุชู ููุท ุนูุฏูุง ุชููู ุงูุฅุดุงุฑุฉ ูู ููุน close ุฃู partial_close ุฃู TP/SL.
- ุงูุชุนุฒูุฒ: buy ุจููุณ ุงูุฑูุฒ ููุน ููุณ id ูุนูู ุชุนุฒูุฒ ููุณ ุงูุตููุฉ.
- ูุตู ุงูุงุชุฌุงูุงุช: Long ูShort ูุจููุงู ูููุตููู ุญุชู ูู ุดุงุฑูุง ููุณ id. ุงูุฅุบูุงู ููู ุงุชุฌุงู ูุง ูุชู ุฅูุง ุจุฅุดุงุฑุชู.

### ุฃูุซูุฉ ุฅุดุงุฑุงุช ุฏูููุฉ

- ูุชุญ ูุชุนุฒูุฒ Spot ูุน ุฅุฏุงุฑุฉ ูุงุญูุฉ

```json
{"signal":"buy","symbol":"BTCUSDT"}
{"signal":"buy","symbol":"BTCUSDT"}
{"signal":"partial_close","symbol":"BTCUSDT","percentage":25,"id":"BTC_MAIN"}
```

- ูุชุญ Long Futures ุซู ุฅุฏุงุฑุฉ ุจุงุณุชุฎุฏุงู id

```json
{"signal":"buy","symbol":"BTCUSDT","id":"LONG_A"}
{"signal":"buy","symbol":"BTCUSDT","id":"LONG_A"}
{"signal":"close","symbol":"BTCUSDT","id":"LONG_A"}
```

- ูุชุญ Short ูุณุชูู ุญุชู ูู ููุณ id (ูุง ูุบูู ุงูู Long)

```json
{"signal":"sell","symbol":"BTCUSDT","id":"LONG_A"}
```

ูุฐุง ููุชุญ Short ูุณุชูู. ุฅุบูุงู ุงูู Long ูุจูู ุนุจุฑ:

```json
{"signal":"close","symbol":"BTCUSDT","id":"LONG_A"}
```

### 12.1) ููุทู ุชููู ูุชุฌููุน ุงูุตููุงุช ุจุงูุฑูุฒ ูุน ID ุงุฎุชูุงุฑู

- ุงูุฃุณุงุณ ุจุงูููุตูุฉ (ุณููู ุงูุชุฌููุน ุจุงูุฑูุฒ)
    - ุฅุฐุง ูุตูุช ุฅุดุงุฑุฉ ุดุฑุงุก ูุฑุชูู ุจููุณ ุงูุฑูุฒ ููุณูุ ุชูุฌูุน ุงููููุงุช ูู ุตููุฉ ูุงุญุฏุฉ ููุฑูุฒ ููุณู.
    - ุฅุฐุง ูุงู ุงูุฑูุฒ ูุฎุชูููุงุ ุชููุชุญ ุตููุงุช ูุชุนุฏุฏุฉ ูุชุธูุฑ ูู ุตููุฉ ุนูู ุญุฏุฉ ูู ุงูุตููุงุช ุงูููุชูุญุฉ.
- ุฏูุฑ ุงูู ID ูุฎูุงุฑ ุงุฎุชูุงุฑู ูู ุงูุฅุดุงุฑุฉ
    - ูุฌูุฏ id ูู ุงูุฅุดุงุฑุฉ ูุฌุนู ุงูุฅุดุงุฑุงุช ุงููุงุญูุฉ ุจููุณ id ุชุดูุฑ ุฅูู "ููุณ ุงูุตููุฉ ุงูููุทููุฉ" ูุฃุบุฑุงุถ ุงูุฅุฏุงุฑุฉ ููุท: ุฅุบูุงู ูุงููุ ุฅุบูุงู ุฌุฒุฆูุ ุฃู ุชูููุฐ ุฃูุฏุงู/ููู ุฎุณุงุฑุฉ.
    - ุฅุฐุง ุชูุฑุฑ ููุณ ุงูุงุณู id ุชููุงุฆููุงุ ูููู ุงูุจูุช ุฃู ุงูุนูู ุงููุทููุจ ูู ุนูู ุงูุตููุฉ ุงููุฑุชุจุทุฉ ุจูุฐุง id.
- ูุตู ุงูุงุชุฌุงูุงุช ุญุชู ูุน ููุณ id
    - ุฅุฐุง ูุงูุช ุงูุตููุฉ ุงูุฃุตููุฉ ุดุฑุงุก (Spot buy ุฃู Futures Long) ุซู ูุตูุช ุฅุดุงุฑุฉ ุจูุน (Spot sell ุฃู Futures Short) ุจููุณ id:
        - ูุชู ุงูุชุนุงูู ูุน ูู ุงุชุฌุงู ุนูู ุญุฏุฉ. ูุง ูููุฒุฌ Long ูุน Short ุญุชู ูู ูุงู id ูุงุญุฏูุง.
        - ุงูุงุณุชูุงุฏุฉ ูู id ููุง ููุชุตุฑุฉ ุนูู ุฃูุงูุฑ ุงูุฅุฏุงุฑุฉ ุงูุฎุงุตุฉ ุจุชูู ุงูุตููุฉ ููุทุ ูุซู ุฅุบูุงูุงุชูุง ุฃู ุฌูู ุฃุฑุจุงุญูุง.
- ููุงุนุฏ ุชูููุฐ ููุฌุฒุฉ
    
    1) buy ููุณ ุงูุฑูุฒ ุฏูู id: ุชุฌููุน ูููููุฉ ูู ุตููุฉ ุงูุฑูุฒ.
    
    2) buy ููุณ ุงูุฑูุฒ ูุน id ุซุงุจุช: ุชุนุฒูุฒ ููุณ ุงูููุงู ุงูููุทูู ููุฐุง id.
    
    3) buy ุจุฑูุฒ ูุฎุชูู: ุตููุฉ ุฌุฏูุฏุฉ ูุณุชููุฉ.
    
    4) close ุฃู partial_close ูุน id: ุชูุทุจู ููุท ุนูู ุงูุตููุฉ ุงููุฑุชุจุทุฉ ุจุฐูู id.
    
    5) sell ุนูู Spot ูุน ุนุฏู ูุฌูุฏ ุฑุตูุฏ ูุงูู: ุฑูุถ ุงูุชูููุฐ.
    
    6) sell ุนูู Futures ุญุชู ูู ุจููุณ id ูุตููุฉ Long: ุชูุฏุงุฑ ูุงุชุฌุงู ูุณุชูู (Short)ุ ููุง ุชูุฏูุฌ ูุน Long.
    
- ุฃูุซูุฉ ุณุฑูุนุฉ
    - ูุซุงู A (Spot):
        - ุฅุดุงุฑุฉ: buy BTCUSDT โ ุชููุชุญ ุตููุฉ BTCUSDT.
        - ุฅุดุงุฑุฉ: buy BTCUSDT โ ุชูุนุฒููุฒ ููุณ ุตููุฉ BTCUSDT (ุชุฌููุน).
        - ุฅุดุงุฑุฉ: partial_close 30% id=TV_BTC โ ุชููููุต ุงูุตููุฉ ุงููุฑุชุจุทุฉ ุจู id=TV_BTC ููุท ุฅู ููุฌุฏ.
    - ูุซุงู B (Futures):
        - ุฅุดุงุฑุฉ: buy BTCUSDT id=TV_X โ Long BTCUSDT.
        - ุฅุดุงุฑุฉ: buy BTCUSDT id=TV_X โ ุชุนุฒูุฒ Long ููุณูุง.
        - ุฅุดุงุฑุฉ: sell BTCUSDT id=TV_X โ ุชููุชุญ Short ูุณุชููุฉ ุนู ุงูู Long ุญุชู ูุน ููุณ id. ุงูุงุฑุชุจุงุท ุจู id ููุณุชุฎุฏู ููุฅุฏุงุฑุฉุ ูููุณ ูุฏูุฌ ุงูุงุชุฌุงููู.
- ุชูููุญุงุช ุชูููุฐูุฉ
    - ุงุฑุจุท id ุจุงูู position_id ุฏุงุฎูููุงุ ููู ุญุงูุธ ุนูู ูุตู ุงูุงุชุฌุงูุงุช.
    - ูุนูู Reduce-Only ุนูุฏ ุงูุฅุบูุงูุงุช ุงูุดุฑุทูุฉ ูู Futures.
    - ุฃุจูู ุฅุดุนุงุฑุงุช ุงูุชููุบุฑุงู ุจุฏูู ุฐูุฑ ููุน ุงูุญุณุงุจ.
- ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ
    - ูู ุฅุดุงุฑุฉ ุชุญูู id ูุฑูุฏ. ุนูุฏ link_by_id=Trueุ ุชูุนุงูู ุงูุฅุดุงุฑุงุช ุฐุงุช ููุณ id ูุตููุฉ ูุงุญุฏุฉ ูุณุชูุฑุฉ.
- ุณูุฑ ุงูุนูู ุงููุฎุชุตุฑ
    
    1) ุงุณุชูุงู ุงูุฅุดุงุฑุฉ ูู TradingView โ ุงูุชุญูู ูู schema.
    
    2) ุชุญุฏูุฏ ุงูุญุณุงุจ ุงููุดุท: Demo/Real ุซู Spot/Futures.
    
    3) ุงูุจุญุซ ูุญูููุง ุนู ุตููุฉ ุจููุณ id ูุญุงูุฉ ุงูุฑูุฒ.
    
    4) ุชุทุจูู ุงูููุทู:
    
    - buy: ูุชุญ ุฃู ุชุนุฒูุฒ ุงูุตููุฉ ุฐุงุช id.
    - sell (Futures): ูุชุญ/ุชุนุฒูุฒ Short ุถูู ููุณ id ุฃู ุชุฌุงูู ุฅุฐุง ูุนุงูุณ ูุถุน Spot.
    - close: ุฅุบูุงู ูุงูู ููุตููุฉ ุงููุฑุชุจุทุฉ ุจู id.
    - partial_close: ุชูููุต ุฌุฒุก ูู ูุฑูุฒ id.
    
    5) ุชูููุฐ Demo ุฏุงุฎูููุง ุฃู ุฅุฑุณุงู ุฃูุฑ API ูู Real.
    
    6) ุชุญุฏูุซ ุงูุณุฌูุงุช ุซู ุฅุดุนุงุฑ ุงูุชููุบุฑุงู ุจุฏูู ุฅุธูุงุฑ ููุน ุงูุญุณุงุจ.
    
- ุฎุฑุงุฆุท ุงูุจูุงูุงุช Data Mapping
    - id โ position_id ุงูุฏุงุฎูู
    - symbol โ ุฒูุฌ ุงูุชุฏุงูู ูู ุงูููุตุฉ
    - side โ Long/Short ููู Futures ุฃู Buy/Sell ููู Spot
    - qty/size โ ุงููููุฉ ุงููุนููุฉ ุฃู ุงููุญุณูุจุฉ ูู ุงูุฅุนุฏุงุฏุงุช
    - flags โ Reduce-Only ู Close-On-Trigger ุนูุฏ ุงูุฅุบูุงู
- ุฃูุซูุฉ ุทูุจุงุช API ูุจุณุทุฉ

```json
{
  "action": "place_order",
  "account": "real",
  "market": "futures",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "type": "Market",
  "size": 0.01,
  "link_id": "TV_B01",
  "reduce_only": false
}
```

```json
{
  "action": "close_partial",
  "account": "real",
  "market": "futures",
  "symbol": "BTCUSDT",
  "link_id": "TV_B01",
  "percentage": 50,
  "reduce_only": true,
  "close_on_trigger": true
}
```

- ุญุงูุงุช ุงูุญุงูุฉ Edge Cases
    - ุชูุฑุงุฑ ููุณ ุงูุฅุดุงุฑุฉ: ุงูุญุต ุงูุชูุฑุงุฑ ุนุจุฑ ุทุงุจุน ุฒููู ูnonce ูุชุฌููุจ ุงูุชูููุฐ ุงููุฒุฏูุฌ.
    - ุงุฎุชูุงู ุงูุงุชุฌุงู ูุน ููุณ id: ุชุฌุงููู ุฃู ุฅูุดุงุก id ุฌุฏูุฏ ุญุณุจ ุงูุฅุนุฏุงุฏุงุช.
    - ุนุฏู ููุงูุฉ ุฑุตูุฏ Spot: ููุน ุงูุชูููุฐ ูุฅุฑุณุงู ุฅุดุนุงุฑ ุฎุทุฃ.
    - ุชุนุฐูุฑ API: ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุน backoff ูุชุจุฏูู ุฅูู ูุณุงุฑ ุฃูุงู.

---

### 13) ุณูุงุณุงุช ูุทุงุจูุฉ ูููุฑุชู

### 12.2) ุชุตุญูุญ ููุทู ุงูู ID ุญุณุจ ุทูุจู

- ุชูุฑุงุฑ ุงูู id ูุง ูุนูู ุงูุฅุบูุงู ุชููุงุฆููุง.
- ุงูุฅุบูุงู ูุง ูุญุฏุซ ุฅูุง ุฅุฐุง ูุงูุช ุงูุฅุดุงุฑุฉ ููุนูุง ุตุฑุงุญุฉ: close ุฃู partial_close ุฃู ุฃูุงูุฑ ุฅุฏุงุฑุฉ ูุซู TP/SL ูุฐููุฑุฉ ุจูุถูุญ.
- ุญุงูุงุช ุตุญูุญุฉ:
    - buy ุจููุณ ุงูุฑูุฒ ูููุณ id โ ุชุนุฒูุฒ ููุณ ุงูุตููุฉุ ูููุณ ุฅุบูุงููุง.
    - sell ูู Spot ุจููุณ id ูุตููุฉ ุดุฑุงุก Spot โ ููุนุงูู ูุจูุน ูู ุงูุฑุตูุฏ ููุทุ ููุง ูุบูู ุชููุงุฆููุง ุฅูุง ุฅุฐุง ูุงู signal=close ุฃู partial_close ูุญุฏุฏูุง.
    - sell ูู Futures ุจููุณ id ูุตููุฉ Long โ ุชููุชุญ ุตููุฉ Short ูุณุชููุฉ. ูุง ููุบูู Long ุฅูุง ุจุฅุดุงุฑุฉ close ุฃู partial_close ุนูู id ุงูุฎุงุต ุจุงูู Long.
- ุงููุฏู ูู id: ุงุณุชูุฏุงู ุตููุฉ ุจุนูููุง ููุฅุฏุงุฑุฉ ุนูุฏ ุฅุฑุณุงู ุฅุดุงุฑุงุช ุฅุฏุงุฑุฉ ูุซู close ุฃู partial_close ุฃู TP/SLุ ูููุณ ุงูุฅุบูุงู ุนูุฏ ุชูุฑุงุฑ id.
- ุนุฏู ุฅุธูุงุฑ ููุน ุงูุญุณุงุจ ูู ุฃู ุฅุดุนุงุฑ ุฎุงุฑุฌู.
- ุฅุจูุงุก Spot ู Futures ูู ุนุฒูุฉ ููุทููุฉ. ุชุจุฏูู ุงูุญุณุงุจ ูุง ูุบูู ุตููุงุช ุงูุญุณุงุจ ุงูุขุฎุฑ.
- ุงูุงูุชุฒุงู ุจู link_by_id ูุชุฌููุน ุงูุชุนุฒูุฒ ูุงูุฅุบูุงู ุงูุฌุฒุฆู ุถูู ููุณ ุงููููุฉ.
- ุชูุนูู Reduce-Only ููู ุฃูุงูุฑ ุงูุฅุบูุงู ูู Futures ุจุดูู ุงูุชุฑุงุถู.
- ุฏุนู OCO ููู TP/SL ุนูุฏ ุงูุชูุนูู. ููู ุงูุชุฑุงุถูุฉ ูู ุงูุฅุนุฏุงุฏุงุช ูุน ูุงุจููุฉ ุงูุชุฎุตูุต.
- ุชุณุฌูู ุดุงูู: ูู ุทูุจุ ุฑุฏุ ุญุงูุฉ ูุญููุฉุ ูููุจู ุงููุฑุงุฑุงุช ูุบุงูุงุช ุงูุชุชุจูุน.

---

### 14) ุณููุงุฑูููุงุช ุนูููุฉ ูุงููุฉ

- ุณููุงุฑูู A: ุดุฑุงุก ุซู ุชุนุฒูุฒ ุซู ุฅุบูุงู ุฌุฒุฆู Spot
    
    1) buy BTCUSDT id=TV_B01
    
    2) buy BTCUSDT id=TV_B01 (ุชุนุฒูุฒ ููุณ ุงููููุฉ)
    
    3) partial_close 30% id=TV_B01
    
    - ุงูููุทู: ุฏูุฌ ุงููููุงุช ุชุญุช ููุณ id. ุงูุฅุบูุงู ุงูุฌุฒุฆู ูุฎูุถ ุงููููุฉ ููู ุงููุณุจุฉ. ูููุน ุจูุน ุจุฏูู ุฑุตูุฏ.
- ุณููุงุฑูู B: ูุชุญ Short ูู Futures ูุน TP/SL ูุฑูููู
    
    1) sell BTCUSDT id=TV_S11 โ ุฃูุฑ Market ูุน ุชุนููู ุฑุงูุนุฉ ูุญุณุงุจ Isolated
    
    2) ุถุจุท OCO: TP ุนูุฏ +2% ู SL ุนูุฏ -1%
    
    3) partial_close 50% ุนูุฏ ูุตูู ุงููุฏู ุงูุฃูู
    
    - ุงูููุทู: ุงุณุชุฎุฏุงู Reduce-Only ููู ุฃูุงูุฑ ุงูุฅุบูุงู. ุฅุจูุงุก ุฅุดุนุงุฑุงุช ุงูุชููุบุฑุงู ุจูุง ุฐูุฑ ููุน ุงูุญุณุงุจ.
- ุณููุงุฑูู C: ุชุถุงุฑุจ ุงุชุฌุงู ูุน ููุณ id
    - ุญุงูุฉ: ุชูุฌุฏ Long id=TV_X1 ุซู ุชุตู ุฅุดุงุฑุฉ sell ุจููุณ id
    - ุงูุณูุงุณุฉ: ุชุฌุงูู ุงูุฅุดุงุฑุฉ ุฃู ูุชุญ id ุฌุฏูุฏ ุญุณุจ ุงูุฅุนุฏุงุฏุงุช. ุงูุงูุชุฑุงุถู: ุชุฌุงูู ูุชูุงุฏู ุงูุนูุงุณ ููุงุฌุฆ.

### 15) ูุฎุทุท ูุฑุงุฑุงุช ูุจุณุท (Pseudo-Flow)

```jsx
function on_signal(sig) {
  assert(schema_ok(sig));

  const ctx = resolve_context({ account_type, market }); // Demo/Real + Spot/Futures
  let pos = find_position(ctx, [sig.id](http://sig.id)); // returns null if not found

  switch (sig.signal) {
    case 'buy': {
      if (market === 'spot') {
        if (link_by_id && pos) {
          enhance_spot(pos, compute_qty(sig));
        } else {
          open_spot(ctx, compute_qty(sig));
        }
      } else { // futures
        if (link_by_id && pos) {
          enhance_futures(pos, { side: 'Long', qty: compute_qty(sig) });
        } else {
          open_futures(ctx, { side: 'Long', qty: compute_qty(sig), tif: 'GTC' });
        }
      }
      break;
    }

    case 'sell': {
      if (market === 'spot') {
        sell_from_balance_or_reject(ctx, compute_qty(sig)); // no shorting on spot
      } else { // futures short
        if (link_by_id && pos) {
          enhance_futures(pos, { side: 'Short', qty: compute_qty(sig) });
        } else {
          open_futures(ctx, { side: 'Short', qty: compute_qty(sig), tif: 'GTC' });
        }
      }
      break;
    }

    case 'close': {
      require_position(pos);
      close_full(pos, { reduce_only: true, close_on_trigger: true });
      break;
    }

    case 'partial_close': {
      require_position(pos);
      close_partial(pos, { pct: sig.percentage, reduce_only: true, close_on_trigger: true });
      break;
    }

    default:
      throw new Error('unsupported signal type');
  }

  persist_state(ctx);
  notify_telegram({ mask_account_type: true, link_id: [sig.id](http://sig.id) });
}
```

### 16) ูุงุฆูุฉ ุชุญูู ูุจู ุงููุดุฑ

- ุงูุชุญูู ูู ููุงุชูุญ API ูุตูุงุญูุงุชูุง ุงููุญุฏูุฏุฉ
- ุฅุนุฏุงุฏ ุงูุฑุงูุนุฉ ุงูุงูุชุฑุงุถูุฉ ูุญุฏูุฏ ุงูุญุฌู ููู ุฑูุฒ
- ุชูุนูู ุณูุงุณุงุช Retry ู Backoff ูุฃุฎุทุงุก ุงูุดุจูุฉ
- ุงุฎุชุจุงุฑ Edge Cases: ุชูุฑุงุฑ ุงูุฅุดุงุฑุฉุ ุนุฏู ููุงูุฉ ุงูุฑุตูุฏุ ุฒูู ุงุณุชุฌุงุจุฉ ุจุทูุก
- ูุฑุงุฌุนุฉ ุชูุณูู ุงูุฅุดุนุงุฑุงุช ูุฅุฎูุงุก ููุน ุงูุญุณุงุจ
- ุชูููู ุณุฌูุงุช ุชูุตูููุฉ ูุน ุชุชุจูุน link_id

### 17) ููุญู ุงูุชุนุงุฑูู ุงููุฎุชุตุฑุฉ

- link_by_id: ุชุฌููุน ุงูุฅุดุงุฑุงุช ุจููุณ ุงููููุฉ ูุตููุฉ ูุงุญุฏุฉ
- Reduce-Only: ุฃูุฑ ูุง ูุฒูุฏ ุงูุญุฌู ุฅุทูุงููุง ููุณุชุฎุฏู ููุฅุบูุงู ููุท
- Close-On-Trigger: ุญูุงูุฉ ุชููุน ุฒูุงุฏุฉ ุงููุฎุงุทุฑ ุนูุฏ ุชูุนูู ุฃูุงูุฑ ุงูุดุฑุท
- OCO: ุฃูุฑุงู ูุชุฑุงุจุทุงู ูููุฏู ูููู ุงูุฎุณุงุฑุฉุ ุชูููุฐ ุฃุญุฏููุง ููุบู ุงูุขุฎุฑ
- Time in Force: ุณูุงุณุฉ ุจูุงุก ุงูุฃูุฑ GTC ุฃู IOC ุฃู FOK

---

ููุงุญุธุฉ: ุชุญููู ุฏุงุฆููุง ูู ุงููุนูููุงุช ุงูุญุณุงุณุฉ ูุจู ุงูุชูููุฐ. ูุฏ ุชุญุฏุซ ุฃุฎุทุงุก ูู ูููุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ูุฐุง ููุถูู ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช ูุงููุนุงููุฑ ุงูุญุฑุฌุฉ.

---ูููู ุฃู ุชุตุฏุฑ ุนู ChatGPT ุจุนุถ ุงูุฃุฎุทุงุก. ูุฐูู ูุฌ ๐ฏ ุงููุฏู ูู ุงูุณูุงู:

ุชูุถูุญ ุงูููุงููู ุงูุฃุณุงุณูุฉ ูุงูุงุฎุชูุงูุงุช ุงูุฌููุฑูุฉ ุจูู ุงูุชุฏุงูู ุงูููุฑู ูุงูุนููุฏ ุงูุขุฌูุฉุ ูุชูุณุชุฎุฏู ูุงุญููุง ูู ุชูููุฏ ุดุฑูุญุงุชุ ุชุนูููุงุชุ ุฃู ุชุญูููุงุช ุชุชุนูู ุจุงูุฃุณูุงู ุงููุงููุฉ ูุงููุฑูุจุชู.

๐ก ุฃููุงู: ุงูุชุฏุงูู ุงูููุฑู (Spot Trading)
ุงูููููู:

ุงูุชุฏุงูู ุงูููุฑู ูู ุนูููุฉ ุดุฑุงุก ุฃู ุจูุน ุงูุนููุงุช ุงูุฑูููุฉ ุจุดูู ูุจุงุดุฑุ ุญูุซ ุชููุชูู ุงูุฃุตูู ูุนูููุง ุจุนุฏ ุงูุดุฑุงุก.
ุนูุฏ ุดุฑุงุก ุนููุฉ ูุซู BTC ุฃู ETH ูู ุณูู ุงูุณุจูุชุ ุชุตุจุญ ุงูุนููุฉ ูููู ูููููู ุงูุงุญุชูุงุธ ุจูุง ุฃู ููููุง ุฅูู ูุญูุธุฉ ุฎุงุตุฉ.

ุงูุขููุฉ:

ูุชู ุงูุชุฏุงูู ุนุจุฑ ุฃุฒูุงุฌ ูุซู: BTC/USDT ุฃู ETH/USDT.

ุนูุฏูุง ุชุดุชุฑู BTC ููุงุจู USDTุ ูุฅูู ุชุณุชุจุฏู ุงูู USDT ูุจุงุดุฑุฉ ุจุนููุฉ ุงูุจูุชูููู.

ุจุนุฏ ุงุฑุชูุงุน ุงูุณุนุฑุ ููููู ุจูุนูุง ูุฌุฏุฏูุง ููุญุตูู ุนูู ุฑุจุญ.

ุงูุฎุตุงุฆุต:

ููููุฉ ุญููููุฉ: ุชูุชูู ุงูุนููุฉ ูุนูููุง.

ุจุฏูู ุฑุงูุนุฉ ูุงููุฉ: ุงูุชุฏุงูู ูููู ุจุฑุฃุณ ุงููุงู ุงููุนูู ููุท.

ูุฎุงุทุฑ ููุฎูุถุฉ ูุณุจููุง: ูุฃูู ูุง ุชุชุนุฑุถ ููุชุตููุฉ ุฃู ุฎุณุงุฑุฉ ุชููู ุฑุฃุณ ุงููุงู.

ุงูุฑุจุญ ููุท ูู ุงูุงุชุฌุงู ุงูุตุงุนุฏ: ูุง ููููู ุงูุฑุจุญ ุนูุฏูุง ููุจุท ุงูุณุนุฑ.

ูุซุงู ุชูุถูุญู:

ุงุดุชุฑู ุงููุณุชุฎุฏู 1 BTC ุจุณุนุฑ 30,000$.
ุจุนุฏ ุฃุณุจูุน ุงุฑุชูุน ุงูุณุนุฑ ุฅูู 35,000$.
ูุงู ุจุจูุน ุงูุนููุฉ ูุฑุจุญ 5,000$.
ุงูุฑุจุญ = (35,000 - 30,000) = 5,000$.

ููุฎุต ุงููุฒุงูุง ูุงูุนููุจ:
ุงููุฒุงูุง	ุงูุนููุจ
ุชููู ุงูุฃุตู ูุนูุงู	ูุง ููููู ุงูุฑุจุญ ูู ุงููุจูุท
ูุง ููุฌุฏ ุชุตููุฉ	ุงูุฃุฑุจุงุญ ูุญุฏูุฏุฉ ุจุฑุฃุณ ุงููุงู
ููุงุณุจ ูููุจุชุฏุฆูู	ุชุญุฑูุงุช ุจุทูุฆุฉ ููุงุฑูุฉ ุจุงููููุชุดุฑ
โก ุซุงูููุง: ุงูุชุฏุงูู ุจุงูุนููุฏ ุงูุขุฌูุฉ (Futures Trading)
ุงูููููู:

ุงูุชุฏุงูู ุจุงูุนููุฏ ุงูุขุฌูุฉ ูู ุนูููุฉ ุงููุถุงุฑุจุฉ ุนูู ุญุฑูุฉ ุงูุณุนุฑ ุงููุณุชูุจููุฉ ููุนููุฉ ุฏูู ุงูุชูุงููุง ูุนูููุง.
ูู ูุฐุง ุงูููุนุ ููุชุญ ุงููุชุฏุงูู ุตููุงุช (Positions) ููุชููุน ุงูุงุชุฌุงู:

Long: ุฅุฐุง ุชููุน ุฃู ุงูุณุนุฑ ุณูุฑุชูุน.

Short: ุฅุฐุง ุชููุน ุฃู ุงูุณุนุฑ ุณููุฎูุถ.

ุงููุจุฏุฃ ุงูุฃุณุงุณู:

ูุง ุชุดุชุฑู ุงูุนููุฉ ููุณูุงุ ุจู ุชุฏุฎู ูู ุนูุฏ ูุน ุงูููุตุฉ ูุชุฑุจุญ ุฃู ุชุฎุณุฑ ุญุณุจ ุญุฑูุฉ ุงูุณุนุฑ.
ูุชู ุชุญุฏูุฏ ุญุฌู ุงูุตููุฉ ูู ุฎูุงู ุงููุงูุด (Margin) ู ุงูุฑุงูุนุฉ ุงููุงููุฉ (Leverage).

ุงูุฑุงูุนุฉ ุงููุงููุฉ (Leverage):

ุชุณูุญ ูู ุงูุฑุงูุนุฉ ุจูุถุงุนูุฉ ุญุฌู ุงูุตููุฉ ููุงุฑูุฉ ุจุฑุฃุณ ุงููุงู ุงูุญูููู.
ูุซูุงู:

ุฑุฃุณ ุงููุงู = 100$

ุฑุงูุนุฉ ร10 โ ุญุฌู ุงูุตููุฉ = 1,000$

ููู ุฅุฐุง ุชุญุฑู ุงูุณุนุฑ ุจูุณุจุฉ 10% ุถุฏูุ ุณุชุฎุณุฑ ูุงูู ุฑุฃุณ ุงููุงู (ุชุตููุฉ).

ุงูุฎุตุงุฆุต:

ูุง ุชููู ุงูุฃุตู ูุนูููุง.

ุฅููุงููุฉ ุงูุฑุจุญ ูู ุงูุงุชุฌุงููู (ุตุนูุฏ ุฃู ูุจูุท).

ุฑุงูุนุฉ ูุงููุฉ ุชุถุงุนู ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ.

ูุฎุงุทุฑ ุนุงููุฉ ุฌุฏูุง ุจุณุจุจ ุงุญุชูุงู ุงูุชุตููุฉ.

ูุซุงู ุชูุถูุญู:

ุฑุฃุณ ุงููุงู: 200$

ุฑุงูุนุฉ: ร10 โ ุญุฌู ุงูุตููุฉ = 2,000$

ูุชุญุช ุตููุฉ Long ุนูุฏ 1.00$

ุงุฑุชูุน ุงูุณุนุฑ ุฅูู 1.05$ (+5%)
ุงูุฑุจุญ = 5% ูู 2,000 = 100$ โ ุฑุจุญ ูุนูู 50% ูู ุฑุฃุณ ุงููุงู.

ููู ุฅุฐุง ูุจุท ุงูุณุนุฑ 5% โ ุฎุณุงุฑุฉ = 100$ โ ุฎุณุฑุช ูุตู ุฑุฃุณ ุงููุงู.

โ๏ธ ููุงุฑูุฉ ุดุงููุฉ ุจูู Spot ู Futures
ุงูููุงุฑูุฉ	Spot	Futures
ุงูููููุฉ	ุชููู ุงูุฃุตู	ูุง ุชููู ุงูุฃุตู
ุงูุฑุงูุนุฉ ุงููุงููุฉ	โ ูุง ููุฌุฏ	โ ููุฌุฏ
ุงุชุฌุงู ุงูุฑุจุญ	ููุท ุตุนูุฏ ุงูุณุนุฑ	ุตุนูุฏ ููุจูุท
ุงููุฎุงุทุฑุฉ	ููุฎูุถุฉ	ุนุงููุฉ ุฌุฏูุง
ุงูุชุตููุฉ (Liquidation)	โ ุบูุฑ ููุฌูุฏุฉ	โ ููุฌูุฏุฉ
ููุงุณุจ ูู	ุงููุจุชุฏุฆูู	ุงููุญุชุฑููู
๐งฉ ููุฎุต ุงูููู ุงูุฃุณุงุณู

ุงูุชุฏุงูู ุงูููุฑู (Spot): ูู ุชุจุงุฏู ุญูููู ููุฃุตู ุงูุฑูููุ ุฃูู ุฎุทูุฑุฉุ ูุฃุจุณุท ูููุจุชุฏุฆูู.

ุงูุนููุฏ ุงูุขุฌูุฉ (Futures): ูู ูุถุงุฑุจุฉ ุนูู ุญุฑูุฉ ุงูุณุนุฑุ ุฃูุซุฑ ุฑุจุญูุง ูููู ุฃูุซุฑ ุฎุทูุฑุฉ.

ุฃูู ุงููุฑู ุจููููุง ูู ุงูุฑุงูุนุฉ ุงููุงููุฉ ู ุงูุชูุงู ุงูุฃุตู ูู ุนุฏูู.

ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ ูู ุงููููุชุดุฑ ุถุฑูุฑูุฉ ูุชุฌูุจ ุงูุชุตููุฉ ุงููุงููุฉ.

๐ง ููุทุฉ ุฎุชุงููุฉ:

ููุชุงุฒ ุฌุฏูุง ๐ฅ
ุงูุขู ุณูุดุฑุญ ุขููุฉ ุนูู ุงููุญูุธุฉ ูุงูุจูุช ุฎุทูุฉ ุจุฎุทูุฉ โ ุชุญุฏูุฏูุง ููู ูููู ุงูุจูุช ุจู ุฌูุน ุงูุตููุงุช ุงูููุชูุญุฉ ูุนุฑุถูุง ูุตููุฉ ููุญุฏุฉ ููู ุนููุฉ ุชุญุชูู ุนูู:

ูุฌููุน ุงููููุฉุ ูุชูุณุท ุณุนุฑ ุงูุฏุฎููุ ููุณุจุฉ ุงูุงุฑุชูุงุน ุฃู ุงูุงูุฎูุงุถ ุงูุญุงููุฉ.

ูุฐุง ูู ุงูุดุฑุญ ุงูุฐู ูููู ุฃู ููุณุชุฎุฏู ูุจุงุดุฑุฉ ูุชุตููู ููุทู ุจุฑูุฌู ูุงุถุญ ููู Agent ุฃู ุงูุจูุช.

๐งฉ ุงููุฏู ุงูุนุงู

ุนูุฏูุง ููุชุญ ุงููุณุชุฎุฏู ุฃูุซุฑ ูู ุตููุฉ ุนูู ููุณ ุงูุนููุฉ (ูุซู BTC/USDT)ุ
ูุง ูุฌุจ ุฃู ุชูุนุฑุถ ูู ุตููุฉ ููุญุฏูุงุ
ุจู ุชูุฌูุน ูู ุตููุฉ ูุงุญุฏุฉ ุชูุซู ุงููุฑูุฒ ุงูุญุงูู (Open Position) ูุชูู ุงูุนููุฉ.

โ๏ธ ุขููุฉ ุงูุนูู ุฎุทูุฉ ุจุฎุทูุฉ
1๏ธโฃ ุนูุฏ ูุชุญ ุตููุฉ ุฌุฏูุฏุฉ (Buy ุฃู Sell)

ูู ุนูููุฉ ูุชู ุชูููุฐูุง ุชูุฑุณู ุฅูู ุงูุจูุช ูุน ุงููุนูููุงุช ุงูุชุงููุฉ:

{
  "symbol": "BTC/USDT",
  "side": "BUY",
  "amount": 0.004,
  "price": 50000
}

2๏ธโฃ ุงูุชุญูู ูู ูุฌูุฏ ูุฑูุฒ ููุชูุญ ููุนููุฉ ููุณูุง

ุนูุฏูุง ุชุตู ุตููุฉ ุฌุฏูุฏุฉุ ุงูุจูุช ูุจุญุซ ูู ูุงุฆูุฉ ุงููุฑุงูุฒ ุงูููุชูุญุฉ (Open Positions):

ุฅู ูุงูุช ุงูุนููุฉ ููุฌูุฏุฉ ูุณุจููุง (ูุซู BTC ููุฌูุฏุฉ ูู ุงููุงุฆูุฉ) โ ูุญุฏุซูุง.

ุฅู ูู ุชูู ููุฌูุฏุฉ โ ููุดุฆ ูุฑูุฒูุง ุฌุฏูุฏูุง ููุง.

๐งฎ ุนูุฏ ูุฌูุฏ ูุฑูุฒ ุณุงุจู ูููุณ ุงูุนููุฉ
๐ง ุงูููุฑุฉ:

ูุฌุจ ุฃู ุชูุฏูุฌ ุงูุตููุฉ ุงูุฌุฏูุฏุฉ ูุน ุงููุฏููุฉ ูุชูููู ุตููุฉ ูุงุญุฏุฉ ุจูุชูุณุท ุฌุฏูุฏ.

ูุซุงู:

ุงููุฑูุฒ ุงูุญุงูู:

BTC: 0.010 ุนูุฏ ูุชูุณุท 53,000$


ุตููุฉ ุฌุฏูุฏุฉ:

ุดุฑุงุก 0.005 BTC ุนูุฏ 55,000$

โ๏ธ ุงูุฎุทูุงุช ุงูุญุณุงุจูุฉ:
ุฅุฌูุงูู ุงููููุฉ ุงูุฌุฏูุฏุฉ = 0.010 + 0.005 = 0.015 BTC
ุฅุฌูุงูู ุงูุชูููุฉ = (0.010 * 53,000) + (0.005 * 55,000) = 530 + 275 = 805 (ร1000)
ูุชูุณุท ุงูุณุนุฑ ุงูุฌุฏูุฏ = 805 / 0.015 = 53,666.67$


ุงููุชูุฌุฉ ุจุนุฏ ุงูุฏูุฌ:

BTC_position = {
  "amount": 0.015,
  "average_price": 53666.67
}

๐ฐ ุนูุฏ ุญุณุงุจ ุงูุฑุจุญ ุฃู ุงูุฎุณุงุฑุฉ ุงูุญุงููุฉ

ุจุนุฏ ุงูุฏูุฌุ ุงูุจูุช ูุญุตู ุนูู ุงูุณุนุฑ ุงูุญุงูู ูู ุงูุณูู (ูุซูุงู ูู API ุงูููุตุฉ):

current_price = 56,000


ููุญุณุจ:

ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ = (current_price - average_price) ร amount
= (56,000 - 53,666.67) ร 0.015 = 35.0 USDT


ููุณุจุฉ ุงูุงุฑุชูุงุน:

percent_change = ((current_price - average_price) / average_price) ร 100
= ((56,000 - 53,666.67) / 53,666.67) ร 100 โ +4.35%

๐ ุงููุชูุฌุฉ ูู ูุงุฌูุฉ ุงูุจูุช ุฃู ููุญุฉ ุงูุตููุงุช ุงูููุชูุญุฉ

ุจุฏูุงู ูู ุนุฑุถ ุตููุชูู ูููุตูุชููุ ุงูุจูุช ูุนุฑุถ ุตููุฉ ูุงุญุฏุฉ ูุญุฏุซุฉ:

ุงูุนููุฉ	ุงููููุฉ ุงูุฅุฌูุงููุฉ	ูุชูุณุท ุงูุณุนุฑ	ุงูุณุนุฑ ุงูุญุงูู	ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ	ุงูุชุบูุฑ (%)
BTC/USDT	0.015	53,666.67	56,000	+35.0 USDT	+4.35%
๐ ุนูุฏ ุงูุจูุน (SELL)
ุงูุญุงูุฉ 1 โ ุจูุน ุฌุฒุฆู

ูู ุจุงุน ุงููุณุชุฎุฏู ุฌุฒุกูุง ูู ุงููุฑูุฒ:

ุจูุน 0.005 BTC ุจุณุนุฑ 56,000$


ุงูุฑุจุญ ูู ุงูุฌุฒุก ุงููุจุงุน:

(56,000 - 53,666.67) ร 0.005 = 11.67 USDT


ุงููููุฉ ุงูุฌุฏูุฏุฉ:

0.015 - 0.005 = 0.010 BTC


ูุจูู ููุณ ูุชูุณุท ุงูุณุนุฑ ุงูุณุงุจู (ูุฃู ุงูุจูุน ูุง ูุบูุฑ ูุชูุณุท ุงูุดุฑุงุก)ุ
ููุชู ุชุญุฏูุซ ุงููุฑูุฒ ููุตุจุญ:

ุงูุนููุฉ	ุงููููุฉ	ุงููุชูุณุท	ุงูุณุนุฑ ุงูุญุงูู	ุงูุฑุจุญ	ุงููุณุจุฉ
BTC/USDT	0.010	53,666.67	56,000	+23.33	+4.35%
ุงูุญุงูุฉ 2 โ ุจูุน ูุงูู

ุฅุฐุง ุจุงุน ูู ุงููููุฉ (0.015 BTC):

ุชูุญุณุจ ุงูุฃุฑุจุงุญ ุงููููุฉ.

ุชูุฒุงู ุงูุนููุฉ ูู ูุงุฆูุฉ ุงููุฑุงูุฒ ุงูููุชูุญุฉ.

ููุถุงู ุงูุฑุจุญ ุฅูู ุงูุฑุตูุฏ ุงูุฃุณุงุณู (USDT).

๐ง ููู ูููููุง ุงูุจูุช (ุงูููุทู ุงูุจุฑูุฌู)

ุงูููุทู ุงููุงูู ุงูุฐู ูุฌุจ ุฃู ูุจุฑูุฌู ุงูู Agent ูู ูุงูุชุงูู:

ุชุฎุฒูู ุงููุฑุงูุฒ ุงูููุชูุญุฉ ูู ุดูู ูุงููุณ (Dictionary):

positions = {
    "BTC/USDT": {
        "amount": 0.010,
        "average_price": 53000.0
    },
    "ETH/USDT": {
        "amount": 0.200,
        "average_price": 2500.0
    }
}


ุนูุฏ ูู ุตููุฉ ุฌุฏูุฏุฉ:

ุฅุฐุง ูุงูุช side == "BUY":

ุฅุฐุง ุงูุนููุฉ ููุฌูุฏุฉ โ ุฏูุฌูุง (ุชุญุฏูุซ ุงููุชูุณุท ูุงููููุฉ)

ุฅุฐุง ุบูุฑ ููุฌูุฏุฉ โ ุฅุถุงูุชูุง ููุฑูุฒ ุฌุฏูุฏ

ุฅุฐุง ูุงูุช side == "SELL":

ุฎุตู ุงููููุฉ

ุญุณุงุจ ุงูุฑุจุญ

ุญุฐู ุงููุฑูุฒ ูู ุฃุตุจุญุช ุงููููุฉ ุตูุฑูุง

ุนูุฏ ุนุฑุถ ุงูุตููุงุช ุงูููุชูุญุฉ:

ุงูุจูุช ูุฌูุจ ุงูุณุนุฑ ุงูุญุงูู ูู API.

ูุญุณุจ profit ู percent_change ููู ุนููุฉ.

ูุนุฑุถ ุตููุฉ ููุญุฏุฉ ูุงุญุฏุฉ ููุท ููู ุฑูุฒ (symbol).

โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ููููููู

ุนูุฏูุง ููุชุญ ุงููุณุชุฎุฏู ุฃูุซุฑ ูู ุตููุฉ ุนูู ููุณ ุงูุนููุฉุ
ุงูุจูุช ูุง ููุธูุฑูุง ูุตููุงุช ูููุตูุฉ.
ุจู ูุฌูุนูุง ูู ุตููุฉ ูุงุญุฏุฉ (Position) ุชุญุชูู ุนูู:

ุฅุฌูุงูู ุงููููุฉ

ูุชูุณุท ุณุนุฑ ุงูุฏุฎูู

ุงูุณุนุฑ ุงูุญุงูู

ุงูุฑุจุญ ุฃู ุงูุฎุณุงุฑุฉ

ูุณุจุฉ ุงูุชุบูุฑ

ููุฐุง ูุฌุนู ุงููุธุงู ูุงูุนููุง ูุซู ููุตุงุช ุงูุชุฏุงูู ุงูุงุญุชุฑุงููุฉ (Bybit, Binance, MEXC).  
ููุชุงุฒ ุฌุฏูุง ๐ฅ
ุฎูููุง ูุฑููุฒ ุงูุขู ุนูู ุดุฑุญ ูููููู ุนููู ูุจุณูุท ูู ููุณ ุงูููุช ููุถุญ ุจุงูุถุจุท ููู ุชูุญุณุจ ุงููุชูุฌุฉ ุนูุฏ ูุชุญ ุฃูุซุฑ ูู ุตููุฉ ุนูู ููุณ ุงูุนููุฉ (Spot) โ ุญุชู ูุณุชุทูุน ุงูู Agent ุฃู ุงูุจูุช ููู ููุทู ุงูุญุณุงุจ ูุงูุจุฑูุฌุฉ ุจุฏูุฉ.

๐งฉ ุงูููุฑุฉ ุงูุนุงูุฉ

ุนูุฏูุง ุชูุชุญ ุฃูุซุฑ ูู ุตููุฉ ุดุฑุงุก ุฃู ุจูุน ุนูู ููุณ ุงูุนููุฉ ูู ุงูุชุฏุงูู ุงูููุฑู (Spot)ุ ูุงููุญุตูุฉ ุงูููุงุฆูุฉ ูู ุงููุญูุธุฉ ูุง ุชูุธูุฑ ูู ุตููุฉ ุนูู ุญุฏุฉุ ุจู ุชูุธูุฑ ุงููุชูุฌุฉ ุงููุฌููุนุฉ โ ุฃู:

ุงูุฑุตูุฏ ุงูููู ููุนููุฉ + ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก (ุฃู ุงูุจูุน) ูุฌููุน ุงูุตููุงุช ุงูููุชูุญุฉ.

๐ง ุงูููููู ุงูุจุฑูุฌู ุงูุฃุณุงุณู

ููุดุฑุญูุง ุจุงูููุทู ุงูุฐู ูุญุชุงุฌู ุงูุจูุช:

1๏ธโฃ ูู ุตููุฉ ุฌุฏูุฏุฉ = ูููุฉ + ุณุนุฑ

ูู ุตููุฉ ุชุญุชูู ุนูู:

ุงูุนููุฉ (ูุซูุงู BTC)

ูููุฉ (amount)

ุณุนุฑ ุงูุฏุฎูู (entry_price)

ููุน ุงูุนูููุฉ (Buy / Sell)

2๏ธโฃ ุนูุฏ ูุชุญ ุฃูู ุตููุฉ

ุงูุจูุช ูุฎุฒู ุงูุจูุงูุงุช:

BTC_position = {
  "amount": 0.004,
  "average_price": 50000
}

3๏ธโฃ ุนูุฏ ูุชุญ ุตููุฉ ุซุงููุฉ ุนูู ููุณ ุงูุนููุฉ (ูุซูุงู ุดุฑุงุก ุฌุฏูุฏ)

ูุฌุจ ุฃูุง ุชูุนุชุจุฑ ุตููุฉ ูุณุชููุฉุ ุจู ูุชู ุฏูุฌูุง ูุน ุงูุตููุฉ ุงูุฃููู ูุญุณุงุจ ูุฑูุฒ ูุงุญุฏ (Position).

ูุซุงู:

ุงูุตููุฉ ุงูุฃููู: ุดุฑุงุก 0.004 BTC ุจุณุนุฑ 50,000$

ุงูุตููุฉ ุงูุซุงููุฉ: ุดุฑุงุก 0.006 BTC ุจุณุนุฑ 55,000$

ุงูุจูุช ุงูุขู ูุฌุจ ุฃู ูุญุณุจ ูุชูุณุท ุงูุณุนุฑ ุงูุฌุฏูุฏ ู ุงููููุฉ ุงููููุฉ.

๐ ุญุณุงุจ ุงููููุฉ ูุงููุชูุณุท ุงูุฌุฏูุฏ
ุงููุนุงุฏูุงุช:
ุฅุฌูุงูู ุงููููุฉ = ูููุฉ1 + ูููุฉ2
ุฅุฌูุงูู ุงูุชูููุฉ = (ูููุฉ1 ร ุณุนุฑ1) + (ูููุฉ2 ร ุณุนุฑ2)
ูุชูุณุท ุงูุณุนุฑ ุงูุฌุฏูุฏ = ุฅุฌูุงูู ุงูุชูููุฉ รท ุฅุฌูุงูู ุงููููุฉ

ุงูุญุณุงุจ:
ูููุฉ1 = 0.004 , ุณุนุฑ1 = 50000 โ ุชูููุฉ1 = 200 USDT
ูููุฉ2 = 0.006 , ุณุนุฑ2 = 55000 โ ุชูููุฉ2 = 330 USDT
ุฅุฌูุงูู ุงููููุฉ = 0.004 + 0.006 = 0.010 BTC
ุฅุฌูุงูู ุงูุชูููุฉ = 200 + 330 = 530 USDT
ูุชูุณุท ุงูุณุนุฑ = 530 / 0.010 = 53,000 USDT


ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

BTC_position = {
  "amount": 0.010,
  "average_price": 53000
}

๐ฐ ูู ุญุงูุฉ ุงูุจูุน ูู ูุฑูุฒ ููุชูุญ

ุนูุฏูุง ูุจูุน ุงูุจูุช ุฌุฒุกูุง ูู ุงููููุฉุ ููุฎุตู ูู ุงููุฑูุฒ ุจููุณ ุงููุชูุณุท.

ูุซุงู:

ุงููุฑูุฒ ุงูุญุงูู: 0.010 BTC ุนูุฏ 53,000$

ุงูุจูุช ูุจูุน 0.004 BTC ุจุณุนุฑ 56,000$

ุงูุฎุทูุงุช:

ุงูุฑุจุญ ูู ุงูุฌุฒุก ุงููุจุงุน:

ุฑุจุญ = (ุณุนุฑ ุงูุจูุน - ูุชูุณุท ุงูุดุฑุงุก) ร ุงููููุฉ ุงููุจุงุนุฉ
ุฑุจุญ = (56,000 - 53,000) ร 0.004 = 12 USDT


ุชุญุฏูุซ ุงููุฑูุฒ:

ุงููููุฉ ุงูุฌุฏูุฏุฉ = 0.010 - 0.004 = 0.006
(ูุญุชูุธ ุจููุณ ูุชูุณุท ุงูุณุนุฑ 53,000)

๐ ุนูุฏ ุงูุจูุน ุงููุงูู (ุฅุบูุงู ุงููุฑูุฒ)

ูู ุจุงุน ุงูุจูุช ุงููููุฉ ูุงููุฉ:

ูุชู ุญุณุงุจ ุงูุฑุจุญ ุงูููู.

ูุชู ุญุฐู ุงููุฑูุฒ ูู ุงููุญูุธุฉ.

ูููุถุงู ุงูุฑุจุญ ุฅูู ุฑุตูุฏ USDT.

ูุซุงู:
ูููุฉ: 0.010 BTC
ุณุนุฑ ุงูุดุฑุงุก ุงููุชูุณุท: 53,000
ุณุนุฑ ุงูุจูุน: 56,000
ุงูุฑุจุญ = (56,000 - 53,000) * 0.010 = 30 USDT


ุงููุชูุฌุฉ:

BTC = 0

USDT = +30

ุงููุฑูุฒ ููุบูู

๐ ุณููุงุฑูู ุนููู ูุชูุงูู
ุงูุฎุทูุฉ	ุงูุนูููุฉ	ุงููููุฉ	ุงูุณุนุฑ	ุงููุชูุฌุฉ ุจุนุฏ ุงูุฏูุฌ
1	Buy	0.004	50,000	amount=0.004, avg=50,000
2	Buy	0.006	55,000	amount=0.010, avg=53,000
3	Sell	0.004	56,000	amount=0.006, avg=53,000
4	Sell	0.006	57,000	amount=0, profit_total=+42 USDT
๐งฎ ูุง ูุญุชุงุฌู ุงูุจูุช ูุชุทุจูู ูุฐุง ุงูููุทู ุจุฑูุฌููุง:

ูู ุนููุฉ ูู ุงููุญูุธุฉ ุชูุซู ูุฑูุฒูุง ูุงุญุฏูุง (Position) ูุญุชูู ุนูู:

{
  "symbol": "BTC/USDT",
  "amount": 0.010,
  "average_price": 53000,
  "current_price": 56000,
  "profit": (56000 - 53000) * 0.010
}


ูุนูุฏ ูู ุนูููุฉ ุฌุฏูุฏุฉ:

ุฅุฐุง ูุงูุช Buy:

ูุญุฏูุซ average_price ู amount.

ุฅุฐุง ูุงูุช Sell:

ูุญุณุจ ุงูุฑุจุญ.

ููููู ุงููููุฉ.

ูุบูู ุงููุฑูุฒ ุฅุฐุง ุงููููุฉ ูุตูุช ุฅูู 0.

๐ง ุงูููููู ุงูููุงุฆู ุงูุฐู ูุฌุจ ุฃู ููููู ุงูู Agent:

ูู ุงูุชุฏุงูู ุงูููุฑู (Spot)ุ ูุง ุชูุฌุฏ "ุตููุงุช ูุชุนุฏุฏุฉ" ุจุงููุนูู ุงูุญูููู ูุซู ุงูู Futures.
ูู ุนูููุงุช ุงูุดุฑุงุก ูุงูุจูุน ุชูุฏูุฌ ูู ูุฑูุฒ ูุงุญุฏ ููู ุนููุฉ.
ุงูุจูุช ูุฌุจ ุฃู:

ูุฌูุน ุงููููุงุช.

ูุนูุฏ ุญุณุงุจ ุงููุชูุณุท.

ูุชุชุจุน ุงูุฑุจุญ ูุงูุฎุณุงุฑุฉ ุจุฏูุฉ.

ููุญุฏูุซ ุงููุญูุธุฉ ุจุนุฏ ูู ุนูููุฉ.

ูู ุชุฑุบุจ ุฃู ุฃุญูู ูุฐุง ุงูุดุฑุญ ุฅูู ููุทู ุจุฑูุฌู (Logic Template) ุจูุบุฉ Python ูุชุถูููู ูู ููุฏ ุงูุจูุชุ
ูุซูุงู ุฏุงูุฉ ูุซู:

def update_position(symbol, side, amount, price, positions):
    ...


ุชููู ุชููุงุฆููุง ุจุฏูุฌ ุงูุตููุงุช ูุชุญุฏูุซ ุงููุญูุธุฉุ