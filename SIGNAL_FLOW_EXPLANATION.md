# ๐ ุชุฏูู ูุนุงูุฌุฉ ุงูุฅุดุงุฑุงุช

## ๐ ุงูุจููุฉ ุงูุญุงููุฉ

### 1. ููุทุฉ ุงูุฏุฎูู (Entry Point)
```
๐ฅ TradingView โ Webhook Endpoint
```

**ุงููููุงุช ุงููุณุคููุฉ:**
- `app.py` - `/webhook` ู `/personal/<user_id>/webhook`
- `web_server.py` - `/webhook` ู `/personal/<user_id>/webhook`

### 2. ุงุณุชูุจุงู ููุนุงูุฌุฉ ุงูุฅุดุงุฑุฉ
```python
# ูู app.py
from signals.signal_converter import convert_simple_signal
from signals.signal_executor import signal_executor
```

**ุงูุฎุทูุงุช:**
1. ุงุณุชูุจุงู JSON ูู TradingView
2. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
3. ุชุญููู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุชูุณูู ุงูุฏุงุฎูู
4. ุชูููุฐ ุงูุฅุดุงุฑุฉ

### 3. ุชุญููู ุงูุฅุดุงุฑุฉ (Signal Conversion)
```
signals/signal_converter.py
```

**ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:**
- `convert_simple_signal()` - ุชุญููู ุงูุฅุดุงุฑุฉ ุงูุจุณูุทุฉ
- `validate_simple_signal()` - ุงูุชุญูู ูู ุตุญุฉ ุงูุฅุดุงุฑุฉ

**ุงูุชุญูููุงุช:**
- `buy` โ `action: 'buy'`
- `sell` โ `action: 'sell'`
- `long` โ `action: 'buy'`
- `close` โ `action: 'close'`
- `partial_close` โ `action: 'partial_close'`

### 4. ุชูููุฐ ุงูุฅุดุงุฑุฉ (Signal Execution)
```
signals/signal_executor.py
```

**ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ:**
```python
signal_executor.execute_signal(user_id, signal_data, user_data)
```

**ุงูููุงู:**
- ูุญุต ููุน ุงูุญุณุงุจ (demo/real)
- ุฌูุจ ุงูุณุนุฑ ูู API
- ุญุณุงุจ ุงููููุฉ
- ุชูููุฐ ุงูุฃูุฑ ุนูู Bybit
- ุญูุธ ุงูุตููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุฑุณุงู ุฅุดุนุงุฑ ูููุณุชุฎุฏู

### 5. ุฅุฏุงุฑุฉ ุงูุตููุงุช ุงููุฑุชุจุทุฉ ุจู ID
```
signals/signal_position_manager.py
```

**ุงูููุงู:**
- ุฑุจุท ุงูุตููุงุช ุจู ID ุงูุฅุดุงุฑุฉ
- ุชุชุจุน ุงูุตููุงุช ุงูููุชูุญุฉ
- ุฅุบูุงู ุงูุตููุงุช ุงููุฑุชุจุทุฉ
- ุงูุฅุบูุงู ุงูุฌุฒุฆู

### 6. ุฅุฏุงุฑุฉ ID ุงูุฅุดุงุฑุงุช
```
signals/signal_id_manager.py
```

**ุงูููุงู:**
- ุชูููุฏ ID ุนุดูุงุฆู ููุฅุดุงุฑุงุช
- ุฑุจุท ID ุงูุฅุดุงุฑุฉ ุจุฑูู ุงูุตููุฉ
- ุชุชุจุน ุงูุตููุงุช ุงููุฑุชุจุทุฉ ุจู ID

## ๐ ุชุฏูู ุงูุนูู ุงููุงูู

```
1. TradingView ูุฑุณู ุฅุดุงุฑุฉ
   โ
2. app.py ูุณุชูุจู ุงูุฅุดุงุฑุฉ ุนุจุฑ webhook
   โ
3. signal_converter ูุชุญูู ููุญูู ุงูุฅุดุงุฑุฉ
   โ
4. user_manager ูุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู
   โ
5. signal_executor ูููุฐ ุงูุฅุดุงุฑุฉ ุนูู Bybit
   โ
6. signal_position_manager ูุญูุธ ุงูุตููุฉ
   โ
7. ุฅุฑุณุงู ุฅุดุนุงุฑ ูููุณุชุฎุฏู ูู Telegram
```

## ๐ ุฃูุซูุฉ ุงูุฅุดุงุฑุงุช ุงููุฏุนููุฉ

### ุฅุดุงุฑุฉ ุดุฑุงุก
```json
{
  "signal": "buy",
  "symbol": "BTCUSDT",
  "id": "STRATEGY_001"
}
```

### ุฅุดุงุฑุฉ ุจูุน
```json
{
  "signal": "sell",
  "symbol": "ETHUSDT",
  "id": "STRATEGY_002"
}
```

### ุฅุดุงุฑุฉ ุฅุบูุงู
```json
{
  "signal": "close",
  "symbol": "BTCUSDT",
  "id": "STRATEGY_001"
}
```

### ุฅุบูุงู ุฌุฒุฆู
```json
{
  "signal": "partial_close",
  "symbol": "BTCUSDT",
  "percentage": 50,
  "id": "STRATEGY_001"
}
```

## โ๏ธ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ูุณุงุฑุงุช ุงูุงุณุชูุฑุงุฏ
```python
# ูุจู:
from signal_converter import convert_simple_signal

# ุจุนุฏ:
from signals.signal_converter import convert_simple_signal
```

### 2. ุงููููุงุช ุงููุนุฏูุฉ
- โ `web_server.py` - ุชู ุฅุตูุงุญ ุงูุงุณุชูุฑุงุฏุงุช
- โ `bybit_trading_bot.py` - ุชู ุฅุตูุงุญ ุงูุงุณุชูุฑุงุฏุงุช
- โ `app.py` - ุจุงููุนู ุตุญูุญ

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ูุฏูู
```bash
curl -X POST https://your-domain.com/personal/YOUR_USER_ID/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "signal": "buy",
    "symbol": "BTCUSDT",
    "id": "TEST_001"
  }'
```

### ูุชุทูุจุงุช:
1. ุงูุจูุช ูุดุบู (โ)
2. ุงููุณุชุฎุฏู ูุณุฌู (โ)
3. ุงููุณุชุฎุฏู ููุนูู (โ)
4. ุงูุฅุดุงุฑุฉ ุจุตูุบุฉ JSON ุตุญูุญุฉ (โ)
5. ุงููุณุงุฑุงุช ูุญุฏุซุฉ (โ)

## ๐ ุงูุชุญูู ูู ุงุณุชูุจุงู ุงูุฅุดุงุฑุงุช

### ูู ุงูุณุฌูุงุช (Logs)
```
๐ [WEBHOOK ุดุฎุตู] ุงุณุชูุจุงู ุทูุจ ุฌุฏูุฏ
๐ค ุงููุณุชุฎุฏู: 123456
๐ ุงูุจูุงูุงุช ุงููุณุชููุฉ: {...}
โ ุชู ุชุญููู ุงูุฅุดุงุฑุฉ: buy BTCUSDT
โ ูุชูุฌุฉ ุงูุชูููุฐ: {...}
```

### ูู Telegram
```
โ ุชู ุชูููุฐ ุฅุดุงุฑุฉ ุจูุฌุงุญ

๐ฏ ุงูุฅุฌุฑุงุก: buy
๐ ุงูุฑูุฒ: BTCUSDT
๐ฐ ุงููุจูุบ: 100.0 USDT
๐ ููุน ุงูุณูู: spot
๐ฆ ููุน ุงูุญุณุงุจ: real
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู**: `/start` ูู ุงูุจูุช
2. **ุชุฃูุฏ ูู ุชูุนูู ุงูุจูุช**: ุงุถุบุท โถ๏ธ ูู ุงูุจูุช
3. **ุฑุงุฌุน ุงูุณุฌูุงุช**: `trading_bot.log`
4. **ุงุฎุชุจุฑ ุงูุฅุดุงุฑุงุช**: ุงุณุชุฎุฏู curl ุฃู Postman
5. **ุชุญูู ูู ุงููุชุงุฆุฌ**: ุฑุงุฌุน ุงูุตููุงุช ูู ุงูุจูุช

