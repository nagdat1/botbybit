# ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙØ­Øµ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ ğŸ¯

## âœ… Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: **Ø¬Ø§Ù‡Ø² 100%**

---

## ğŸ“Š Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¨Ø·

### ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø­Ù‚Ù‚Ø©:
âœ… **ØªÙ‚Ø±ÙŠØ¨ Ø°ÙƒÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ÙƒÙ…ÙŠØ§Øª** - ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ù…Ø¨Ù„Øº/Ø²ÙˆØ¬/Ø±Ø§ÙØ¹Ø©  
âœ… **ØªÙ†ÙÙŠØ° ØµÙÙ‚Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¹Ù„Ù‰ Bybit** - ØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­  
âœ… **Ø±Ø¨Ø· ÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Øª** - Ù…Ù† Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„ØªÙ†ÙÙŠØ°  
âœ… **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ù…Ù„Ø©** - Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„ØµØºÙŠØ±Ø©  

---

## ğŸ”— Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ÙƒØ§Ù…Ù„Ø©

### 1ï¸âƒ£ **Ù…Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Webhook)**
```
Webhook â†’ app.py (web_server.py)
    â†“
ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© â†’ signal_converter.py
    â†“
ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥Ø´Ø§Ø±Ø© â†’ validation
    â†“
Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© â†’ signal_executor.py
```

### 2ï¸âƒ£ **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª (Signal Executor)**
```
signal_executor.py
    â†“
ÙØ­Øµ Ø§Ù„Ø±Ø§ÙØ¹Ø© ÙˆØ§Ù„Ù…Ø¨Ù„Øº â†’ min_notional check (10 USDT)
    â†“
Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒÙ…ÙŠØ© â†’ (amount * leverage) / price
    â†“
ØªÙ‚Ø±ÙŠØ¨ Ø°ÙƒÙŠ Ø¹Ø§Ù„Ù…ÙŠ â†’ auto-round (0.001-1000)
    â†“
Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ â†’ real_account_manager
```

### 3ï¸âƒ£ **Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (Real Account Manager)**
```
real_account_manager.py
    â†“
BybitRealAccount
    â†“
ØªÙˆÙ‚ÙŠØ¹ API â†’ HMAC-SHA256 signing
    â†“
Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù€ Bybit â†’ /v5/order/create
    â†“
ØªÙ„Ù‚Ù‰ Order ID â†’ Ø­ÙØ¸ ÙÙŠ Database
```

### 4ï¸âƒ£ **Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Bybit API**
```
bybit_trading_bot.py
    â†“
BybitAPI class
    â†“
place_order() â†’ ØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø±
set_leverage() â†’ Ø¶Ø¨Ø· Ø§Ù„Ø±Ø§ÙØ¹Ø©
get_ticker_price() â†’ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
```

---

## ğŸ§  Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ (Smart Rounding)

### Ø§Ù„Ù…ÙˆÙ‚Ø¹: `signal_executor.py` (Ø§Ù„Ø³Ø·Ø± 450-495)

### Ø§Ù„ÙˆØ¸ÙŠÙØ©:
```python
# ØªÙ‚Ø±ÙŠØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„ÙƒÙ…ÙŠØ©
if qty >= 1000:
    rounded_qty = round(qty)          # â†’ 1000
elif qty >= 100:
    rounded_qty = round(qty, 1)       # â†’ 123.5
elif qty >= 10:
    rounded_qty = round(qty, 2)       # â†’ 12.34
elif qty >= 1:
    rounded_qty = round(qty, 3)       # â†’ 1.234
elif qty >= 0.1:
    rounded_qty = round(qty, 4)       # â†’ 0.1234
elif qty >= 0.01:
    rounded_qty = round(qty, 5)       # â†’ 0.01234
elif qty >= 0.001:
    rounded_qty = round(qty, 6)       # â†’ 0.003 (BTC)
else:
    rounded_qty = round(qty, 8)       # â†’ 0.00012345
```

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø§Ø¬Ø­:
- **Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„**: 50 USDTØŒ 6x Ø±Ø§ÙØ¹Ø© Ø¹Ù„Ù‰ BTCUSDT
- **Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ©**: 0.00269203 BTC
- **Ø§Ù„ØªÙ‚Ø±ÙŠØ¨**: 0.003 BTC
- **Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙØ¹Ù„ÙŠ**: 55.72 USDT âœ…
- **Order ID**: a7400742-9e4e-44f8-bf6c-66d98a5c909f âœ…

---

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ÙˆÙ‚ÙŠØ¹Ø§Øª

### Bybit V5 API Signing:
```python
# real_account_manager.py
sign_str = timestamp + api_key + recv_window + params_str
signature = hmac.new(
    api_secret.encode('utf-8'),
    sign_str.encode('utf-8'),
    hashlib.sha256
).hexdigest()
```

### âœ… ØªÙ… Ø§Ø®ØªØ¨Ø§Ø±:
- GET requests (query string signing)
- POST requests (JSON body signing)
- Headers (X-BAPI-* headers)
- Error handling (retCode, retMsg)

---

## ğŸ“¦ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„Ø¯ÙˆØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|-------|-------|--------|
| `signal_executor.py` | ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª + ØªÙ‚Ø±ÙŠØ¨ Ø°ÙƒÙŠ | âœ… Ø¬Ø§Ù‡Ø² |
| `real_account_manager.py` | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© | âœ… Ø¬Ø§Ù‡Ø² |
| `bybit_trading_bot.py` | ÙˆØ§Ø¬Ù‡Ø© Bybit API | âœ… Ø¬Ø§Ù‡Ø² |
| `web_server.py` | Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Webhooks | âœ… Ø¬Ø§Ù‡Ø² |
| `signal_converter.py` | ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª | âœ… Ø¬Ø§Ù‡Ø² |
| `config.py` | Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª | âœ… Ø¬Ø§Ù‡Ø² |

---

## ğŸ¯ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### 1. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù‚ÙŠÙ…Ø©:
```python
min_notional_for_leverage = 10.0 USDT
# Ø±ÙØ¶ Ø¥Ø°Ø§: trade_amount * leverage < 10
```

### 2. Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:
```python
# ØªÙ‚Ø±ÙŠØ¨ Ø°ÙƒÙŠ Ù„Ø£ÙŠ ÙƒÙ…ÙŠØ©
qty â†’ rounded_qty (Ù…Ù† 0.001 Ø¥Ù„Ù‰ 1000)
```

### 3. Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙØ¹Ù„ÙŠ:
```python
effective_amount = (rounded_qty * price) / leverage
# Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙØ¹Ù„ÙŠ ÙÙŠ Ø§Ù„Ù€ logs
```

---

## ğŸš€ ØªØ¯ÙÙ‚ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„

```
1. Webhook ÙŠØ±ÙØ³Ù„ Ø¥Ø´Ø§Ø±Ø©
   â†“
2. signal_converter ÙŠØªØ­Ù‚Ù‚ ÙˆÙŠØ­ÙˆÙ„
   â†“
3. signal_executor ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø§ÙØ¹Ø©/Ø§Ù„Ù…Ø¨Ù„Øº
   â†“
4. Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒÙ…ÙŠØ© â†’ (50 * 6) / 111440 = 0.00269
   â†“
5. ØªÙ‚Ø±ÙŠØ¨ Ø°ÙƒÙŠ â†’ 0.003 BTC
   â†“
6. real_account_manager ÙŠÙˆÙ‚Ù‘Ø¹ Ø§Ù„Ø·Ù„Ø¨
   â†“
7. Bybit API ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø£Ù…Ø±
   â†“
8. Ø¥Ø±Ø¬Ø§Ø¹ Order ID
   â†“
9. Ø­ÙØ¸ ÙÙŠ Database
   â†“
10. âœ… ØµÙÙ‚Ø© Ù†Ø§Ø¬Ø­Ø©
```

---

## âœ… Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø®ÙŠØ± (Ù†Ø§Ø¬Ø­):
```
âœ… Symbol: BTCUSDT
âœ… Amount: 50 USDT
âœ… Leverage: 6x
âœ… Quantity: 0.003 BTC
âœ… Effective Amount: 55.72 USDT
âœ… Order ID: a7400742-9e4e-44f8-bf6c-66d98a5c909f
âœ… Status: Executed on Bybit
```

---

## ğŸ“ Ø§Ù„Ø®Ù„Ø§ØµØ©

### âœ… ØªÙ… Ø¥Ù†Ø¬Ø§Ø²:
1. **ØªÙ‚Ø±ÙŠØ¨ Ø°ÙƒÙŠ Ø¹Ø§Ù„Ù…ÙŠ** - ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ù…Ø¨Ù„Øº/Ø²ÙˆØ¬/Ø±Ø§ÙØ¹Ø©
2. **ØªÙ†ÙÙŠØ° ØµÙÙ‚Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©** - ØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù„Ù‰ Bybit
3. **Ø±Ø¨Ø· ÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Øª** - Ù…Ù† Webhook Ø¥Ù„Ù‰ Order ID
4. **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ù…Ù„Ø©** - Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù‚ÙŠÙ… ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­Ø©

### ğŸ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¢Ù†:
- âœ… **Ø¬Ø§Ù‡Ø² 100%** Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙØ¹Ù„ÙŠ
- âœ… **ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ù…Ø¨Ù„Øº** (10-1000+ USDT)
- âœ… **ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ø²ÙˆØ¬** (BTC, ETH, SOL, etc.)
- âœ… **ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ø±Ø§ÙØ¹Ø©** (1x, 5x, 10x, 100x)
- âœ… **ØªÙ†ÙÙŠØ° Ø¢Ù…Ù†** - ØªÙˆÙ‚ÙŠØ¹Ø§Øª ØµØ­ÙŠØ­Ø© Ù„Ù„Ù€ API

---

**ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØ­Øµ**: 2025-01-26  
**Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬
